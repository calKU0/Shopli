var UL=Object.defineProperty,jL=Object.defineProperties;var zL=Object.getOwnPropertyDescriptors;var vD=Object.getOwnPropertySymbols,HL=Object.getPrototypeOf,$L=Object.prototype.hasOwnProperty,GL=Object.prototype.propertyIsEnumerable,WL=Reflect.get;var yD=(n,e,t)=>e in n?UL(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,W=(n,e)=>{for(var t in e||={})$L.call(e,t)&&yD(n,t,e[t]);if(vD)for(var t of vD(e))GL.call(e,t)&&yD(n,t,e[t]);return n},ae=(n,e)=>jL(n,zL(e));var Fo=(n,e,t)=>WL(HL(n),t,e);var I=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function B0(n,e){return Object.is(n,e)}var Yt=null,th=!1,U0=1,wr=Symbol("SIGNAL");function ke(n){let e=Yt;return Yt=n,e}function j0(){return Yt}var dl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fl(n){if(th)throw new Error("");if(Yt===null)return;Yt.consumerOnSignalRead(n);let e=Yt.nextProducerIndex++;if(oh(Yt),e<Yt.producerNode.length&&Yt.producerNode[e]!==n&&ll(Yt)){let t=Yt.producerNode[e];ih(t,Yt.producerIndexOfThis[e])}Yt.producerNode[e]!==n&&(Yt.producerNode[e]=n,Yt.producerIndexOfThis[e]=ll(Yt)?wD(n,Yt,e):0),Yt.producerLastReadVersion[e]=n.version}function _D(){U0++}function z0(n){if(!(ll(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===U0)){if(!n.producerMustRecompute(n)&&!W0(n)){V0(n);return}n.producerRecomputeValue(n),V0(n)}}function H0(n){if(n.liveConsumerNode===void 0)return;let e=th;th=!0;try{for(let t of n.liveConsumerNode)t.dirty||qL(t)}finally{th=e}}function $0(){return Yt?.consumerAllowSignalWrites!==!1}function qL(n){n.dirty=!0,H0(n),n.consumerMarkedDirty?.(n)}function V0(n){n.dirty=!1,n.lastCleanEpoch=U0}function rh(n){return n&&(n.nextProducerIndex=0),ke(n)}function G0(n,e){if(ke(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ll(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ih(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function W0(n){oh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(z0(t),r!==t.version))return!0}return!1}function q0(n){if(oh(n),ll(n))for(let e=0;e<n.producerNode.length;e++)ih(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function wD(n,e,t){if(ED(n),n.liveConsumerNode.length===0&&ID(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=wD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function ih(n,e){if(ED(n),n.liveConsumerNode.length===1&&ID(n))for(let r=0;r<n.producerNode.length;r++)ih(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];oh(i),i.producerIndexOfThis[r]=e}}function ll(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function oh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function ED(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function ID(n){return n.producerNode!==void 0}function K0(n,e){let t=Object.create(KL);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(z0(t),fl(t),t.value===nh)throw t.error;return t.value};return r[wr]=t,r}var F0=Symbol("UNSET"),L0=Symbol("COMPUTING"),nh=Symbol("ERRORED"),KL=ae(W({},dl),{value:F0,dirty:!0,error:null,equal:B0,kind:"computed",producerMustRecompute(n){return n.value===F0||n.value===L0},producerRecomputeValue(n){if(n.value===L0)throw new Error("Detected cycle in computations.");let e=n.value;n.value=L0;let t=rh(n),r,i=!1;try{r=n.computation(),ke(null),i=e!==F0&&e!==nh&&r!==nh&&n.equal(e,r)}catch(o){r=nh,n.error=o}finally{G0(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function ZL(){throw new Error}var CD=ZL;function AD(n){CD(n)}function Z0(n){CD=n}var XL=null;function X0(n,e){let t=Object.create(sh);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(fl(t),t.value);return r[wr]=t,r}function hl(n,e){$0()||AD(n),n.equal(n.value,e)||(n.value=e,YL(n))}function Y0(n,e){$0()||AD(n),hl(n,e(n.value))}var sh=ae(W({},dl),{equal:B0,value:void 0,kind:"signal"});function YL(n){n.version++,_D(),H0(n),XL?.()}function Q0(n){let e=ke(null);try{return n()}finally{ke(e)}}var J0;function pl(){return J0}function $i(n){let e=J0;return J0=n,e}var ah=Symbol("NotFound");function ge(n){return typeof n=="function"}function Ka(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ch=Ka(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Rs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ct=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ge(r))try{r()}catch(o){e=o instanceof ch?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{xD(o)}catch(s){e=e??[],s instanceof ch?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ch(e)}}add(e){var t;if(e&&e!==this)if(this.closed)xD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Rs(t,e)}remove(e){let{_finalizers:t}=this;t&&Rs(t,e),e instanceof n&&e._removeParent(this)}};Ct.EMPTY=(()=>{let n=new Ct;return n.closed=!0,n})();var ey=Ct.EMPTY;function uh(n){return n instanceof Ct||n&&"closed"in n&&ge(n.remove)&&ge(n.add)&&ge(n.unsubscribe)}function xD(n){ge(n)?n():n.unsubscribe()}var zr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Za={setTimeout(n,e,...t){let{delegate:r}=Za;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Za;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function lh(n){Za.setTimeout(()=>{let{onUnhandledError:e}=zr;if(e)e(n);else throw n})}function Ms(){}var DD=ty("C",void 0,void 0);function bD(n){return ty("E",void 0,n)}function SD(n){return ty("N",n,void 0)}function ty(n,e,t){return{kind:n,value:e,error:t}}var Ns=null;function Xa(n){if(zr.useDeprecatedSynchronousErrorHandling){let e=!Ns;if(e&&(Ns={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ns;if(Ns=null,t)throw r}}else n()}function TD(n){zr.useDeprecatedSynchronousErrorHandling&&Ns&&(Ns.errorThrown=!0,Ns.error=n)}var Os=class extends Ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,uh(e)&&e.add(this)):this.destination=r4}static create(e,t,r){return new Ya(e,t,r)}next(e){this.isStopped?ry(SD(e),this):this._next(e)}error(e){this.isStopped?ry(bD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ry(DD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},t4=Function.prototype.bind;function ny(n,e){return t4.call(n,e)}var iy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){dh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){dh(r)}else dh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){dh(t)}}},Ya=class extends Os{constructor(e,t,r){super();let i;if(ge(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&zr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ny(e.next,o),error:e.error&&ny(e.error,o),complete:e.complete&&ny(e.complete,o)}):i=e}this.destination=new iy(i)}};function dh(n){zr.useDeprecatedSynchronousErrorHandling?TD(n):lh(n)}function n4(n){throw n}function ry(n,e){let{onStoppedNotification:t}=zr;t&&Za.setTimeout(()=>t(n,e))}var r4={closed:!0,next:Ms,error:n4,complete:Ms};var Qa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function lr(n){return n}function fh(...n){return oy(n)}function oy(n){return n.length===0?lr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=o4(t)?t:new Ya(t,r,i);return Xa(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=RD(r),new r((i,o)=>{let s=new Ya({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Qa](){return this}pipe(...t){return oy(t)(this)}toPromise(t){return t=RD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function RD(n){var e;return(e=n??zr.Promise)!==null&&e!==void 0?e:Promise}function i4(n){return n&&ge(n.next)&&ge(n.error)&&ge(n.complete)}function o4(n){return n&&n instanceof Os||i4(n)&&uh(n)}function sy(n){return ge(n?.lift)}function Ue(n){return e=>{if(sy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(n,e,t,r,i){return new ay(n,e,t,r,i)}var ay=class extends Os{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ja(){return Ue((n,e)=>{let t=null;n._refCount++;let r=Fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ec=class extends fe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,sy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ct;let t=this.getSubject();e.add(this.source.subscribe(Fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ct.EMPTY)}return e}refCount(){return Ja()(this)}};var MD=Ka(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ht=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new hh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new MD}next(t){Xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ey:(this.currentObservers=null,o.push(t),new Ct(()=>{this.currentObservers=null,Rs(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new hh(e,t),n})(),hh=class extends ht{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ey}};var Lt=class extends ht{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var cy={now(){return(cy.delegate||Date).now()},delegate:void 0};var ph=class extends Ct{constructor(e,t){super()}schedule(e,t=0){return this}};var gl={setInterval(n,e,...t){let{delegate:r}=gl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=gl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var tc=class extends ph{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return gl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&gl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Rs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var nc=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};nc.now=cy.now;var rc=class extends nc{constructor(e,t=nc.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var uy=new rc(tc);var gh=class extends tc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var mh=class extends rc{};var ly=new mh(gh);var Yn=new fe(n=>n.complete());function ND(n){return n&&ge(n.schedule)}function OD(n){return n[n.length-1]}function vh(n){return ge(OD(n))?n.pop():void 0}function Lo(n){return ND(OD(n))?n.pop():void 0}function yh(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function kD(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function PD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ps(n){return this instanceof Ps?(this.v=n,this):new Ps(n)}function FD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(m){return Promise.resolve(m).then(p,f)}}function a(p,m){r[p]&&(i[p]=function(y){return new Promise(function(_,A){o.push([p,y,_,A])>1||c(p,y)})},m&&(i[p]=m(i[p])))}function c(p,m){try{u(r[p](m))}catch(y){h(o[0][3],y)}}function u(p){p.value instanceof Ps?Promise.resolve(p.value.v).then(l,f):h(o[0][2],p)}function l(p){c("next",p)}function f(p){c("throw",p)}function h(p,m){p(m),o.shift(),o.length&&c(o[0][0],o[0][1])}}function LD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof PD=="function"?PD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var _h=n=>n&&typeof n.length=="number"&&typeof n!="function";function wh(n){return ge(n?.then)}function Eh(n){return ge(n[Qa])}function Ih(n){return Symbol.asyncIterator&&ge(n?.[Symbol.asyncIterator])}function Ch(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function s4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ah=s4();function xh(n){return ge(n?.[Ah])}function Dh(n){return FD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ps(t.read());if(i)return yield Ps(void 0);yield yield Ps(r)}}finally{t.releaseLock()}})}function bh(n){return ge(n?.getReader)}function $t(n){if(n instanceof fe)return n;if(n!=null){if(Eh(n))return a4(n);if(_h(n))return c4(n);if(wh(n))return u4(n);if(Ih(n))return VD(n);if(xh(n))return l4(n);if(bh(n))return d4(n)}throw Ch(n)}function a4(n){return new fe(e=>{let t=n[Qa]();if(ge(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function c4(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function u4(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,lh)})}function l4(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function VD(n){return new fe(e=>{f4(n,e).catch(t=>e.error(t))})}function d4(n){return VD(Dh(n))}function f4(n,e){var t,r,i,o;return kD(this,void 0,void 0,function*(){try{for(t=LD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Qn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Vo(n,e=0){return Ue((t,r)=>{t.subscribe(Fe(r,i=>Qn(r,n,()=>r.next(i),e),()=>Qn(r,n,()=>r.complete(),e),i=>Qn(r,n,()=>r.error(i),e)))})}function Bo(n,e=0){return Ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function BD(n,e){return $t(n).pipe(Bo(e),Vo(e))}function UD(n,e){return $t(n).pipe(Bo(e),Vo(e))}function jD(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function zD(n,e){return new fe(t=>{let r;return Qn(t,e,()=>{r=n[Ah](),Qn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ge(r?.return)&&r.return()})}function Sh(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{Qn(t,e,()=>{let r=n[Symbol.asyncIterator]();Qn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function HD(n,e){return Sh(Dh(n),e)}function $D(n,e){if(n!=null){if(Eh(n))return BD(n,e);if(_h(n))return jD(n,e);if(wh(n))return UD(n,e);if(Ih(n))return Sh(n,e);if(xh(n))return zD(n,e);if(bh(n))return HD(n,e)}throw Ch(n)}function _t(n,e){return e?$D(n,e):$t(n)}function he(...n){let e=Lo(n);return _t(n,e)}function ic(n,e){let t=ge(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function dy(n){return!!n&&(n instanceof fe||ge(n.lift)&&ge(n.subscribe))}var Gi=Ka(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function se(n,e){return Ue((t,r)=>{let i=0;t.subscribe(Fe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:h4}=Array;function p4(n,e){return h4(e)?n(...e):n(e)}function oc(n){return se(e=>p4(n,e))}var{isArray:g4}=Array,{getPrototypeOf:m4,prototype:v4,keys:y4}=Object;function Th(n){if(n.length===1){let e=n[0];if(g4(e))return{args:e,keys:null};if(_4(e)){let t=y4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function _4(n){return n&&typeof n=="object"&&m4(n)===v4}function Rh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ml(...n){let e=Lo(n),t=vh(n),{args:r,keys:i}=Th(n);if(r.length===0)return _t([],e);let o=new fe(w4(r,e,i?s=>Rh(i,s):lr));return t?o.pipe(oc(t)):o}function w4(n,e,t=lr){return r=>{GD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)GD(e,()=>{let u=_t(n[c],e),l=!1;u.subscribe(Fe(r,f=>{o[c]=f,l||(l=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function GD(n,e,t){n?Qn(t,n,e):e()}function WD(n,e,t,r,i,o,s,a){let c=[],u=0,l=0,f=!1,h=()=>{f&&!c.length&&!u&&e.complete()},p=y=>u<r?m(y):c.push(y),m=y=>{o&&e.next(y),u++;let _=!1;$t(t(y,l++)).subscribe(Fe(e,A=>{i?.(A),o?p(A):e.next(A)},()=>{_=!0},void 0,()=>{if(_)try{for(u--;c.length&&u<r;){let A=c.shift();s?Qn(e,s,()=>m(A)):m(A)}h()}catch(A){e.error(A)}}))};return n.subscribe(Fe(e,p,()=>{f=!0,h()})),()=>{a?.()}}function Qt(n,e,t=1/0){return ge(e)?Qt((r,i)=>se((o,s)=>e(r,o,i,s))($t(n(r,i))),t):(typeof e=="number"&&(t=e),Ue((r,i)=>WD(r,i,n,t)))}function qD(n=1/0){return Qt(lr,n)}function KD(){return qD(1)}function sc(...n){return KD()(_t(n,Lo(n)))}function Mh(n){return new fe(e=>{$t(n()).subscribe(e)})}function vl(...n){let e=vh(n),{args:t,keys:r}=Th(n),i=new fe(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let f=!1;$t(t[l]).subscribe(Fe(o,h=>{f||(f=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?Rh(r,a):a),o.complete())}))}});return e?i.pipe(oc(e)):i}function Nh(n,e,t){return t?Nh(n,e).pipe(oc(t)):new fe(r=>{let i=(...s)=>r.next(s.length===1?s[0]:s),o=n(i);return ge(e)?()=>e(i,o):void 0})}var ks=new fe(Ms);function Ln(n,e){return Ue((t,r)=>{let i=0;t.subscribe(Fe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function fi(n){return Ue((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Fe(t,void 0,void 0,s=>{o=$t(n(s,fi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function ZD(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Fe(s,l=>{let f=u++;c=a?n(c,l,f):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ac(n,e){return ge(e)?Qt(n,e,1):Qt(n,1)}function Uo(n){return Ue((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Vt(n){return n<=0?()=>Yn:Ue((e,t)=>{let r=0;e.subscribe(Fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Oh(n=E4){return Ue((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function E4(){return new Gi}function yl(n){return Ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Wi(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ln((i,o)=>n(i,o,r)):lr,Vt(1),t?Uo(e):Oh(()=>new Gi))}function cc(n){return n<=0?()=>Yn:Ue((e,t)=>{let r=[];e.subscribe(Fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function fy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ln((i,o)=>n(i,o,r)):lr,cc(1),t?Uo(e):Oh(()=>new Gi))}function Ph(n,e){return Ue(ZD(n,e,arguments.length>=2,!0))}function kh(...n){let e=Lo(n);return Ue((t,r)=>{(e?sc(n,t,e):sc(n,t)).subscribe(r)})}function Gt(n,e){return Ue((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Fe(r,c=>{i?.unsubscribe();let u=0,l=o++;$t(n(c,l)).subscribe(i=Fe(r,f=>r.next(e?e(c,f,l,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Fh(n){return Ue((e,t)=>{$t(n).subscribe(Fe(t,()=>t.complete(),Ms)),!t.closed&&e.subscribe(t)})}function pn(n,e,t){let r=ge(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Fe(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):lr}var Fb="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ee=class extends Error{code;constructor(e,t){super(C4(e,t)),this.code=e}};function I4(n){return`NG0${Math.abs(n)}`}function C4(n,e){return`${I4(n)}${e?": "+e:""}`}var Lb=Symbol("InputSignalNode#UNSET"),A4=ae(W({},sh),{transformFn:void 0,applyValueToInputSignal(n,e){hl(n,e)}});function Vb(n,e){let t=Object.create(A4);t.value=n,t.transformFn=e?.transform;function r(){if(fl(t),t.value===Lb){let i=null;throw new ee(-950,i)}return t.value}return r[wr]=t,r}function Ml(n){return{toString:n}.toString()}var Lh="__parameters__";function x4(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Bb(n,e,t){return Ml(()=>{let r=x4(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let f=c.hasOwnProperty(Lh)?c[Lh]:Object.defineProperty(c,Lh,{value:[]})[Lh];for(;f.length<=l;)f.push(null);return(f[l]=f[l]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ls=globalThis;function st(n){for(let e in n)if(n[e]===st)return e;throw Error("Could not find renamed property on target object.")}function D4(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function er(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(er).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function XD(n,e){return n?e?`${n} ${e}`:n:e||""}var b4=st({__forward_ref__:st});function Yi(n){return n.__forward_ref__=Yi,n.toString=function(){return er(this())},n}function Vn(n){return Ub(n)?n():n}function Ub(n){return typeof n=="function"&&n.hasOwnProperty(b4)&&n.__forward_ref__===Yi}function re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function fr(n){return{providers:n.providers||[],imports:n.imports||[]}}function gp(n){return YD(n,zb)||YD(n,Hb)}function jb(n){return gp(n)!==null}function YD(n,e){return n.hasOwnProperty(e)?n[e]:null}function S4(n){let e=n&&(n[zb]||n[Hb]);return e||null}function QD(n){return n&&(n.hasOwnProperty(JD)||n.hasOwnProperty(T4))?n[JD]:null}var zb=st({\u0275prov:st}),JD=st({\u0275inj:st}),Hb=st({ngInjectableDef:st}),T4=st({ngInjectorDef:st}),X=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $b(n){return n&&!!n.\u0275providers}var R4=st({\u0275cmp:st}),M4=st({\u0275dir:st}),N4=st({\u0275pipe:st}),O4=st({\u0275mod:st}),Wh=st({\u0275fac:st}),Il=st({__NG_ELEMENT_ID__:st}),eb=st({__NG_ENV_ID__:st});function hc(n){return typeof n=="string"?n:n==null?"":String(n)}function P4(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():hc(n)}function Gb(n,e){throw new ee(-200,n)}function A1(n,e){throw new ee(-201,!1)}var Te=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Te||{}),Sy;function Wb(){return Sy}function Jn(n){let e=Sy;return Sy=n,e}function qb(n,e,t){let r=gp(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Te.Optional)return null;if(e!==void 0)return e;A1(n,"Injector")}var k4={},Vs=k4,Ty="__NG_DI_FLAG__",qh=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?ah:Vs,r)}},Kh="ngTempTokenPath",F4="ngTokenPath",L4=/\n/gm,V4="\u0275",tb="__source";function B4(n,e=Te.Default){if(pl()===void 0)throw new ee(-203,!1);if(pl()===null)return qb(n,void 0,e);{let t=pl(),r;return t instanceof qh?r=t.injector:r=t,r.get(n,e&Te.Optional?null:void 0,e)}}function _e(n,e=Te.Default){return(Wb()||B4)(Vn(n),e)}function U(n,e=Te.Default){return _e(n,mp(e))}function mp(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ry(n){let e=[];for(let t=0;t<n.length;t++){let r=Vn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,o=Te.Default;for(let s=0;s<r.length;s++){let a=r[s],c=U4(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(_e(i,o))}else e.push(_e(r))}return e}function Kb(n,e){return n[Ty]=e,n.prototype[Ty]=e,n}function U4(n){return n[Ty]}function j4(n,e,t,r){let i=n[Kh];throw e[tb]&&i.unshift(e[tb]),n.message=z4(`
`+n.message,i,t,r),n[F4]=i,n[Kh]=null,n}function z4(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==V4?n.slice(2):n;let i=er(e);if(Array.isArray(e))i=e.map(er).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):er(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(L4,`
  `)}`}var Ut=Kb(Bb("Optional"),8);var H4=Kb(Bb("SkipSelf"),4);function Us(n,e){let t=n.hasOwnProperty(Wh);return t?n[Wh]:null}function $4(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function G4(n){return n.flat(Number.POSITIVE_INFINITY)}function x1(n,e){n.forEach(t=>Array.isArray(t)?x1(t,e):e(t))}function Zb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Zh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function W4(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function q4(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function K4(n,e,t){let r=Nl(n,e);return r>=0?n[r|1]=t:(r=~r,q4(n,r,e,t)),r}function hy(n,e){let t=Nl(n,e);if(t>=0)return n[t|1]}function Nl(n,e){return Z4(n,e,1)}function Z4(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var js={},Er=[],Cl=new X(""),Xb=new X("",-1),Yb=new X(""),Xh=class{get(e,t=Vs){if(t===Vs){let r=new Error(`NullInjectorError: No provider for ${er(e)}!`);throw r.name="NullInjectorError",r}return t}};function Qb(n,e){let t=n[O4]||null;if(!t&&e===!0)throw new Error(`Type ${er(n)} does not have '\u0275mod' property.`);return t}function pc(n){return n[R4]||null}function X4(n){return n[M4]||null}function Y4(n){return n[N4]||null}function xn(n){return{\u0275providers:n}}function Q4(...n){return{\u0275providers:Jb(!0,n),\u0275fromNgModule:!0}}function Jb(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return x1(e,s=>{let a=s;My(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&eS(i,o),t}function eS(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];D1(i,o=>{e(o,r)})}}function My(n,e,t,r){if(n=Vn(n),!n)return!1;let i=null,o=QD(n),s=!o&&pc(n);if(!o&&!s){let c=n.ngModule;if(o=QD(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)My(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{x1(o.imports,l=>{My(l,e,t,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&eS(u,e)}if(!a){let u=Us(i)||(()=>new i);e({provide:i,useFactory:u,deps:Er},i),e({provide:Yb,useValue:i,multi:!0},i),e({provide:Cl,useValue:()=>_e(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;D1(c,l=>{e(l,u)})}}else return!1;return i!==n&&n.providers!==void 0}function D1(n,e){for(let t of n)$b(t)&&(t=t.\u0275providers),Array.isArray(t)?D1(t,e):e(t)}var J4=st({provide:String,useValue:st});function tS(n){return n!==null&&typeof n=="object"&&J4 in n}function e8(n){return!!(n&&n.useExisting)}function t8(n){return!!(n&&n.useFactory)}function gc(n){return typeof n=="function"}function n8(n){return!!n.useClass}var vp=new X(""),Uh={},nb={},py;function b1(){return py===void 0&&(py=new Xh),py}var Bn=class{},Al=class extends Bn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Oy(e,s=>this.processProvider(s)),this.records.set(Xb,uc(void 0,this)),i.has("environment")&&this.records.set(Bn,uc(void 0,this));let o=this.records.get(vp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Yb,Er,Te.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?ah:Vs,r)}destroy(){wl(this),this._destroyed=!0;let e=ke(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ke(e)}}onDestroy(e){return wl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){wl(this);let t=$i(this),r=Jn(void 0),i;try{return e()}finally{$i(t),Jn(r)}}get(e,t=Vs,r=Te.Default){if(wl(this),e.hasOwnProperty(eb))return e[eb](this);r=mp(r);let i,o=$i(this),s=Jn(void 0);try{if(!(r&Te.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=a8(e)&&gp(e);u&&this.injectableDefInScope(u)?c=uc(Ny(e),Uh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Te.Self?b1():this.parent;return t=r&Te.Optional&&t===Vs?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Kh]=a[Kh]||[]).unshift(er(e)),o)throw a;return j4(a,e,"R3InjectorError",this.source)}else throw a}finally{Jn(s),$i(o)}}resolveInjectorInitializers(){let e=ke(null),t=$i(this),r=Jn(void 0),i;try{let o=this.get(Cl,Er,Te.Self);for(let s of o)s()}finally{$i(t),Jn(r),ke(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(er(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Vn(e);let t=gc(e)?e:Vn(e&&e.provide),r=i8(e);if(!gc(e)&&e.multi===!0){let i=this.records.get(t);i||(i=uc(void 0,Uh,!0),i.factory=()=>Ry(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ke(null);try{return t.value===nb?Gb(er(e)):t.value===Uh&&(t.value=nb,t.value=t.factory()),typeof t.value=="object"&&t.value&&s8(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ke(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Vn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ny(n){let e=gp(n),t=e!==null?e.factory:Us(n);if(t!==null)return t;if(n instanceof X)throw new ee(204,!1);if(n instanceof Function)return r8(n);throw new ee(204,!1)}function r8(n){if(n.length>0)throw new ee(204,!1);let t=S4(n);return t!==null?()=>t.factory(n):()=>new n}function i8(n){if(tS(n))return uc(void 0,n.useValue);{let e=nS(n);return uc(e,Uh)}}function nS(n,e,t){let r;if(gc(n)){let i=Vn(n);return Us(i)||Ny(i)}else if(tS(n))r=()=>Vn(n.useValue);else if(t8(n))r=()=>n.useFactory(...Ry(n.deps||[]));else if(e8(n))r=()=>_e(Vn(n.useExisting));else{let i=Vn(n&&(n.useClass||n.provide));if(o8(n))r=()=>new i(...Ry(n.deps));else return Us(i)||Ny(i)}return r}function wl(n){if(n.destroyed)throw new ee(205,!1)}function uc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function o8(n){return!!n.deps}function s8(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function a8(n){return typeof n=="function"||typeof n=="object"&&n instanceof X}function Oy(n,e){for(let t of n)Array.isArray(t)?Oy(t,e):t&&$b(t)?Oy(t.\u0275providers,e):e(t)}function jn(n,e){let t;n instanceof Al?(wl(n),t=n):t=new qh(n);let r,i=$i(t),o=Jn(void 0);try{return e()}finally{$i(i),Jn(o)}}function rS(){return Wb()!==void 0||pl()!=null}function iS(n){if(!rS())throw new ee(-203,!1)}function c8(n){return typeof n=="function"}var Qi=0,Re=1,ye=2,An=3,$r=4,nr=5,xl=6,Yh=7,tr=8,mc=9,qi=10,Bt=11,Dl=12,rb=13,xc=14,Cr=15,zs=16,lc=17,Ki=18,yp=19,oS=20,jo=21,gy=22,Qh=23,Ir=24,my=25,Un=26,sS=1;var Hs=7,Jh=8,vc=9,dr=10;function zo(n){return Array.isArray(n)&&typeof n[sS]=="object"}function Ji(n){return Array.isArray(n)&&n[sS]===!0}function S1(n){return(n.flags&4)!==0}function Dc(n){return n.componentOffset>-1}function _p(n){return(n.flags&1)===1}function pi(n){return!!n.template}function ep(n){return(n[ye]&512)!==0}function Ol(n){return(n[ye]&256)===256}var Py=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function aS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Gr=(()=>{let n=()=>cS;return n.ngInherit=!0,n})();function cS(n){return n.type.prototype.ngOnChanges&&(n.setInput=l8),u8}function u8(){let n=lS(this),e=n?.current;if(e){let t=n.previous;if(t===js)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function l8(n,e,t,r,i){let o=this.declaredInputs[r],s=lS(n)||d8(n,{previous:js,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Py(u&&u.currentValue,t,c===js),aS(n,e,i,t)}var uS="__ngSimpleChanges__";function lS(n){return n[uS]||null}function d8(n,e){return n[uS]=e}var ib=null;var pt=function(n,e=null,t){ib?.(n,e,t)},f8="svg",h8="math";function gi(n){for(;Array.isArray(n);)n=n[Qi];return n}function dS(n,e){return gi(e[n])}function _i(n,e){return gi(e[n.index])}function fS(n,e){return n.data[e]}function hS(n,e){return n[e]}function mi(n,e){let t=e[n];return zo(t)?t:t[Qi]}function p8(n){return(n[ye]&4)===4}function T1(n){return(n[ye]&128)===128}function g8(n){return Ji(n[An])}function yc(n,e){return e==null?null:n[e]}function pS(n){n[lc]=0}function gS(n){n[ye]&1024||(n[ye]|=1024,T1(n)&&Ep(n))}function m8(n,e){for(;n>0;)e=e[xc],n--;return e}function wp(n){return!!(n[ye]&9216||n[Ir]?.dirty)}function ky(n){n[qi].changeDetectionScheduler?.notify(8),n[ye]&64&&(n[ye]|=1024),wp(n)&&Ep(n)}function Ep(n){n[qi].changeDetectionScheduler?.notify(0);let e=$s(n);for(;e!==null&&!(e[ye]&8192||(e[ye]|=8192,!T1(e)));)e=$s(e)}function mS(n,e){if(Ol(n))throw new ee(911,!1);n[jo]===null&&(n[jo]=[]),n[jo].push(e)}function v8(n,e){if(n[jo]===null)return;let t=n[jo].indexOf(e);t!==-1&&n[jo].splice(t,1)}function $s(n){let e=n[An];return Ji(e)?e[An]:e}function R1(n){return n[Yh]??=[]}function M1(n){return n.cleanup??=[]}function y8(n,e,t,r){let i=R1(e);i.push(t),n.firstCreatePass&&M1(n).push(r,i.length-1)}var De={lFrame:AS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Fy=!1;function _8(){return De.lFrame.elementDepthCount}function w8(){De.lFrame.elementDepthCount++}function E8(){De.lFrame.elementDepthCount--}function N1(){return De.bindingsEnabled}function vS(){return De.skipHydrationRootTNode!==null}function I8(n){return De.skipHydrationRootTNode===n}function C8(){De.skipHydrationRootTNode=null}function $e(){return De.lFrame.lView}function Jt(){return De.lFrame.tView}function Wr(n){return De.lFrame.contextLView=n,n[tr]}function qr(n){return De.lFrame.contextLView=null,n}function rr(){let n=yS();for(;n!==null&&n.type===64;)n=n.parent;return n}function yS(){return De.lFrame.currentTNode}function A8(){let n=De.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Zs(n,e){let t=De.lFrame;t.currentTNode=n,t.isParent=e}function O1(){return De.lFrame.isParent}function P1(){De.lFrame.isParent=!1}function x8(){return De.lFrame.contextLView}function _S(){return Fy}function ob(n){let e=Fy;return Fy=n,e}function D8(){let n=De.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function b8(){return De.lFrame.bindingIndex}function S8(n){return De.lFrame.bindingIndex=n}function Ip(){return De.lFrame.bindingIndex++}function wS(n){let e=De.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function T8(){return De.lFrame.inI18n}function R8(n,e){let t=De.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ly(e)}function M8(){return De.lFrame.currentDirectiveIndex}function Ly(n){De.lFrame.currentDirectiveIndex=n}function N8(n){let e=De.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ES(){return De.lFrame.currentQueryIndex}function k1(n){De.lFrame.currentQueryIndex=n}function O8(n){let e=n[Re];return e.type===2?e.declTNode:e.type===1?n[nr]:null}function IS(n,e,t){if(t&Te.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Te.Host);)if(i=O8(o),i===null||(o=o[xc],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=De.lFrame=CS();return r.currentTNode=e,r.lView=n,!0}function F1(n){let e=CS(),t=n[Re];De.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function CS(){let n=De.lFrame,e=n===null?null:n.child;return e===null?AS(n):e}function AS(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function xS(){let n=De.lFrame;return De.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var DS=xS;function L1(){let n=xS();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function P8(n){return(De.lFrame.contextLView=m8(n,De.lFrame.contextLView))[tr]}function Xs(){return De.lFrame.selectedIndex}function Gs(n){De.lFrame.selectedIndex=n}function V1(){let n=De.lFrame;return fS(n.tView,n.selectedIndex)}function k8(){return De.lFrame.currentNamespace}var bS=!0;function Cp(){return bS}function Ap(n){bS=n}function F8(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=cS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function B1(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),l!=null&&(n.destroyHooks??=[]).push(t,l)}}function jh(n,e,t){SS(n,e,3,t)}function zh(n,e,t,r){(n[ye]&3)===t&&SS(n,e,t,r)}function vy(n,e){let t=n[ye];(t&3)===e&&(t&=16383,t+=1,n[ye]=t)}function SS(n,e,t,r){let i=r!==void 0?n[lc]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[lc]+=65536),(a<o||o==-1)&&(L8(n,t,e,c),n[lc]=(n[lc]&4294901760)+c+2),c++}function sb(n,e){pt(4,n,e);let t=ke(null);try{e.call(n)}finally{ke(t),pt(5,n,e)}}function L8(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ye]>>14<n[lc]>>16&&(n[ye]&3)===e&&(n[ye]+=16384,sb(a,o)):sb(a,o)}var fc=-1,Ws=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function V8(n){return(n.flags&8)!==0}function B8(n){return(n.flags&16)!==0}function U8(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];j8(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function TS(n){return n===3||n===4||n===6}function j8(n){return n.charCodeAt(0)===64}function _c(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?ab(n,t,i,null,e[++r]):ab(n,t,i,null,null))}}return n}function ab(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function RS(n){return n!==fc}function tp(n){return n&32767}function z8(n){return n>>16}function np(n,e){let t=z8(n),r=e;for(;t>0;)r=r[xc],t--;return r}var Vy=!0;function rp(n){let e=Vy;return Vy=n,e}var H8=256,MS=H8-1,NS=5,$8=0,hi={};function G8(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Il)&&(r=t[Il]),r==null&&(r=t[Il]=$8++);let i=r&MS,o=1<<i;e.data[n+(i>>NS)]|=o}function ip(n,e){let t=OS(n,e);if(t!==-1)return t;let r=e[Re];r.firstCreatePass&&(n.injectorIndex=e.length,yy(r.data,n),yy(e,null),yy(r.blueprint,null));let i=U1(n,e),o=n.injectorIndex;if(RS(i)){let s=tp(i),a=np(i,e),c=a[Re].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function yy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function OS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function U1(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=VS(i),r===null)return fc;if(t++,i=i[xc],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return fc}function By(n,e,t){G8(n,e,t)}function W8(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(TS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function PS(n,e,t){if(t&Te.Optional||n!==void 0)return n;A1(e,"NodeInjector")}function kS(n,e,t,r){if(t&Te.Optional&&r===void 0&&(r=null),(t&(Te.Self|Te.Host))===0){let i=n[mc],o=Jn(void 0);try{return i?i.get(e,r,t&Te.Optional):qb(e,r,t&Te.Optional)}finally{Jn(o)}}return PS(r,e,t)}function FS(n,e,t,r=Te.Default,i){if(n!==null){if(e[ye]&2048&&!(r&Te.Self)){let s=X8(n,e,t,r,hi);if(s!==hi)return s}let o=LS(n,e,t,r,hi);if(o!==hi)return o}return kS(e,t,r,i)}function LS(n,e,t,r,i){let o=K8(t);if(typeof o=="function"){if(!IS(e,n,r))return r&Te.Host?PS(i,t,r):kS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Te.Optional))A1(t);else return s}finally{DS()}}else if(typeof o=="number"){let s=null,a=OS(n,e),c=fc,u=r&Te.Host?e[Cr][nr]:null;for((a===-1||r&Te.SkipSelf)&&(c=a===-1?U1(n,e):e[a+8],c===fc||!ub(r,!1)?a=-1:(s=e[Re],a=tp(c),e=np(c,e)));a!==-1;){let l=e[Re];if(cb(o,a,l.data)){let f=q8(a,e,t,s,r,u);if(f!==hi)return f}c=e[a+8],c!==fc&&ub(r,e[Re].data[a+8]===u)&&cb(o,a,e)?(s=l,a=tp(c),e=np(c,e)):a=-1}}return i}function q8(n,e,t,r,i,o){let s=e[Re],a=s.data[n+8],c=r==null?Dc(a)&&Vy:r!=s&&(a.type&3)!==0,u=i&Te.Host&&o===a,l=Hh(a,s,t,c,u);return l!==null?bl(e,s,l,a):hi}function Hh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,l=o>>20,f=r?a:a+l,h=i?a+l:u;for(let p=f;p<h;p++){let m=s[p];if(p<c&&t===m||p>=c&&m.type===t)return p}if(i){let p=s[c];if(p&&pi(p)&&p.type===t)return c}return null}function bl(n,e,t,r){let i=n[t],o=e.data;if(i instanceof Ws){let s=i;s.resolving&&Gb(P4(o[t]));let a=rp(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Jn(s.injectImpl):null,l=IS(n,r,Te.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&F8(t,o[t],e)}finally{u!==null&&Jn(u),rp(a),s.resolving=!1,DS()}}return i}function K8(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Il)?n[Il]:void 0;return typeof e=="number"?e>=0?e&MS:Z8:e}function cb(n,e,t){let r=1<<n;return!!(t[e+(n>>NS)]&r)}function ub(n,e){return!(n&Te.Self)&&!(n&Te.Host&&e)}var Bs=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return FS(this._tNode,this._lView,e,mp(r),t)}};function Z8(){return new Bs(rr(),$e())}function $o(n){return Ml(()=>{let e=n.prototype.constructor,t=e[Wh]||Uy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Wh]||Uy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Uy(n){return Ub(n)?()=>{let e=Uy(Vn(n));return e&&e()}:Us(n)}function X8(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ye]&2048&&!ep(s);){let a=LS(o,s,t,r|Te.Self,hi);if(a!==hi)return a;let c=o.parent;if(!c){let u=s[oS];if(u){let l=u.get(t,hi,r);if(l!==hi)return l}c=VS(s),s=s[xc]}o=c}return i}function VS(n){let e=n[Re],t=e.type;return t===2?e.declTNode:t===1?n[nr]:null}function j1(n){return W8(rr(),n)}function lb(n,e=null,t=null,r){let i=BS(n,e,t,r);return i.resolveInjectorInitializers(),i}function BS(n,e=null,t=null,r,i=new Set){let o=[t||Er,Q4(n)];return r=r||(typeof n=="object"?void 0:er(n)),new Al(o,e||b1(),r||null,i)}var At=class n{static THROW_IF_NOT_FOUND=Vs;static NULL=new Xh;static create(e,t){if(Array.isArray(e))return lb({name:""},t,e,"");{let r=e.name??"";return lb({name:r},e.parent,e.providers,r)}}static \u0275prov=re({token:n,providedIn:"any",factory:()=>_e(Xb)});static __NG_ELEMENT_ID__=-1};var Y8=new X("");Y8.__NG_ELEMENT_ID__=n=>{let e=rr();if(e===null)throw new ee(204,!1);if(e.type&2)return e.value;if(n&Te.Optional)return null;throw new ee(204,!1)};var US=!1,Pl=(()=>{class n{static __NG_ELEMENT_ID__=Q8;static __NG_ENV_ID__=t=>t}return n})(),jy=class extends Pl{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return mS(this._lView,e),()=>v8(this._lView,e)}};function Q8(){return new jy($e())}var wc=class{},z1=new X("",{providedIn:"root",factory:()=>!1});var jS=new X(""),zS=new X(""),Ys=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Lt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),xp=(()=>{class n{internalPendingTasks=U(Ys);scheduler=U(wc);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return I(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),zy=class extends ht{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,rS()&&(this.destroyRef=U(Pl,{optional:!0})??void 0,this.pendingTasks=U(Ys,{optional:!0})??void 0)}emit(e){let t=ke(null);try{super.next(e)}finally{ke(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ct&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ce=zy;function op(...n){}function HS(n){let e,t;function r(){n=op;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function db(n){return queueMicrotask(()=>n()),()=>{n=op}}var H1="isAngularZone",sp=H1+"_ID",J8=0,Me=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ce(!1);onMicrotaskEmpty=new Ce(!1);onStable=new Ce(!1);onError=new Ce(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=US}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,nV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(H1)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,eV,op,op);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},eV={};function $1(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function tV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){HS(()=>{n.callbackScheduled=!1,Hy(n),n.isCheckStableRunning=!0,$1(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Hy(n)}function nV(n){let e=()=>{tV(n)},t=J8++;n._inner=n._inner.fork({name:"angular",properties:{[H1]:!0,[sp]:t,[sp+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(rV(c))return r.invokeTask(o,s,a,c);try{return fb(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),hb(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return fb(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!iV(c)&&e(),hb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Hy(n),$1(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Hy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function fb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function hb(n){n._nesting--,$1(n)}var $y=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ce;onMicrotaskEmpty=new Ce;onStable=new Ce;onError=new Ce;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function rV(n){return $S(n,"__ignore_ng_zone__")}function iV(n){return $S(n,"__scheduler_tick__")}function $S(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Zi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},oV=new X("",{providedIn:"root",factory:()=>{let n=U(Me),e=U(Zi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function pb(n,e){return Vb(n,e)}function sV(n){return Vb(Lb,n)}var GS=(pb.required=sV,pb);function aV(){return bc(rr(),$e())}function bc(n,e){return new Ar(_i(n,e))}var Ar=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=aV}return n})();function cV(n){return n instanceof Ar?n.nativeElement:n}function uV(n){return typeof n=="function"&&n[wr]!==void 0}function Sc(n,e){let t=X0(n,e?.equal),r=t[wr];return t.set=i=>hl(r,i),t.update=i=>Y0(r,i),t.asReadonly=lV.bind(t),t}function lV(){let n=this[wr];if(n.readonlyFn===void 0){let e=()=>this();e[wr]=n,n.readonlyFn=e}return n.readonlyFn}function WS(n){return uV(n)&&typeof n.set=="function"}function dV(){return this._results[Symbol.iterator]()}var Gy=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ht}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=G4(e);(this._changesDetected=!$4(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=dV};function qS(n){return(n.flags&128)===128}var KS=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(KS||{}),ZS=new Map,fV=0;function hV(){return fV++}function pV(n){ZS.set(n[yp],n)}function Wy(n){ZS.delete(n[yp])}var gb="__ngContext__";function Tc(n,e){zo(e)?(n[gb]=e[yp],pV(e)):n[gb]=e}function XS(n){return QS(n[Dl])}function YS(n){return QS(n[$r])}function QS(n){for(;n!==null&&!Ji(n);)n=n[$r];return n}var qy;function JS(n){qy=n}function gV(){if(qy!==void 0)return qy;if(typeof document<"u")return document;throw new ee(210,!1)}var G1=new X("",{providedIn:"root",factory:()=>mV}),mV="ng",W1=new X(""),xr=new X("",{providedIn:"platform",factory:()=>"unknown"});var q1=new X("",{providedIn:"root",factory:()=>gV().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var vV="h",yV="b";var eT=!1,_V=new X("",{providedIn:"root",factory:()=>eT});var tT=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(tT||{}),Dp=new X(""),mb=new Set;function K1(n){mb.has(n)||(mb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var wV=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})();var EV=()=>null;function nT(n,e,t=!1){return EV(n,e,t)}function rT(n,e){let t=n.contentQueries;if(t!==null){let r=ke(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];k1(o),a.contentQueries(2,e[s],s)}}}finally{ke(r)}}}function Ky(n,e,t){k1(0);let r=ke(null);try{e(n,t)}finally{ke(r)}}function Z1(n,e,t){if(S1(e)){let r=ke(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{ke(r)}}}var vi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(vi||{});var Vh;function IV(){if(Vh===void 0&&(Vh=null,Ls.trustedTypes))try{Vh=Ls.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Vh}function vb(n){return IV()?.createScriptURL(n)||n}var ap=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Fb})`}};function X1(n){return n instanceof ap?n.changingThisBreaksApplicationSecurity:n}function iT(n,e){let t=CV(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Fb})`)}return t===e}function CV(n){return n instanceof ap&&n.getTypeName()||null}var AV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function xV(n){return n=String(n),n.match(AV)?n:"unsafe:"+n}var Y1=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Y1||{});function Q1(n){let e=sT();return e?e.sanitize(Y1.URL,n)||"":iT(n,"URL")?X1(n):xV(hc(n))}function DV(n){let e=sT();if(e)return vb(e.sanitize(Y1.RESOURCE_URL,n)||"");if(iT(n,"ResourceURL"))return vb(X1(n));throw new ee(904,!1)}function bV(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?DV:Q1}function oT(n,e,t){return bV(e,t)(n)}function sT(){let n=$e();return n&&n[qi].sanitizer}var SV=/^>|^->|<!--|-->|--!>|<!-$/g,TV=/(<|>)/g,RV="\u200B$1\u200B";function MV(n){return n.replace(SV,e=>e.replace(TV,RV))}function aT(n){return n instanceof Function?n():n}function NV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var cT="ng-template";function OV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&NV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(J1(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function J1(n){return n.type===4&&n.value!==cT}function PV(n,e,t){let r=n.type===4&&!t?cT:n.value;return e===r}function kV(n,e,t){let r=4,i=n.attrs,o=i!==null?VV(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Hr(r)&&!Hr(c))return!1;if(s&&Hr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!PV(n,c,t)||c===""&&e.length===1){if(Hr(r))return!1;s=!0}}else if(r&8){if(i===null||!OV(n,i,c,t)){if(Hr(r))return!1;s=!0}}else{let u=e[++a],l=FV(c,i,J1(n),t);if(l===-1){if(Hr(r))return!1;s=!0;continue}if(u!==""){let f;if(l>o?f="":f=i[l+1].toLowerCase(),r&2&&u!==f){if(Hr(r))return!1;s=!0}}}}return Hr(r)||s}function Hr(n){return(n&1)===0}function FV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return BV(e,n)}function uT(n,e,t=!1){for(let r=0;r<e.length;r++)if(kV(n,e[r],t))return!0;return!1}function LV(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function VV(n){for(let e=0;e<n.length;e++){let t=n[e];if(TS(t))return e}return n.length}function BV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function UV(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function yb(n,e){return n?":not("+e.trim()+")":e}function jV(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Hr(s)&&(e+=yb(o,i),i=""),r=s,o=o||!Hr(r);t++}return i!==""&&(e+=yb(o,i)),e}function zV(n){return n.map(jV).join(",")}function HV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Hr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var eo={};function $V(n,e){return n.createText(e)}function GV(n,e,t){n.setValue(e,t)}function WV(n,e){return n.createComment(MV(e))}function lT(n,e,t){return n.createElement(e,t)}function cp(n,e,t,r,i){n.insertBefore(e,t,r,i)}function dT(n,e,t){n.appendChild(e,t)}function _b(n,e,t,r,i){r!==null?cp(n,e,t,r,i):dT(n,e,t)}function qV(n,e,t){n.removeChild(null,e,t)}function KV(n,e,t){n.setAttribute(e,"style",t)}function ZV(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function fT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&U8(n,e,r),i!==null&&ZV(n,e,i),o!==null&&KV(n,e,o)}function e_(n,e,t,r,i,o,s,a,c,u,l){let f=Un+r,h=f+i,p=XV(f,h),m=typeof u=="function"?u():u;return p[Re]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:l}}function XV(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:eo);return t}function YV(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=e_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function t_(n,e,t,r,i,o,s,a,c,u,l){let f=e.blueprint.slice();return f[Qi]=i,f[ye]=r|4|128|8|64|1024,(u!==null||n&&n[ye]&2048)&&(f[ye]|=2048),pS(f),f[An]=f[xc]=n,f[tr]=t,f[qi]=s||n&&n[qi],f[Bt]=a||n&&n[Bt],f[mc]=c||n&&n[mc]||null,f[nr]=o,f[yp]=hV(),f[xl]=l,f[oS]=u,f[Cr]=e.type==2?n[Cr]:f,f}function QV(n,e,t){let r=_i(e,n),i=YV(t),o=n[qi].rendererFactory,s=n_(n,t_(n,i,null,hT(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function hT(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function pT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function n_(n,e){return n[Dl]?n[rb][$r]=e:n[Dl]=e,n[rb]=e,e}function be(n=1){gT(Jt(),$e(),Xs()+n,!1)}function gT(n,e,t,r){if(!r)if((e[ye]&3)===3){let o=n.preOrderCheckHooks;o!==null&&jh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&zh(e,o,0,t)}Gs(t)}var bp=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(bp||{});function Zy(n,e,t,r){let i=ke(null);try{let[o,s,a]=n.inputs[t],c=null;(s&bp.SignalBased)!==0&&(c=e[o][wr]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):aS(e,c,o,r)}finally{ke(i)}}function mT(n,e,t,r,i){let o=Xs(),s=r&2;try{Gs(-1),s&&e.length>Un&&gT(n,e,Un,!1),pt(s?2:0,i),t(r,i)}finally{Gs(o),pt(s?3:1,i)}}function Sp(n,e,t){i6(n,e,t),(t.flags&64)===64&&o6(n,e,t)}function r_(n,e,t=_i){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function JV(n,e,t,r){let o=r.get(_V,eT)||t===vi.ShadowDom,s=n.selectRootElement(e,o);return e6(s),s}function e6(n){t6(n)}var t6=()=>null;function n6(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function vT(n,e,t,r,i,o,s,a){if(!a&&o_(e,n,t,r,i)){Dc(e)&&r6(t,e.index);return}if(e.type&3){let c=_i(e,t);r=n6(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function r6(n,e){let t=mi(e,n);t[ye]&16||(t[ye]|=64)}function i6(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Dc(t)&&QV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||ip(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=bl(e,n,s,t);if(Tc(c,e),o!==null&&u6(e,s-r,c,a,t,o),pi(a)){let u=mi(t.index,e);u[tr]=bl(e,n,s,t)}}}function o6(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=M8();try{Gs(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];Ly(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&s6(c,u)}}finally{Gs(-1),Ly(s)}}function s6(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function i_(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];uT(e,o.selectors,!1)&&(r??=[],pi(o)?r.unshift(o):r.push(o))}return r}function a6(n,e,t,r,i,o){let s=_i(n,e);c6(e[Bt],s,o,n.value,t,r,i)}function c6(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?hc(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function u6(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];Zy(r,t,c,u)}}function l6(n,e){let t=n[mc],r=t?t.get(Zi,null):null;r&&r.handleError(e)}function o_(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1],f=e.data[u];Zy(f,t[u],l,i),a=!0}if(o)for(let c of o){let u=t[c],l=e.data[c];Zy(l,u,r,i),a=!0}return a}function d6(n,e){let t=mi(e,n),r=t[Re];f6(r,t);let i=t[Qi];i!==null&&t[xl]===null&&(t[xl]=nT(i,t[mc])),pt(18),s_(r,t,t[tr]),pt(19,t[tr])}function f6(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function s_(n,e,t){F1(e);try{let r=n.viewQuery;r!==null&&Ky(1,r,t);let i=n.template;i!==null&&mT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ki]?.finishViewCreation(n),n.staticContentQueries&&rT(n,e),n.staticViewQueries&&Ky(2,n.viewQuery,t);let o=n.components;o!==null&&h6(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ye]&=-5,L1()}}function h6(n,e){for(let t=0;t<e.length;t++)d6(n,e[t])}function yT(n,e,t,r){let i=ke(null);try{let o=e.tView,a=n[ye]&4096?4096:16,c=t_(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[zs]=u;let l=n[Ki];return l!==null&&(c[Ki]=l.createEmbeddedView(o)),s_(o,c,t),c}finally{ke(i)}}function Xy(n,e){return!e||e.firstChild===null||qS(n)}var p6;function a_(n,e){return p6(n,e)}var Xi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Xi||{});function c_(n){return(n.flags&32)===32}function dc(n,e,t,r,i){if(r!=null){let o,s=!1;Ji(r)?o=r:zo(r)&&(s=!0,r=r[Qi]);let a=gi(r);n===0&&t!==null?i==null?dT(e,t,a):cp(e,t,a,i||null,!0):n===1&&t!==null?cp(e,t,a,i||null,!0):n===2?qV(e,a,s):n===3&&e.destroyNode(a),o!=null&&A6(e,n,o,t,i)}}function g6(n,e){_T(n,e),e[Qi]=null,e[nr]=null}function m6(n,e,t,r,i,o){r[Qi]=i,r[nr]=e,Rp(n,r,t,1,i,o)}function _T(n,e){e[qi].changeDetectionScheduler?.notify(9),Rp(n,e,e[Bt],2,null,null)}function v6(n){let e=n[Dl];if(!e)return _y(n[Re],n);for(;e;){let t=null;if(zo(e))t=e[Dl];else{let r=e[dr];r&&(t=r)}if(!t){for(;e&&!e[$r]&&e!==n;)zo(e)&&_y(e[Re],e),e=e[An];e===null&&(e=n),zo(e)&&_y(e[Re],e),t=e&&e[$r]}e=t}}function u_(n,e){let t=n[vc],r=t.indexOf(e);t.splice(r,1)}function wT(n,e){if(Ol(e))return;let t=e[Bt];t.destroyNode&&Rp(n,e,t,3,null,null),v6(e)}function _y(n,e){if(Ol(e))return;let t=ke(null);try{e[ye]&=-129,e[ye]|=256,e[Ir]&&q0(e[Ir]),_6(n,e),y6(n,e),e[Re].type===1&&e[Bt].destroy();let r=e[zs];if(r!==null&&Ji(e[An])){r!==e[An]&&u_(r,e);let i=e[Ki];i!==null&&i.detachView(n)}Wy(e)}finally{ke(t)}}function y6(n,e){let t=n.cleanup,r=e[Yh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Yh]=null);let i=e[jo];if(i!==null){e[jo]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Qh];if(o!==null){e[Qh]=null;for(let s of o)s.destroy()}}function _6(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ws)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];pt(4,a,c);try{c.call(a)}finally{pt(5,a,c)}}else{pt(4,i,o);try{o.call(i)}finally{pt(5,i,o)}}}}}function ET(n,e,t){return w6(n,e.parent,t)}function w6(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Qi];if(Dc(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===vi.None||i===vi.Emulated)return null}return _i(r,t)}function IT(n,e,t){return I6(n,e,t)}function E6(n,e,t){return n.type&40?_i(n,t):null}var I6=E6,wb;function Tp(n,e,t,r){let i=ET(n,r,e),o=e[Bt],s=r.parent||e[nr],a=IT(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)_b(o,i,t[c],a,!1);else _b(o,i,t,a,!1);wb!==void 0&&wb(o,r,e,t,i)}function El(n,e){if(e!==null){let t=e.type;if(t&3)return _i(e,n);if(t&4)return Yy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return El(n,r);{let i=n[e.index];return Ji(i)?Yy(-1,i):gi(i)}}else{if(t&128)return El(n,e.next);if(t&32)return a_(e,n)()||gi(n[e.index]);{let r=CT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=$s(n[Cr]);return El(i,r)}else return El(n,e.next)}}}return null}function CT(n,e){if(e!==null){let r=n[Cr][nr],i=e.projection;return r.projection[i]}return null}function Yy(n,e){let t=dr+n+1;if(t<e.length){let r=e[t],i=r[Re].firstChild;if(i!==null)return El(r,i)}return e[Hs]}function l_(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Tc(gi(a),r),t.flags|=2),!c_(t))if(c&8)l_(n,e,t.child,r,i,o,!1),dc(e,n,i,a,o);else if(c&32){let u=a_(t,r),l;for(;l=u();)dc(e,n,i,l,o);dc(e,n,i,a,o)}else c&16?AT(n,e,r,t,i,o):dc(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Rp(n,e,t,r,i,o){l_(t,r,n.firstChild,e,i,o,!1)}function C6(n,e,t){let r=e[Bt],i=ET(n,t,e),o=t.parent||e[nr],s=IT(o,t,e);AT(r,0,e,t,i,s)}function AT(n,e,t,r,i,o){let s=t[Cr],c=s[nr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];dc(e,n,i,l,o)}else{let u=c,l=s[An];qS(r)&&(u.flags|=128),l_(n,e,u,l,i,o,!0)}}function A6(n,e,t,r,i){let o=t[Hs],s=gi(t);o!==s&&dc(e,n,r,o,i);for(let a=dr;a<t.length;a++){let c=t[a];Rp(c[Re],c,n,e,r,o)}}function x6(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Xi.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Xi.Important),n.setStyle(t,r,i,o))}}function up(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(gi(o)),Ji(o)&&D6(o,r);let s=t.type;if(s&8)up(n,e,t.child,r);else if(s&32){let a=a_(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=CT(e,t);if(Array.isArray(a))r.push(...a);else{let c=$s(e[Cr]);up(c[Re],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function D6(n,e){for(let t=dr;t<n.length;t++){let r=n[t],i=r[Re].firstChild;i!==null&&up(r[Re],r,i,e)}n[Hs]!==n[Qi]&&e.push(n[Hs])}function xT(n){if(n[my]!==null){for(let e of n[my])e.impl.addSequence(e);n[my].length=0}}var DT=[];function b6(n){return n[Ir]??S6(n)}function S6(n){let e=DT.pop()??Object.create(R6);return e.lView=n,e}function T6(n){n.lView[Ir]!==n&&(n.lView=null,DT.push(n))}var R6=ae(W({},dl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ep(n.lView)},consumerOnSignalRead(){this.lView[Ir]=this}});function M6(n){let e=n[Ir]??Object.create(N6);return e.lView=n,e}var N6=ae(W({},dl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=$s(n.lView);for(;e&&!bT(e[Re]);)e=$s(e);e&&gS(e)},consumerOnSignalRead(){this.lView[Ir]=this}});function bT(n){return n.type!==2}function ST(n){if(n[Qh]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Qh])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ye]&8192)}}var O6=100;function TT(n,e=!0,t=0){let i=n[qi].rendererFactory,o=!1;o||i.begin?.();try{P6(n,t)}catch(s){throw e&&l6(n,s),s}finally{o||i.end?.()}}function P6(n,e){let t=_S();try{ob(!0),Qy(n,e);let r=0;for(;wp(n);){if(r===O6)throw new ee(103,!1);r++,Qy(n,1)}}finally{ob(t)}}function k6(n,e,t,r){if(Ol(e))return;let i=e[ye],o=!1,s=!1;F1(e);let a=!0,c=null,u=null;o||(bT(n)?(u=b6(e),c=rh(u)):j0()===null?(a=!1,u=M6(e),c=rh(u)):e[Ir]&&(q0(e[Ir]),e[Ir]=null));try{pS(e),S8(n.bindingStartIndex),t!==null&&mT(n,e,t,2,r);let l=(i&3)===3;if(!o)if(l){let p=n.preOrderCheckHooks;p!==null&&jh(e,p,null)}else{let p=n.preOrderHooks;p!==null&&zh(e,p,0,null),vy(e,0)}if(s||F6(e),ST(e),RT(e,0),n.contentQueries!==null&&rT(n,e),!o)if(l){let p=n.contentCheckHooks;p!==null&&jh(e,p)}else{let p=n.contentHooks;p!==null&&zh(e,p,1),vy(e,1)}V6(n,e);let f=n.components;f!==null&&NT(e,f,0);let h=n.viewQuery;if(h!==null&&Ky(2,h,r),!o)if(l){let p=n.viewCheckHooks;p!==null&&jh(e,p)}else{let p=n.viewHooks;p!==null&&zh(e,p,2),vy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[gy]){for(let p of e[gy])p();e[gy]=null}o||(xT(e),e[ye]&=-73)}catch(l){throw o||Ep(e),l}finally{u!==null&&(G0(u,c),a&&T6(u)),L1()}}function RT(n,e){for(let t=XS(n);t!==null;t=YS(t))for(let r=dr;r<t.length;r++){let i=t[r];MT(i,e)}}function F6(n){for(let e=XS(n);e!==null;e=YS(e)){if(!(e[ye]&2))continue;let t=e[vc];for(let r=0;r<t.length;r++){let i=t[r];gS(i)}}}function L6(n,e,t){pt(18);let r=mi(e,n);MT(r,t),pt(19,r[tr])}function MT(n,e){T1(n)&&Qy(n,e)}function Qy(n,e){let r=n[Re],i=n[ye],o=n[Ir],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&W0(o)),s||=!1,o&&(o.dirty=!1),n[ye]&=-9217,s)k6(r,n,r.template,n[tr]);else if(i&8192){ST(n),RT(n,1);let a=r.components;a!==null&&NT(n,a,1),xT(n)}}function NT(n,e,t){for(let r=0;r<e.length;r++)L6(n,e[r],t)}function V6(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Gs(~i);else{let o=i,s=t[++r],a=t[++r];R8(s,o);let c=e[o];pt(24,c),a(2,c),pt(25,c)}}}finally{Gs(-1)}}function d_(n,e){let t=_S()?64:1088;for(n[qi].changeDetectionScheduler?.notify(e);n;){n[ye]|=t;let r=$s(n);if(ep(n)&&!r)return n;n=r}return null}function OT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function PT(n,e,t,r=!0){let i=e[Re];if(B6(i,e,n,t),r){let s=Yy(t,n),a=e[Bt],c=a.parentNode(n[Hs]);c!==null&&m6(i,n[nr],a,e,c,s)}let o=e[xl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Jy(n,e){if(n.length<=dr)return;let t=dr+e,r=n[t];if(r){let i=r[zs];i!==null&&i!==n&&u_(i,r),e>0&&(n[t-1][$r]=r[$r]);let o=Zh(n,dr+e);g6(r[Re],r);let s=o[Ki];s!==null&&s.detachView(o[Re]),r[An]=null,r[$r]=null,r[ye]&=-129}return r}function B6(n,e,t,r){let i=dr+r,o=t.length;r>0&&(t[i-1][$r]=e),r<o-dr?(e[$r]=t[i],Zb(t,dr+r,e)):(t.push(e),e[$r]=null),e[An]=t;let s=e[zs];s!==null&&t!==s&&kT(s,e);let a=e[Ki];a!==null&&a.insertView(n),ky(e),e[ye]|=128}function kT(n,e){let t=n[vc],r=e[An];if(zo(r))n[ye]|=2;else{let i=r[An][Cr];e[Cr]!==i&&(n[ye]|=2)}t===null?n[vc]=[e]:t.push(e)}var Sl=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Re];return up(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[tr]}set context(e){this._lView[tr]=e}get destroyed(){return Ol(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[An];if(Ji(e)){let t=e[Jh],r=t?t.indexOf(this):-1;r>-1&&(Jy(e,r),Zh(t,r))}this._attachedToViewContainer=!1}wT(this._lView[Re],this._lView)}onDestroy(e){mS(this._lView,e)}markForCheck(){d_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ye]&=-129}reattach(){ky(this._lView),this._lView[ye]|=128}detectChanges(){this._lView[ye]|=1024,TT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ep(this._lView),t=this._lView[zs];t!==null&&!e&&u_(t,this._lView),_T(this._lView[Re],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=ep(this._lView),r=this._lView[zs];r!==null&&!t&&kT(r,this._lView),ky(this._lView)}};var qs=(()=>{class n{static __NG_ELEMENT_ID__=z6}return n})(),U6=qs,j6=class extends U6{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=yT(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Sl(i)}};function z6(){return Mp(rr(),$e())}function Mp(n,e){return n.type&4?new j6(e,n,bc(n,e)):null}function kl(n,e,t,r,i){let o=n.data[e];if(o===null)o=H6(n,e,t,r,i),T8()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=A8();o.injectorIndex=s===null?-1:s.injectorIndex}return Zs(o,!0),o}function H6(n,e,t,r,i){let o=yS(),s=O1(),a=s?o:o&&o.parent,c=n.data[e]=G6(n,a,t,e,r,i);return $6(n,c,o,s),c}function $6(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function G6(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return vS()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Qae=new RegExp(`^(\\d+)*(${yV}|${vV})*(.*)`);var W6=()=>null;function e1(n,e){return W6(n,e)}var q6=class{},FT=class{},t1=class{resolveComponentFactory(e){throw Error(`No component factory found for ${er(e)}.`)}},Np=class{static NULL=new t1},Ec=class{},Rc=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>K6()}return n})();function K6(){let n=$e(),e=rr(),t=mi(e.index,n);return(zo(t)?t:n)[Bt]}var Z6=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>null})}return n})();var wy={},n1=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=mp(r);let i=this.injector.get(e,wy,r);return i!==wy||t===wy?i:this.parentInjector.get(e,t,r)}};function r1(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=XD(i,a);else if(o==2){let c=a,u=e[++s];r=XD(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ne(n,e=Te.Default){let t=$e();if(t===null)return _e(n,e);let r=rr();return FS(r,t,Vn(n),e)}function f_(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,c=null,u=null,l=Y6(s);l===null?a=s:[a,c,u]=l,eB(n,e,t,a,o,c,u)}o!==null&&r!==null&&X6(t,r,o)}function X6(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ee(-301,!1);r.push(e[i],o)}}function Y6(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&pi(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,Q6(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function Q6(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function J6(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function eB(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let h=0;h<a;h++){let p=r[h];!c&&pi(p)&&(c=!0,J6(n,t,h)),By(ip(t,e),n,p.type)}sB(t,n.data.length,a);for(let h=0;h<a;h++){let p=r[h];p.providersResolver&&p.providersResolver(p)}let u=!1,l=!1,f=pT(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let p=r[h];if(t.mergedAttrs=_c(t.mergedAttrs,p.hostAttrs),nB(n,t,e,f,p),oB(f,p,i),s!==null&&s.has(p)){let[y,_]=s.get(p);t.directiveToIndex.set(p.type,[f,y+t.directiveStart,_+t.directiveStart])}else(o===null||!o.has(p))&&t.directiveToIndex.set(p.type,f);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let m=p.type.prototype;!u&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!l&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),l=!0),f++}tB(n,t,o)}function tB(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Eb(0,e,i,r),Eb(1,e,i,r),Cb(e,r,!1);else{let o=t.get(i);Ib(0,e,o,r),Ib(1,e,o,r),Cb(e,r,!0)}}}function Eb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),LT(e,o)}}function Ib(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),LT(e,s)}}function LT(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Cb(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||J1(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let l of u)if(l===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let l=0;l<u.length;l+=2)if(u[l]===e){s??=[],s.push(u[l+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function nB(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Us(i.type,!0)),s=new Ws(o,pi(i),Ne);n.blueprint[r]=s,t[r]=s,rB(n,e,r,pT(n,t,i.hostVars,eo),i)}function rB(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;iB(s)!=a&&s.push(a),s.push(t,r,o)}}function iB(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function oB(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;pi(e)&&(t[""]=n)}}function sB(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function VT(n,e,t,r,i,o,s,a){let c=e.consts,u=yc(c,s),l=kl(e,n,2,r,u);return o&&f_(e,t,l,yc(c,a),i),l.mergedAttrs=_c(l.mergedAttrs,l.attrs),l.attrs!==null&&r1(l,l.attrs,!1),l.mergedAttrs!==null&&r1(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function BT(n,e){B1(n,e),S1(e)&&n.queries.elementEnd(e)}var lp=class extends Np{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=pc(e);return new Tl(t,this.ngModule)}};function aB(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&bp.SignalBased)!==0};return i&&(o.transform=i),o})}function cB(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function uB(n,e,t){let r=e instanceof Bn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new n1(t,r):t}function lB(n){let e=n.get(Ec,null);if(e===null)throw new ee(407,!1);let t=n.get(Z6,null),r=n.get(wc,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function dB(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return lT(e,t,t==="svg"?f8:t==="math"?h8:null)}var Tl=class extends FT{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=aB(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=cB(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=zV(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){pt(22);let o=ke(null);try{let s=this.componentDef,a=r?["ng-version","19.2.7"]:HV(this.componentDef.selectors[0]),c=e_(0,null,null,1,0,null,null,null,null,[a],null),u=uB(s,i||this.ngModule,e),l=lB(u),f=l.rendererFactory.createRenderer(null,s),h=r?JV(f,r,s.encapsulation,u):dB(s,f),p=t_(null,c,null,512|hT(s),null,null,l,f,u,null,nT(h,u,!0));p[Un]=h,F1(p);let m=null;try{let y=VT(Un,c,p,"#host",()=>[this.componentDef],!0,0);h&&(fT(f,h,y),Tc(h,p)),Sp(c,p,y),Z1(c,y,p),BT(c,y),t!==void 0&&fB(y,this.ngContentSelectors,t),m=mi(y.index,p),p[tr]=m[tr],s_(c,p,null)}catch(y){throw m!==null&&Wy(m),Wy(p),y}finally{pt(23),L1()}return new i1(this.componentType,p)}finally{ke(o)}}},i1=class extends q6{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=fS(t[Re],Un),this.location=bc(this._tNode,t),this.instance=mi(this._tNode.index,t)[tr],this.hostView=this.changeDetectorRef=new Sl(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=o_(r,i[Re],i,e,t);this.previousInputValues.set(e,t);let s=mi(r.index,i);d_(s,1)}get injector(){return new Bs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function fB(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Go=(()=>{class n{static __NG_ELEMENT_ID__=hB}return n})();function hB(){let n=rr();return jT(n,$e())}var pB=Go,UT=class extends pB{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return bc(this._hostTNode,this._hostLView)}get injector(){return new Bs(this._hostTNode,this._hostLView)}get parentInjector(){let e=U1(this._hostTNode,this._hostLView);if(RS(e)){let t=np(e,this._hostLView),r=tp(e),i=t[Re].data[r+8];return new Bs(i,t)}else return new Bs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Ab(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-dr}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=e1(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Xy(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!c8(e),a;if(s)a=t;else{let m=t||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let c=s?e:new Tl(pc(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let y=(s?u:this.parentInjector).get(Bn,null);y&&(o=y)}let l=pc(c.componentType??{}),f=e1(this._lContainer,l?.id??null),h=f?.firstChild??null,p=c.create(u,i,h,o);return this.insertImpl(p.hostView,a,Xy(this._hostTNode,f)),p}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(g8(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[An],u=new UT(c,c[nr],c[An]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return PT(s,i,o,r),e.attachToViewContainerRef(),Zb(Ey(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Ab(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Jy(this._lContainer,t);r&&(Zh(Ey(this._lContainer),t),wT(r[Re],r))}detach(e){let t=this._adjustIndex(e,-1),r=Jy(this._lContainer,t);return r&&Zh(Ey(this._lContainer),t)!=null?new Sl(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Ab(n){return n[Jh]}function Ey(n){return n[Jh]||(n[Jh]=[])}function jT(n,e){let t,r=e[n.index];return Ji(r)?t=r:(t=OT(r,e,null,n),e[n.index]=t,n_(e,t)),mB(t,e,n,r),new UT(t,n,e)}function gB(n,e){let t=n[Bt],r=t.createComment(""),i=_i(e,n),o=t.parentNode(i);return cp(t,o,r,t.nextSibling(i),!1),r}var mB=_B,vB=()=>!1;function yB(n,e,t){return vB(n,e,t)}function _B(n,e,t,r){if(n[Hs])return;let i;t.type&8?i=gi(r):i=gB(e,t),n[Hs]=i}var o1=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},s1=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)h_(e,t).matches!==null&&this.queries[t].setDirty()}},a1=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=bB(e):this.predicate=e}},c1=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},u1=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,wB(t,o)),this.matchTNodeWithReadOption(e,t,Hh(t,e,o,!1,!1))}else r===qs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Hh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ar||i===Go||i===qs&&t.type&4)this.addMatch(t.index,-2);else{let o=Hh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function wB(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function EB(n,e){return n.type&11?bc(n,e):n.type&4?Mp(n,e):null}function IB(n,e,t,r){return t===-1?EB(e,n):t===-2?CB(n,e,r):bl(n,n[Re],t,e)}function CB(n,e,t){if(t===Ar)return bc(e,n);if(t===qs)return Mp(e,n);if(t===Go)return jT(e,n)}function zT(n,e,t,r){let i=e[Ki].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let l=o[u];a.push(IB(e,l,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function l1(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=zT(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],l=e[-c];for(let f=dr;f<l.length;f++){let h=l[f];h[zs]===h[An]&&l1(h[Re],h,u,r)}if(l[vc]!==null){let f=l[vc];for(let h=0;h<f.length;h++){let p=f[h];l1(p[Re],p,u,r)}}}}}return r}function AB(n,e){return n[Ki].queries[e].queryList}function xB(n,e,t){let r=new Gy((t&4)===4);return y8(n,e,r,r.destroy),(e[Ki]??=new s1).queries.push(new o1(r))-1}function DB(n,e,t){let r=Jt();return r.firstCreatePass&&(SB(r,new a1(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),xB(r,$e(),e)}function bB(n){return n.split(",").map(e=>e.trim())}function SB(n,e,t){n.queries===null&&(n.queries=new c1),n.queries.track(new u1(e,t))}function h_(n,e){return n.queries.getByIndex(e)}function TB(n,e){let t=n[Re],r=h_(t,e);return r.crossesNgTemplate?l1(t,n,e,[]):zT(t,n,r,e)}var Ic=class{},p_=class{};var d1=class extends Ic{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new lp(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Qb(e);this._bootstrapComponents=aT(o.bootstrap),this._r3Injector=BS(e,t,[{provide:Ic,useValue:this},{provide:Np,useValue:this.componentFactoryResolver},...r],er(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},f1=class extends p_{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new d1(this.moduleType,e,[])}};var dp=class extends Ic{injector;componentFactoryResolver=new lp(this);instance=null;constructor(e){super();let t=new Al([...e.providers,{provide:Ic,useValue:this},{provide:Np,useValue:this.componentFactoryResolver}],e.parent||b1(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Op(n,e,t=null){return new dp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var RB=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Jb(!1,t.type),i=r.length>0?Op([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:n,providedIn:"environment",factory:()=>new n(_e(Bn))})}return n})();function Et(n){return Ml(()=>{let e=HT(n),t=ae(W({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===KS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(RB).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||vi.Emulated,styles:n.styles||Er,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&K1("NgStandalone"),$T(t);let r=n.dependencies;return t.directiveDefs=xb(r,!1),t.pipeDefs=xb(r,!0),t.id=kB(t),t})}function MB(n){return pc(n)||X4(n)}function NB(n){return n!==null}function hr(n){return Ml(()=>({type:n.type,bootstrap:n.bootstrap||Er,declarations:n.declarations||Er,imports:n.imports||Er,exports:n.exports||Er,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function OB(n,e){if(n==null)return js;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=bp.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function PB(n){if(n==null)return js;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Nt(n){return Ml(()=>{let e=HT(n);return $T(e),e})}function g_(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function HT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||js,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Er,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:OB(n.inputs,e),outputs:PB(n.outputs),debugInfo:null}}function $T(n){n.features?.forEach(e=>e(n))}function xb(n,e){if(!n)return null;let t=e?Y4:MB;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(NB)}function kB(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function FB(n){return Object.getPrototypeOf(n.prototype).constructor}function Kr(n){let e=FB(n.type),t=!0,r=[n];for(;e;){let i;if(pi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ee(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Iy(n.inputs),s.declaredInputs=Iy(n.declaredInputs),s.outputs=Iy(n.outputs);let a=i.hostBindings;a&&jB(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&BB(n,c),u&&UB(n,u),LB(n,i),D4(n.outputs,i.outputs),pi(i)&&i.data.animation){let l=n.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Kr&&(t=!1)}}e=Object.getPrototypeOf(e)}VB(r)}function LB(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function VB(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=_c(i.hostAttrs,t=_c(t,i.hostAttrs))}}function Iy(n){return n===js?{}:n===Er?[]:n}function BB(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function UB(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function jB(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function GT(n){return HB(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function zB(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function HB(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function $B(n,e,t){return n[e]=t}function Ho(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function GB(n,e,t,r){let i=Ho(n,e,t);return Ho(n,e+1,r)||i}function WB(n,e,t,r,i,o,s,a,c){let u=e.consts,l=kl(e,n,4,s||null,a||null);N1()&&f_(e,t,l,yc(u,c),i_),l.mergedAttrs=_c(l.mergedAttrs,l.attrs),B1(e,l);let f=l.tView=e_(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),f.queries=e.queries.embeddedTView(l)),l}function WT(n,e,t,r,i,o,s,a,c,u){let l=t+Un,f=e.firstCreatePass?WB(l,e,n,r,i,o,s,a,c):e.data[l];Zs(f,!1);let h=qB(e,n,f,t);Cp()&&Tp(e,n,h,f),Tc(h,n);let p=OT(h,n,h,f);return n[l]=p,n_(n,p),yB(p,f,n),_p(f)&&Sp(e,n,f),c!=null&&r_(n,f,u),f}function gn(n,e,t,r,i,o,s,a){let c=$e(),u=Jt(),l=yc(u.consts,o);return WT(c,u,n,e,t,r,i,l,s,a),gn}var qB=KB;function KB(n,e,t,r){return Ap(!0),e[Bt].createComment("")}var qT=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var KT=new X("");var ZB=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new h1})}return n})(),h1=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Wo(n){return!!n&&typeof n.then=="function"}function m_(n){return!!n&&typeof n.subscribe=="function"}var ZT=new X("");function v_(n){return xn([{provide:ZT,multi:!0,useValue:n}])}var XT=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=U(ZT,{optional:!0})??[];injector=U(At);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=jn(this.injector,i);if(Wo(o))t.push(o);else if(m_(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),y_=new X("");function XB(){Z0(()=>{throw new ee(600,!1)})}function YB(n){return n.isBoundToModule}var QB=10;var yi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=U(oV);afterRenderManager=U(wV);zonelessEnabled=U(z1);rootEffectScheduler=U(ZB);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ht;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=U(Ys).hasPendingTasks.pipe(se(t=>!t));constructor(){U(Dp,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=U(Bn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=At.NULL){pt(10);let o=t instanceof FT;if(!this._injector.get(XT).done){let p="";throw new ee(405,p)}let a;o?a=t:a=this._injector.get(Np).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=YB(a)?void 0:this._injector.get(Ic),u=r||a.selector,l=a.create(i,[],u,c),f=l.location.nativeElement,h=l.injector.get(KT,null);return h?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),$h(this.components,l),h?.unregisterApplication(f)}),this._loadComponent(l),pt(11,l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){pt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(tT.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ee(101,!1);let t=ke(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ke(t),this.afterTick.next(),pt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ec,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<QB;)pt(14),this.synchronizeOnce(),pt(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)JB(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>wp(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;$h(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(y_,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>$h(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $h(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function JB(n,e,t,r){if(!t&&!wp(n))return;TT(n,e,t&&!r?0:1)}function Mc(n,e,t,r){let i=$e(),o=Ip();if(Ho(i,o,e)){let s=Jt(),a=V1();a6(a,i,n,e,t,r)}return Mc}function e5(n,e,t,r){return Ho(n,Ip(),t)?e+hc(t)+r:eo}function t5(n,e,t,r,i,o){let s=b8(),a=GB(n,s,t,i);return wS(2),a?e+hc(t)+r+hc(i)+o:eo}function Bh(n,e){return n<<17|e<<2}function Ks(n){return n>>17&32767}function n5(n){return(n&2)==2}function r5(n,e){return n&131071|e<<17}function p1(n){return n|2}function Cc(n){return(n&131068)>>2}function Cy(n,e){return n&-131069|e<<2}function i5(n){return(n&1)===1}function g1(n){return n|1}function o5(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ks(s),c=Cc(s);n[r]=t;let u=!1,l;if(Array.isArray(t)){let f=t;l=f[1],(l===null||Nl(f,l)>0)&&(u=!0)}else l=t;if(i)if(c!==0){let h=Ks(n[a+1]);n[r+1]=Bh(h,a),h!==0&&(n[h+1]=Cy(n[h+1],r)),n[a+1]=r5(n[a+1],r)}else n[r+1]=Bh(a,0),a!==0&&(n[a+1]=Cy(n[a+1],r)),a=r;else n[r+1]=Bh(c,0),a===0?a=r:n[c+1]=Cy(n[c+1],r),c=r;u&&(n[r+1]=p1(n[r+1])),Db(n,l,r,!0),Db(n,l,r,!1),s5(e,l,n,r,o),s=Bh(a,c),o?e.classBindings=s:e.styleBindings=s}function s5(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Nl(o,e)>=0&&(t[r+1]=g1(t[r+1]))}function Db(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ks(i):Cc(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];a5(c,e)&&(a=!0,n[s+1]=r?g1(u):p1(u)),s=r?Ks(u):Cc(u)}a&&(n[t+1]=r?p1(i):g1(i))}function a5(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Nl(n,e)>=0:!1}function at(n,e,t){let r=$e(),i=Ip();if(Ho(r,i,e)){let o=Jt(),s=V1();vT(o,s,r,n,e,r[Bt],t,!1)}return at}function bb(n,e,t,r,i){o_(e,n,t,i?"class":"style",r)}function __(n,e,t){return YT(n,e,t,!1),__}function Pp(n,e){return YT(n,e,null,!0),Pp}function YT(n,e,t,r){let i=$e(),o=Jt(),s=wS(2);if(o.firstUpdatePass&&u5(o,n,s,r),e!==eo&&Ho(i,s,e)){let a=o.data[Xs()];p5(o,a,i,i[Bt],n,i[s+1]=g5(e,t),r,s)}}function c5(n,e){return e>=n.expandoStartIndex}function u5(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Xs()],s=c5(n,t);m5(o,r)&&e===null&&!s&&(e=!1),e=l5(i,o,e,r),o5(i,o,e,t,s,r)}}function l5(n,e,t,r){let i=N8(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Ay(null,n,e,t,r),t=Rl(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Ay(i,n,e,t,r),o===null){let c=d5(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Ay(null,n,e,c[1],r),c=Rl(c,e.attrs,r),f5(n,e,r,c))}else o=h5(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function d5(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Cc(r)!==0)return n[Ks(r)]}function f5(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ks(i)]=r}function h5(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Rl(r,s,t)}return Rl(r,e.attrs,t)}function Ay(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Rl(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Rl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),K4(n,s,t?!0:e[++o]))}return n===void 0?null:n}function p5(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],l=i5(u)?Sb(c,e,t,i,Cc(u),s):void 0;if(!fp(l)){fp(o)||n5(u)&&(o=Sb(c,null,t,i,a,s));let f=dS(Xs(),t);x6(r,s,f,i,o)}}function Sb(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),l=u?c[1]:c,f=l===null,h=t[i+1];h===eo&&(h=f?Er:void 0);let p=f?hy(h,r):l===r?h:void 0;if(u&&!fp(p)&&(p=hy(c,r)),fp(p)&&(a=p,s))return a;let m=n[i+1];i=s?Ks(m):Cc(m)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=hy(c,r))}return a}function fp(n){return n!==void 0}function g5(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=er(X1(n)))),n}function m5(n,e){return(n.flags&(e?8:16))!==0}function te(n,e,t,r){let i=$e(),o=Jt(),s=Un+n,a=i[Bt],c=o.firstCreatePass?VT(s,o,i,e,i_,N1(),t,r):o.data[s],u=v5(o,i,c,a,e,n);i[s]=u;let l=_p(c);return Zs(c,!0),fT(a,u,c),!c_(c)&&Cp()&&Tp(o,i,u,c),(_8()===0||l)&&Tc(u,i),w8(),l&&(Sp(o,i,c),Z1(o,c,i)),r!==null&&r_(i,c),te}function ne(){let n=rr();O1()?P1():(n=n.parent,Zs(n,!1));let e=n;I8(e)&&C8(),E8();let t=Jt();return t.firstCreatePass&&BT(t,e),e.classesWithoutHost!=null&&V8(e)&&bb(t,e,$e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&B8(e)&&bb(t,e,$e(),e.stylesWithoutHost,!1),ne}function ir(n,e,t,r){return te(n,e,t,r),ne(),ir}var v5=(n,e,t,r,i,o)=>(Ap(!0),lT(r,i,k8()));function y5(n,e,t,r,i){let o=e.consts,s=yc(o,r),a=kl(e,n,8,"ng-container",s);s!==null&&r1(a,s,!0);let c=yc(o,i);return N1()&&f_(e,t,a,c,i_),a.mergedAttrs=_c(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function kp(n,e,t){let r=$e(),i=Jt(),o=n+Un,s=i.firstCreatePass?y5(o,i,r,e,t):i.data[o];Zs(s,!0);let a=_5(i,r,s,n);return r[o]=a,Cp()&&Tp(i,r,a,s),Tc(a,r),_p(s)&&(Sp(i,r,s),Z1(i,s,r)),t!=null&&r_(r,s),kp}function Fp(){let n=rr(),e=Jt();return O1()?P1():(n=n.parent,Zs(n,!1)),e.firstCreatePass&&(B1(e,n),S1(n)&&e.queries.elementEnd(n)),Fp}var _5=(n,e,t,r)=>(Ap(!0),WV(e[Bt],""));function to(){return $e()}var Fs=void 0;function w5(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var E5=["en",[["a","p"],["AM","PM"],Fs],[["AM","PM"],Fs,Fs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fs,"{1} 'at' {0}",Fs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",w5],xy={};function Dr(n){let e=I5(n),t=Tb(e);if(t)return t;let r=e.split("-")[0];if(t=Tb(r),t)return t;if(r==="en")return E5;throw new ee(701,!1)}function Tb(n){return n in xy||(xy[n]=Ls.ng&&Ls.ng.common&&Ls.ng.common.locales&&Ls.ng.common.locales[n]),xy[n]}var jt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(jt||{});function I5(n){return n.toLowerCase().replace(/_/g,"-")}var hp="en-US";var C5=hp;function A5(n){typeof n=="string"&&(C5=n.toLowerCase().replace(/_/g,"-"))}function Rb(n,e,t){return function r(i){if(i===Function)return t;let o=Dc(n)?mi(n.index,e):e;d_(o,5);let s=e[tr],a=Mb(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=Mb(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Mb(n,e,t,r){let i=ke(null);try{return pt(6,e,t),t(r)!==!1}catch(o){return x5(n,o),!1}finally{pt(7,e,t),ke(i)}}function x5(n,e){let t=n[mc],r=t?t.get(Zi,null):null;r&&r.handleError(e)}function Nb(n,e,t,r,i,o){let s=e[t],a=e[Re],u=a.data[t].outputs[r],l=s[u],f=a.firstCreatePass?M1(a):null,h=R1(e),p=l.subscribe(o),m=h.length;h.push(o,p),f&&f.push(i,n.index,m,-(m+1))}var D5=(n,e,t)=>{};function je(n,e,t,r){let i=$e(),o=Jt(),s=rr();return QT(o,i,i[Bt],s,n,e,r),je}function b5(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Yh],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function QT(n,e,t,r,i,o,s){let a=_p(r),u=n.firstCreatePass?M1(n):null,l=R1(e),f=!0;if(r.type&3||s){let h=_i(r,e),p=s?s(h):h,m=l.length,y=s?A=>s(gi(A[r.index])):r.index,_=null;if(!s&&a&&(_=b5(n,e,i,r.index)),_!==null){let A=_.__ngLastListenerFn__||_;A.__ngNextListenerFn__=o,_.__ngLastListenerFn__=o,f=!1}else{o=Rb(r,e,o),D5(p,i,o);let A=t.listen(p,i,o);l.push(o,A),u&&u.push(i,y,m,m+1)}}else o=Rb(r,e,o);if(f){let h=r.outputs?.[i],p=r.hostDirectiveOutputs?.[i];if(p&&p.length)for(let m=0;m<p.length;m+=2){let y=p[m],_=p[m+1];Nb(r,e,y,_,i,o)}if(h&&h.length)for(let m of h)Nb(r,e,m,i,i,o)}}function on(n=1){return P8(n)}function S5(n,e){let t=null,r=LV(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?uT(n,o,!0):UV(r,o))return i}return t}function JT(n){let e=$e()[Cr][nr];if(!e.projection){let t=n?n.length:1,r=e.projection=W4(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?S5(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function e2(n,e=0,t,r,i,o){let s=$e(),a=Jt(),c=r?n+1:null;c!==null&&WT(s,a,c,r,i,o,null,t);let u=kl(a,Un+n,16,null,t||null);u.projection===null&&(u.projection=e),P1();let f=!s[xl]||vS();s[Cr][nr].projection[u.projection]===null&&c!==null?T5(s,a,c):f&&!c_(u)&&C6(a,s,u)}function T5(n,e,t){let r=Un+t,i=e.data[r],o=n[r],s=e1(o,i.tView.ssrId),a=yT(n,i,void 0,{dehydratedView:s});PT(o,a,0,Xy(i,s))}function t2(n,e,t){DB(n,e,t)}function Lp(n){let e=$e(),t=Jt(),r=ES();k1(r+1);let i=h_(t,r);if(n.dirty&&p8(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=TB(e,r);n.reset(o,cV),n.notifyOnChanges()}return!0}return!1}function Vp(){return AB($e(),ES())}function R5(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function w_(n){let e=x8();return hS(e,Un+n)}function xe(n,e=""){let t=$e(),r=Jt(),i=n+Un,o=r.firstCreatePass?kl(r,i,1,e,null):r.data[i],s=M5(r,t,o,e,n);t[i]=s,Cp()&&Tp(r,t,s,o),Zs(o,!1)}var M5=(n,e,t,r,i)=>(Ap(!0),$V(e[Bt],r));function Qs(n){return wi("",n,""),Qs}function wi(n,e,t){let r=$e(),i=e5(r,n,e,t);return i!==eo&&n2(r,Xs(),i),wi}function Js(n,e,t,r,i){let o=$e(),s=t5(o,n,e,t,r,i);return s!==eo&&n2(o,Xs(),s),Js}function n2(n,e,t){let r=dS(e,n);GV(n[Bt],r,t)}function Ei(n,e,t){WS(e)&&(e=e());let r=$e(),i=Ip();if(Ho(r,i,e)){let o=Jt(),s=V1();vT(o,s,r,n,e,r[Bt],t,!1)}return Ei}function no(n,e){let t=WS(n);return t&&n.set(e),t}function Ii(n,e){let t=$e(),r=Jt(),i=rr();return QT(r,t,t[Bt],i,n,e),Ii}function N5(n,e,t){let r=Jt();if(r.firstCreatePass){let i=pi(n);m1(t,r.data,r.blueprint,i,!0),m1(e,r.data,r.blueprint,i,!1)}}function m1(n,e,t,r,i){if(n=Vn(n),Array.isArray(n))for(let o=0;o<n.length;o++)m1(n[o],e,t,r,i);else{let o=Jt(),s=$e(),a=rr(),c=gc(n)?n:Vn(n.provide),u=nS(n),l=a.providerIndexes&1048575,f=a.directiveStart,h=a.providerIndexes>>20;if(gc(n)||!n.multi){let p=new Ws(u,i,Ne),m=by(c,e,i?l:l+h,f);m===-1?(By(ip(a,s),o,c),Dy(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(p),s.push(p)):(t[m]=p,s[m]=p)}else{let p=by(c,e,l+h,f),m=by(c,e,l,l+h),y=p>=0&&t[p],_=m>=0&&t[m];if(i&&!_||!i&&!y){By(ip(a,s),o,c);let A=k5(i?P5:O5,t.length,i,r,u);!i&&_&&(t[m].providerFactory=A),Dy(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(A),s.push(A)}else{let A=r2(t[i?m:p],u,!i&&r);Dy(o,n,p>-1?p:m,A)}!i&&r&&_&&t[m].componentProviders++}}}function Dy(n,e,t,r){let i=gc(e),o=n8(e);if(i||o){let c=(o?Vn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(t);l===-1?u.push(t,[r,c]):u[l+1].push(r,c)}else u.push(t,c)}}}function r2(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function by(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function O5(n,e,t,r){return v1(this.multi,[])}function P5(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=bl(t,t[Re],this.providerFactory.index,r);o=a.slice(0,s),v1(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],v1(i,o);return o}function v1(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function k5(n,e,t,r,i){let o=new Ws(n,t,Ne);return o.multi=[],o.index=e,o.componentProviders=0,r2(o,i,r&&!t),o}function Zr(n,e=[]){return t=>{t.providersResolver=(r,i)=>N5(r,i?i(n):n,e)}}function F5(n,e){let t=n[e];return t===eo?void 0:t}function L5(n,e,t,r,i,o){let s=e+t;return Ho(n,s,i)?$B(n,s+1,o?r.call(o,i):r(i)):F5(n,s+1)}function Fl(n,e){let t=Jt(),r,i=n+Un;t.firstCreatePass?(r=V5(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Us(r.type,!0)),s,a=Jn(Ne);try{let c=rp(!1),u=o();return rp(c),R5(t,$e(),i,u),u}finally{Jn(a)}}function V5(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ll(n,e,t){let r=n+Un,i=$e(),o=hS(i,r);return B5(i,r)?L5(i,D8(),e,o.transform,t,o):o.transform(t)}function B5(n,e){return n[Re].data[e].pure}function i2(n,e){return Mp(n,e)}var Ac=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},o2=new Ac("19.2.7"),y1=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},E_=(()=>{class n{compileModuleSync(t){return new f1(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Qb(t),o=aT(i.declarations).reduce((s,a)=>{let c=pc(a);return c&&s.push(new Tl(c)),s},[]);return new y1(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var U5=(()=>{class n{zone=U(Me);changeDetectionScheduler=U(wc);applicationRef=U(yi);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),j5=new X("",{factory:()=>!1});function s2({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Me(ae(W({},c2()),{scheduleInRootZone:t})),[{provide:Me,useFactory:n},{provide:Cl,multi:!0,useFactory:()=>{let r=U(U5,{optional:!0});return()=>r.initialize()}},{provide:Cl,multi:!0,useFactory:()=>{let r=U(z5);return()=>{r.initialize()}}},e===!0?{provide:jS,useValue:!0}:[],{provide:zS,useValue:t??US}]}function a2(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=s2({ngZoneFactory:()=>{let i=c2(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&K1("NgZone_CoalesceEvent"),new Me(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return xn([{provide:j5,useValue:!0},{provide:z1,useValue:!1},r])}function c2(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var z5=(()=>{class n{subscription=new Ct;initialized=!1;zone=U(Me);pendingTasks=U(Ys);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Me.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Me.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var H5=(()=>{class n{appRef=U(yi);taskService=U(Ys);ngZone=U(Me);zonelessEnabled=U(z1);tracing=U(Dp,{optional:!0});disableScheduling=U(jS,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ct;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(sp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(U(zS,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof $y||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?db:HS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(sp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,db(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $5(){return typeof $localize<"u"&&$localize.locale||hp}var Bp=new X("",{providedIn:"root",factory:()=>U(Bp,Te.Optional|Te.SkipSelf)||$5()});var _1=new X(""),G5=new X("");function _l(n){return!n.moduleRef}function W5(n){let e=_l(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Me);return t.run(()=>{_l(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Zi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),_l(n)){let o=()=>e.destroy(),s=n.platformInjector.get(_1);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(_1);s.add(o),n.moduleRef.onDestroy(()=>{$h(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return K5(r,t,()=>{let o=e.get(XT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Bp,hp);if(A5(s||hp),!e.get(G5,!0))return _l(n)?e.get(yi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(_l(n)){let c=e.get(yi);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return q5(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function q5(n,e){let t=n.injector.get(yi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ee(-403,!1);e.push(n)}function K5(n,e,t){try{let r=t();return Wo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Gh=null;function Z5(n=[],e){return At.create({name:e,providers:[{provide:vp,useValue:"platform"},{provide:_1,useValue:new Set([()=>Gh=null])},...n]})}function X5(n=[]){if(Gh)return Gh;let e=Z5(n);return Gh=e,XB(),Y5(e),e}function Y5(n){let e=n.get(W1,null);jn(n,()=>{e?.forEach(t=>t())})}function Vl(){return!1}var ea=(()=>{class n{static __NG_ELEMENT_ID__=Q5}return n})();function Q5(n){return J5(rr(),$e(),(n&16)===16)}function J5(n,e,t){if(Dc(n)&&!t){let r=mi(n.index,e);return new Sl(r,r)}else if(n.type&175){let r=e[Cr];return new Sl(r,e)}return null}var w1=class{constructor(){}supports(e){return GT(e)}create(e){return new E1(e)}},e9=(n,e)=>e,E1=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||e9}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<Ob(r,i,o)?t:r,a=Ob(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let p=h<o.length?o[h]:o[h]=0,m=p+h;l<=m&&m<u&&(o[h]=p+1)}let f=s.previousIndex;o[f]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!GT(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,zB(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new I1(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new pp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new pp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},I1=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},C1=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},pp=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new C1,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Ob(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Pb(){return new I_([new w1])}var I_=(()=>{class n{factories;static \u0275prov=re({token:n,providedIn:"root",factory:Pb});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Pb()),deps:[[n,new H4,new Ut]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ee(901,!1)}}return n})();function u2(n){pt(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=X5(r),o=[s2({}),{provide:wc,useExisting:H5},...t||[]],s=new dp({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return W5({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{pt(9)}}function ta(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function br(n){return Q0(n)}function Nc(n,e){return K0(n,e?.equal)}var kb=class{[wr];constructor(e){this[wr]=e}destroy(){this[wr].destroy()}};var Dn=new X("");var f2=null;function Sr(){return f2}function C_(n){f2??=n}var Bl=class{},A_=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>U(h2),providedIn:"platform"})}return n})();var h2=(()=>{class n extends A_{_location;_history;_doc=U(Dn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Sr().getBaseHref(this._doc)}onPopState(t){let r=Sr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Sr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function p2(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function l2(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function qo(n){return n&&n[0]!=="?"?`?${n}`:n}var Oc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>U(m2),providedIn:"root"})}return n})(),g2=new X(""),m2=(()=>{class n extends Oc{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??U(Dn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p2(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+qo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+qo(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+qo(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(_e(A_),_e(g2,8))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ko=(()=>{class n{_subject=new ht;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=r9(l2(d2(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qo(r))}normalize(t){return n.stripTrailingSlash(n9(this._basePath,d2(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=qo;static joinWithSlash=p2;static stripTrailingSlash=l2;static \u0275fac=function(r){return new(r||n)(_e(Oc))};static \u0275prov=re({token:n,factory:()=>t9(),providedIn:"root"})}return n})();function t9(){return new Ko(_e(Oc))}function n9(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function d2(n){return n.replace(/\/index.html$/,"")}function r9(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var bn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(bn||{}),tt=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(tt||{}),or=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(or||{}),io={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function w2(n){return Dr(n)[jt.LocaleId]}function E2(n,e,t){let r=Dr(n),i=[r[jt.DayPeriodsFormat],r[jt.DayPeriodsStandalone]],o=Tr(i,e);return Tr(o,t)}function I2(n,e,t){let r=Dr(n),i=[r[jt.DaysFormat],r[jt.DaysStandalone]],o=Tr(i,e);return Tr(o,t)}function C2(n,e,t){let r=Dr(n),i=[r[jt.MonthsFormat],r[jt.MonthsStandalone]],o=Tr(i,e);return Tr(o,t)}function A2(n,e){let r=Dr(n)[jt.Eras];return Tr(r,e)}function Ul(n,e){let t=Dr(n);return Tr(t[jt.DateFormat],e)}function jl(n,e){let t=Dr(n);return Tr(t[jt.TimeFormat],e)}function zl(n,e){let r=Dr(n)[jt.DateTimeFormat];return Tr(r,e)}function Hl(n,e){let t=Dr(n),r=t[jt.NumberSymbols][e];if(typeof r>"u"){if(e===io.CurrencyDecimal)return t[jt.NumberSymbols][io.Decimal];if(e===io.CurrencyGroup)return t[jt.NumberSymbols][io.Group]}return r}function x2(n){if(!n[jt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[jt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function D2(n){let e=Dr(n);return x2(e),(e[jt.ExtraData][2]||[]).map(r=>typeof r=="string"?x_(r):[x_(r[0]),x_(r[1])])}function b2(n,e,t){let r=Dr(n);x2(r);let i=[r[jt.ExtraData][0],r[jt.ExtraData][1]],o=Tr(i,e)||[];return Tr(o,t)||[]}function Tr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function x_(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var i9=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Up={},o9=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function S2(n,e,t,r){let i=p9(n);e=ro(t,e)||e;let s=[],a;for(;e;)if(a=o9.exec(e),a){s=s.concat(a.slice(1));let l=s.pop();if(!l)break;e=l}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=R2(r,c),i=h9(i,r));let u="";return s.forEach(l=>{let f=d9(l);u+=f?f(i,t,c):l==="''"?"'":l.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Gp(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ro(n,e){let t=w2(n);if(Up[t]??={},Up[t][e])return Up[t][e];let r="";switch(e){case"shortDate":r=Ul(n,or.Short);break;case"mediumDate":r=Ul(n,or.Medium);break;case"longDate":r=Ul(n,or.Long);break;case"fullDate":r=Ul(n,or.Full);break;case"shortTime":r=jl(n,or.Short);break;case"mediumTime":r=jl(n,or.Medium);break;case"longTime":r=jl(n,or.Long);break;case"fullTime":r=jl(n,or.Full);break;case"short":let i=ro(n,"shortTime"),o=ro(n,"shortDate");r=jp(zl(n,or.Short),[i,o]);break;case"medium":let s=ro(n,"mediumTime"),a=ro(n,"mediumDate");r=jp(zl(n,or.Medium),[s,a]);break;case"long":let c=ro(n,"longTime"),u=ro(n,"longDate");r=jp(zl(n,or.Long),[c,u]);break;case"full":let l=ro(n,"fullTime"),f=ro(n,"fullDate");r=jp(zl(n,or.Full),[l,f]);break}return r&&(Up[t][e]=r),r}function jp(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Xr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function s9(n,e){return Xr(n,3).substring(0,e)}function Wt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=a9(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return s9(a,e);let c=Hl(s,io.MinusSign);return Xr(a,e,c,r,i)}}function a9(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function gt(n,e,t=bn.Format,r=!1){return function(i,o){return c9(i,o,n,e,t,r)}}function c9(n,e,t,r,i,o){switch(t){case 2:return C2(e,i,r)[n.getMonth()];case 1:return I2(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=D2(e),l=b2(e,i,r),f=u.findIndex(h=>{if(Array.isArray(h)){let[p,m]=h,y=s>=p.hours&&a>=p.minutes,_=s<m.hours||s===m.hours&&a<m.minutes;if(p.hours<m.hours){if(y&&_)return!0}else if(y||_)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(f!==-1)return l[f]}return E2(e,i,r)[s<12?0:1];case 3:return A2(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function zp(n){return function(e,t,r){let i=-1*r,o=Hl(t,io.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Xr(s,2,o)+Xr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Xr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Xr(s,2,o)+":"+Xr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Xr(s,2,o)+":"+Xr(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var u9=0,$p=4;function l9(n){let e=Gp(n,u9,1).getDay();return Gp(n,0,1+(e<=$p?$p:$p+7)-e)}function T2(n){let e=n.getDay(),t=e===0?-3:$p-e;return Gp(n.getFullYear(),n.getMonth(),n.getDate()+t)}function D_(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=T2(t),s=l9(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Xr(i,n,Hl(r,io.MinusSign))}}function Hp(n,e=!1){return function(t,r){let o=T2(t).getFullYear();return Xr(o,n,Hl(r,io.MinusSign),e)}}var b_={};function d9(n){if(b_[n])return b_[n];let e;switch(n){case"G":case"GG":case"GGG":e=gt(3,tt.Abbreviated);break;case"GGGG":e=gt(3,tt.Wide);break;case"GGGGG":e=gt(3,tt.Narrow);break;case"y":e=Wt(0,1,0,!1,!0);break;case"yy":e=Wt(0,2,0,!0,!0);break;case"yyy":e=Wt(0,3,0,!1,!0);break;case"yyyy":e=Wt(0,4,0,!1,!0);break;case"Y":e=Hp(1);break;case"YY":e=Hp(2,!0);break;case"YYY":e=Hp(3);break;case"YYYY":e=Hp(4);break;case"M":case"L":e=Wt(1,1,1);break;case"MM":case"LL":e=Wt(1,2,1);break;case"MMM":e=gt(2,tt.Abbreviated);break;case"MMMM":e=gt(2,tt.Wide);break;case"MMMMM":e=gt(2,tt.Narrow);break;case"LLL":e=gt(2,tt.Abbreviated,bn.Standalone);break;case"LLLL":e=gt(2,tt.Wide,bn.Standalone);break;case"LLLLL":e=gt(2,tt.Narrow,bn.Standalone);break;case"w":e=D_(1);break;case"ww":e=D_(2);break;case"W":e=D_(1,!0);break;case"d":e=Wt(2,1);break;case"dd":e=Wt(2,2);break;case"c":case"cc":e=Wt(7,1);break;case"ccc":e=gt(1,tt.Abbreviated,bn.Standalone);break;case"cccc":e=gt(1,tt.Wide,bn.Standalone);break;case"ccccc":e=gt(1,tt.Narrow,bn.Standalone);break;case"cccccc":e=gt(1,tt.Short,bn.Standalone);break;case"E":case"EE":case"EEE":e=gt(1,tt.Abbreviated);break;case"EEEE":e=gt(1,tt.Wide);break;case"EEEEE":e=gt(1,tt.Narrow);break;case"EEEEEE":e=gt(1,tt.Short);break;case"a":case"aa":case"aaa":e=gt(0,tt.Abbreviated);break;case"aaaa":e=gt(0,tt.Wide);break;case"aaaaa":e=gt(0,tt.Narrow);break;case"b":case"bb":case"bbb":e=gt(0,tt.Abbreviated,bn.Standalone,!0);break;case"bbbb":e=gt(0,tt.Wide,bn.Standalone,!0);break;case"bbbbb":e=gt(0,tt.Narrow,bn.Standalone,!0);break;case"B":case"BB":case"BBB":e=gt(0,tt.Abbreviated,bn.Format,!0);break;case"BBBB":e=gt(0,tt.Wide,bn.Format,!0);break;case"BBBBB":e=gt(0,tt.Narrow,bn.Format,!0);break;case"h":e=Wt(3,1,-12);break;case"hh":e=Wt(3,2,-12);break;case"H":e=Wt(3,1);break;case"HH":e=Wt(3,2);break;case"m":e=Wt(4,1);break;case"mm":e=Wt(4,2);break;case"s":e=Wt(5,1);break;case"ss":e=Wt(5,2);break;case"S":e=Wt(6,1);break;case"SS":e=Wt(6,2);break;case"SSS":e=Wt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=zp(0);break;case"ZZZZZ":e=zp(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=zp(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=zp(2);break;default:return null}return b_[n]=e,e}function R2(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function f9(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function h9(n,e,t){let i=n.getTimezoneOffset(),o=R2(e,i);return f9(n,-1*(o-i))}function p9(n){if(v2(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Gp(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(i9))return g9(r)}let e=new Date(n);if(!v2(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function g9(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function v2(n){return n instanceof Date&&!isNaN(n.valueOf())}var Wp=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Zo=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Wp(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),y2(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);y2(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ne(Go),Ne(qs),Ne(I_))};static \u0275dir=Nt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function y2(n,e){n.context.$implicit=e.item}var Yr=(()=>{class n{_viewContainer;_context=new qp;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){_2(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){_2(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ne(Go),Ne(qs))};static \u0275dir=Nt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),qp=class{$implicit=null;ngIf=null};function _2(n,e){if(n&&!n.createEmbeddedView)throw new ee(2020,!1)}function M2(n,e){return new ee(2100,!1)}var S_=class{createSubscription(e,t){return br(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){br(()=>e.unsubscribe())}},T_=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},m9=new T_,v9=new S_,$l=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Wo(t))return m9;if(m_(t))return v9;throw M2(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(Ne(ea,16))};static \u0275pipe=g_({name:"async",type:n,pure:!1})}return n})();var y9="mediumDate",N2=new X(""),O2=new X(""),R_=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??y9,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return S2(t,s,o||this.locale,a)}catch(s){throw M2(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Ne(Bp,16),Ne(N2,24),Ne(O2,24))};static \u0275pipe=g_({name:"date",type:n,pure:!0})}return n})();var sr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=hr({type:n});static \u0275inj=fr({})}return n})();function M_(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Kp="browser",P2="server";function N_(n){return n===Kp}function na(n){return n===P2}var Gl=class{};var Yp=new X(""),F_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(_e(Yp),_e(Me))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Wl=class{_doc;constructor(e){this._doc=e}manager},Zp="ng-app-id";function k2(n){for(let e of n)e.remove()}function F2(n,e){let t=e.createElement("style");return t.textContent=n,t}function _9(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Zp}="${e}"],link[${Zp}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Zp),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function P_(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var L_=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=na(o),_9(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,F2);r?.forEach(i=>this.addUsage(i,this.external,P_))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(k2(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])k2(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,F2(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,P_(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Zp,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(_e(Dn),_e(G1),_e(q1,8),_e(xr))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),O_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},V_=/%COMP%/g;var V2="%COMP%",w9=`_nghost-${V2}`,E9=`_ngcontent-${V2}`,I9=!0,C9=new X("",{providedIn:"root",factory:()=>I9});function A9(n){return E9.replace(V_,n)}function x9(n){return w9.replace(V_,n)}function B2(n,e){return e.map(t=>t.replace(V_,n))}var B_=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=l,this.platformIsServer=na(a),this.defaultRenderer=new ql(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===vi.ShadowDom&&(r=ae(W({},r),{encapsulation:vi.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Xp?i.applyToHost(t):i instanceof Kl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,f=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case vi.Emulated:o=new Xp(c,u,r,this.appId,l,s,a,f,h);break;case vi.ShadowDom:return new k_(c,u,t,r,s,a,this.nonce,f,h);default:o=new Kl(c,u,r,l,s,a,f,h);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(_e(F_),_e(L_),_e(G1),_e(C9),_e(Dn),_e(xr),_e(Me),_e(q1),_e(Dp,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),ql=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(O_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(L2(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(L2(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=O_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=O_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Xi.DashCase|Xi.Important)?e.style.setProperty(t,r,i&Xi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Xi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Sr().getGlobalEventTarget(this.doc,e),!e))throw new ee(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function L2(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var k_=class extends ql{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=i.styles;l=B2(i.id,l);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}let f=i.getExternalStyles?.();if(f)for(let h of f){let p=P_(h,o);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Kl=class extends ql{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?B2(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Xp=class extends Kl{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,u,l),this.contentAttr=A9(l),this.hostAttr=x9(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Qp=class n extends Bl{supportsDOMEvents=!0;static makeCurrent(){C_(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=D9();return t==null?null:b9(t)}resetBaseElement(){Zl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return M_(document.cookie,e)}},Zl=null;function D9(){return Zl=Zl||document.querySelector("base"),Zl?Zl.getAttribute("href"):null}function b9(n){return new URL(n,document.baseURI).pathname}var S9=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),j2=(()=>{class n extends Wl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(_e(Dn))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),U2=["alt","control","meta","shift"],T9={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},R9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},z2=(()=>{class n extends Wl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),U2.forEach(u=>{let l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=T9[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),U2.forEach(s=>{if(s!==i){let a=R9[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(_e(Dn))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function U_(n,e){return u2(W({rootComponent:n},M9(e)))}function M9(n){return{appProviders:[...F9,...n?.providers??[]],platformProviders:k9}}function N9(){Qp.makeCurrent()}function O9(){return new Zi}function P9(){return JS(document),document}var k9=[{provide:xr,useValue:Kp},{provide:W1,useValue:N9,multi:!0},{provide:Dn,useFactory:P9}];var F9=[{provide:vp,useValue:"root"},{provide:Zi,useFactory:O9},{provide:Yp,useClass:j2,multi:!0,deps:[Dn]},{provide:Yp,useClass:z2,multi:!0,deps:[Dn]},B_,L_,F_,{provide:Ec,useExisting:B_},{provide:Gl,useClass:S9},[]];var H2=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(_e(Dn))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ae="primary",ud=Symbol("RouteTitle"),G_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function sa(n){return new G_(n)}function Y2(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function V9(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ci(n[t],e[t]))return!1;return!0}function Ci(n,e){let t=n?W_(n):void 0,r=e?W_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Q2(n[i],e[i]))return!1;return!0}function W_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Q2(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function J2(n){return n.length>0?n[n.length-1]:null}function Qo(n){return dy(n)?n:Wo(n)?_t(Promise.resolve(n)):he(n)}var B9={exact:tR,subset:nR},eR={exact:U9,subset:j9,ignored:()=>!0};function $2(n,e,t){return B9[t.paths](n.root,e.root,t.matrixParams)&&eR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function U9(n,e){return Ci(n,e)}function tR(n,e,t){if(!ia(n.segments,e.segments)||!tg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!tR(n.children[r],e.children[r],t))return!1;return!0}function j9(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Q2(n[t],e[t]))}function nR(n,e,t){return rR(n,e,e.segments,t)}function rR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ia(i,t)||e.hasChildren()||!tg(i,t,r))}else if(n.segments.length===t.length){if(!ia(n.segments,t)||!tg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!nR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ia(n.segments,i)||!tg(n.segments,i,r)||!n.children[Ae]?!1:rR(n.children[Ae],e,o,r)}}function tg(n,e,t){return e.every((r,i)=>eR[t](n[i].parameters,r.parameters))}var xi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ke([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=sa(this.queryParams),this._queryParamMap}toString(){return $9.serialize(this)}},Ke=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ng(this)}},Xo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=sa(this.parameters),this._parameterMap}toString(){return oR(this)}};function z9(n,e){return ia(n,e)&&n.every((t,r)=>Ci(t.parameters,e[r].parameters))}function ia(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function H9(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ae&&(t=t.concat(e(i,r)))}),t}var ld=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new aa,providedIn:"root"})}return n})(),aa=class{parse(e){let t=new K_(e);return new xi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Xl(e.root,!0)}`,r=q9(e.queryParams),i=typeof e.fragment=="string"?`#${G9(e.fragment)}`:"";return`${t}${r}${i}`}},$9=new aa;function ng(n){return n.segments.map(e=>oR(e)).join("/")}function Xl(n,e){if(!n.hasChildren())return ng(n);if(e){let t=n.children[Ae]?Xl(n.children[Ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Ae&&r.push(`${i}:${Xl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=H9(n,(r,i)=>i===Ae?[Xl(n.children[Ae],!1)]:[`${i}:${Xl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ae]!=null?`${ng(n)}/${t[0]}`:`${ng(n)}/(${t.join("//")})`}}function iR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jp(n){return iR(n).replace(/%3B/gi,";")}function G9(n){return encodeURI(n)}function q_(n){return iR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rg(n){return decodeURIComponent(n)}function G2(n){return rg(n.replace(/\+/g,"%20"))}function oR(n){return`${q_(n.path)}${W9(n.parameters)}`}function W9(n){return Object.entries(n).map(([e,t])=>`;${q_(e)}=${q_(t)}`).join("")}function q9(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Jp(t)}=${Jp(i)}`).join("&"):`${Jp(t)}=${Jp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var K9=/^[^\/()?;#]+/;function j_(n){let e=n.match(K9);return e?e[0]:""}var Z9=/^[^\/()?;=#]+/;function X9(n){let e=n.match(Z9);return e?e[0]:""}var Y9=/^[^=?&#]+/;function Q9(n){let e=n.match(Y9);return e?e[0]:""}var J9=/^[^&#]+/;function e7(n){let e=n.match(J9);return e?e[0]:""}var K_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ke([],{}):new Ke([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ae]=new Ke(e,t)),r}parseSegment(){let e=j_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new Xo(rg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=X9(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=j_(this.remaining);i&&(r=i,this.capture(r))}e[rg(t)]=rg(r)}parseQueryParam(e){let t=Q9(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=e7(this.remaining);s&&(r=s,this.capture(r))}let i=G2(t),o=G2(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=j_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ee(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ae);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Ae]:new Ke([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function sR(n){return n.segments.length>0?new Ke([],{[Ae]:n}):n}function aR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=aR(i);if(r===Ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ke(n.segments,e);return t7(t)}function t7(n){if(n.numberOfChildren===1&&n.children[Ae]){let e=n.children[Ae];return new Ke(n.segments.concat(e.segments),e.children)}return n}function Yo(n){return n instanceof xi}function cR(n,e,t=null,r=null){let i=uR(n);return lR(i,e,t,r)}function uR(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new Ke(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=sR(r);return e??i}function lR(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return z_(i,i,i,t,r);let o=n7(e);if(o.toRoot())return z_(i,i,new Ke([],{}),t,r);let s=r7(o,i,n),a=s.processChildren?Ql(s.segmentGroup,s.index,o.commands):fR(s.segmentGroup,s.index,o.commands);return z_(i,s.segmentGroup,a,t,r)}function og(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ed(n){return typeof n=="object"&&n!=null&&n.outlets}function z_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let s;n===e?s=t:s=dR(n,e,t);let a=sR(aR(s));return new xi(a,o,i)}function dR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=dR(o,e,t)}),new Ke(n.segments,r)}var sg=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&og(r[0]))throw new ee(4003,!1);let i=r.find(ed);if(i&&i!==J2(r))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function n7(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new sg(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new sg(t,e,r)}var Fc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function r7(n,e,t){if(n.isAbsolute)return new Fc(e,!0,0);if(!t)return new Fc(e,!1,NaN);if(t.parent===null)return new Fc(t,!0,0);let r=og(n.commands[0])?0:1,i=t.segments.length-1+r;return i7(t,i,n.numberOfDoubleDots)}function i7(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ee(4005,!1);i=r.segments.length}return new Fc(r,!1,i-o)}function o7(n){return ed(n[0])?n[0].outlets:{[Ae]:n}}function fR(n,e,t){if(n??=new Ke([],{}),n.segments.length===0&&n.hasChildren())return Ql(n,e,t);let r=s7(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ke(n.segments.slice(0,r.pathIndex),{});return o.children[Ae]=new Ke(n.segments.slice(r.pathIndex),n.children),Ql(o,0,i)}else return r.match&&i.length===0?new Ke(n.segments,{}):r.match&&!n.hasChildren()?Z_(n,e,t):r.match?Ql(n,0,i):Z_(n,e,t)}function Ql(n,e,t){if(t.length===0)return new Ke(n.segments,{});{let r=o7(t),i={};if(Object.keys(r).some(o=>o!==Ae)&&n.children[Ae]&&n.numberOfChildren===1&&n.children[Ae].segments.length===0){let o=Ql(n.children[Ae],e,t);return new Ke(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=fR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ke(n.segments,i)}}function s7(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(ed(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!q2(c,u,s))return o;r+=2}else{if(!q2(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Z_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(ed(o)){let c=a7(o.outlets);return new Ke(r,c)}if(i===0&&og(t[0])){let c=n.segments[e];r.push(new Xo(c.path,W2(t[0]))),i++;continue}let s=ed(o)?o.outlets[Ae]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&og(a)?(r.push(new Xo(s,W2(a))),i+=2):(r.push(new Xo(s,{})),i++)}return new Ke(r,{})}function a7(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Z_(new Ke([],{}),0,r))}),e}function W2(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function q2(n,e,t){return n==t.path&&Ci(e,t.parameters)}var ig="imperative",sn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(sn||{}),gr=class{id;url;constructor(e,t){this.id=e,this.url=t}},ca=class extends gr{type=sn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Di=class extends gr{urlAfterRedirects;type=sn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ar=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ar||{}),td=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(td||{}),Ai=class extends gr{reason;code;type=sn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},oo=class extends gr{reason;code;type=sn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Vc=class extends gr{error;target;type=sn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},nd=class extends gr{urlAfterRedirects;state;type=sn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ag=class extends gr{urlAfterRedirects;state;type=sn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cg=class extends gr{urlAfterRedirects;state;shouldActivate;type=sn.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ug=class extends gr{urlAfterRedirects;state;type=sn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lg=class extends gr{urlAfterRedirects;state;type=sn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dg=class{route;type=sn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},fg=class{route;type=sn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},hg=class{snapshot;type=sn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pg=class{snapshot;type=sn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gg=class{snapshot;type=sn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mg=class{snapshot;type=sn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var rd=class{},Bc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function c7(n,e){return n.providers&&!n._injector&&(n._injector=Op(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Qr(n){return n.outlet||Ae}function u7(n,e){let t=n.filter(r=>Qr(r)===e);return t.push(...n.filter(r=>Qr(r)!==e)),t}function dd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var vg=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return dd(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new zc(this.rootInjector)}},zc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new vg(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(_e(Bn))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yg=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=X_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=X_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Y_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Y_(e,this._root).map(t=>t.value)}};function X_(n,e){if(n===e.value)return e;for(let t of e.children){let r=X_(n,t);if(r)return r}return null}function Y_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Y_(n,t);if(r.length)return r.unshift(e),r}return[]}var pr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function kc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var id=class extends yg{snapshot;constructor(e,t){super(e),this.snapshot=t,ow(this,e)}toString(){return this.snapshot.toString()}};function hR(n){let e=l7(n),t=new Lt([new Xo("",{})]),r=new Lt({}),i=new Lt({}),o=new Lt({}),s=new Lt(""),a=new Jr(t,r,o,s,i,Ae,n,e.root);return a.snapshot=e.root,new id(new pr(a,[]),e)}function l7(n){let e={},t={},r={},i="",o=new oa([],e,r,i,t,Ae,n,null,{});return new od("",new pr(o,[]))}var Jr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(se(u=>u[ud]))??he(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>sa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>sa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _g(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:W(W({},e.params),n.params),data:W(W({},e.data),n.data),resolve:W(W(W(W({},n.data),e.data),i?.data),n._resolvedData)}:r={params:W({},n.params),data:W({},n.data),resolve:W(W({},n.data),n._resolvedData??{})},i&&gR(i)&&(r.resolve[ud]=i.title),r}var oa=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ud]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=sa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=sa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},od=class extends yg{url;constructor(e,t){super(t),this.url=e,ow(this,t)}toString(){return pR(this._root)}};function ow(n,e){e.value._routerState=n,e.children.forEach(t=>ow(n,t))}function pR(n){let e=n.children.length>0?` { ${n.children.map(pR).join(", ")} } `:"";return`${n.value}${e}`}function H_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ci(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ci(e.params,t.params)||n.paramsSubject.next(t.params),V9(e.url,t.url)||n.urlSubject.next(t.url),Ci(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Q_(n,e){let t=Ci(n.params,e.params)&&z9(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Q_(n.parent,e.parent))}function gR(n){return typeof n.title=="string"||n.title===null}var mR=new X(""),fd=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ae;activateEvents=new Ce;deactivateEvents=new Ce;attachEvents=new Ce;detachEvents=new Ce;routerOutletData=GS(void 0);parentContexts=U(zc);location=U(Go);changeDetector=U(ea);inputBinder=U(Cg,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new J_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Nt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Gr]})}return n})(),J_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Jr?this.route:e===zc?this.childContexts:e===mR?this.outletData:this.parent.get(e,t)}},Cg=new X("");function d7(n,e,t){let r=sd(n,e._root,t?t._root:void 0);return new id(r,e)}function sd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=f7(n,e,t);return new pr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>sd(n,a)),s}}let r=h7(e.value),i=e.children.map(o=>sd(n,o));return new pr(r,i)}}function f7(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return sd(n,r,i);return sd(n,r)})}function h7(n){return new Jr(new Lt(n.url),new Lt(n.params),new Lt(n.queryParams),new Lt(n.fragment),new Lt(n.data),n.outlet,n.component,n)}var Uc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},vR="ngNavigationCancelingError";function wg(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Yo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=yR(!1,ar.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function yR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[vR]=!0,t.cancellationCode=e,t}function p7(n){return _R(n)&&Yo(n.url)}function _R(n){return!!n&&n[vR]}var g7=(n,e,t,r)=>se(i=>(new ew(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),ew=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),H_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=kc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=kc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=kc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=kc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new mg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new pg(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(H_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),H_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Eg=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Lc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function m7(n,e,t){let r=n._root,i=e?e._root:null;return Yl(r,i,t,[r.value])}function v7(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Hc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!jb(n)?n:e.get(n):r}function Yl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=kc(e);return n.children.forEach(s=>{y7(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Jl(a,t.getContext(s),i)),i}function y7(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=_7(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Eg(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Yl(n,e,a?a.children:null,r,i):Yl(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Lc(a.outlet.component,s))}else s&&Jl(e,a,i),i.canActivateChecks.push(new Eg(r)),o.component?Yl(n,null,a?a.children:null,r,i):Yl(n,null,t,r,i);return i}function _7(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ia(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ia(n.url,e.url)||!Ci(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Q_(n,e)||!Ci(n.queryParams,e.queryParams);case"paramsChange":default:return!Q_(n,e)}}function Jl(n,e,t){let r=kc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Jl(s,e.children.getContext(o),t):Jl(s,null,t):Jl(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Lc(e.outlet.component,i)):t.canDeactivateChecks.push(new Lc(null,i)):t.canDeactivateChecks.push(new Lc(null,i))}function hd(n){return typeof n=="function"}function w7(n){return typeof n=="boolean"}function E7(n){return n&&hd(n.canLoad)}function I7(n){return n&&hd(n.canActivate)}function C7(n){return n&&hd(n.canActivateChild)}function A7(n){return n&&hd(n.canDeactivate)}function x7(n){return n&&hd(n.canMatch)}function wR(n){return n instanceof Gi||n?.name==="EmptyError"}var eg=Symbol("INITIAL_VALUE");function jc(){return Gt(n=>ml(n.map(e=>e.pipe(Vt(1),kh(eg)))).pipe(se(e=>{for(let t of e)if(t!==!0){if(t===eg)return eg;if(t===!1||D7(t))return t}return!0}),Ln(e=>e!==eg),Vt(1)))}function D7(n){return Yo(n)||n instanceof Uc}function b7(n,e){return Qt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?he(ae(W({},t),{guardsResult:!0})):S7(s,r,i,n).pipe(Qt(a=>a&&w7(a)?T7(r,o,n,e):he(a)),se(a=>ae(W({},t),{guardsResult:a})))})}function S7(n,e,t,r){return _t(n).pipe(Qt(i=>P7(i.component,i.route,t,e,r)),Wi(i=>i!==!0,!0))}function T7(n,e,t,r){return _t(e).pipe(ac(i=>sc(M7(i.route.parent,r),R7(i.route,r),O7(n,i.path,t),N7(n,i.route,t))),Wi(i=>i!==!0,!0))}function R7(n,e){return n!==null&&e&&e(new gg(n)),he(!0)}function M7(n,e){return n!==null&&e&&e(new hg(n)),he(!0)}function N7(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return he(!0);let i=r.map(o=>Mh(()=>{let s=dd(e)??t,a=Hc(o,s),c=I7(a)?a.canActivate(e,n):jn(s,()=>a(e,n));return Qo(c).pipe(Wi())}));return he(i).pipe(jc())}function O7(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>v7(s)).filter(s=>s!==null).map(s=>Mh(()=>{let a=s.guards.map(c=>{let u=dd(s.node)??t,l=Hc(c,u),f=C7(l)?l.canActivateChild(r,n):jn(u,()=>l(r,n));return Qo(f).pipe(Wi())});return he(a).pipe(jc())}));return he(o).pipe(jc())}function P7(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return he(!0);let s=o.map(a=>{let c=dd(e)??i,u=Hc(a,c),l=A7(u)?u.canDeactivate(n,e,t,r):jn(c,()=>u(n,e,t,r));return Qo(l).pipe(Wi())});return he(s).pipe(jc())}function k7(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return he(!0);let o=i.map(s=>{let a=Hc(s,n),c=E7(a)?a.canLoad(e,t):jn(n,()=>a(e,t));return Qo(c)});return he(o).pipe(jc(),ER(r))}function ER(n){return fh(pn(e=>{if(typeof e!="boolean")throw wg(n,e)}),se(e=>e===!0))}function F7(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return he(!0);let o=i.map(s=>{let a=Hc(s,n),c=x7(a)?a.canMatch(e,t):jn(n,()=>a(e,t));return Qo(c)});return he(o).pipe(jc(),ER(r))}var ad=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},cd=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Pc(n){return ic(new ad(n))}function L7(n){return ic(new ee(4e3,!1))}function V7(n){return ic(yR(!1,ar.GuardRejected))}var tw=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return he(r);if(i.numberOfChildren>1||!i.children[Ae])return L7(`${e.redirectTo}`);i=i.children[Ae]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:l,url:f,outlet:h,params:p,data:m,title:y}=i,_=jn(o,()=>a({params:p,data:m,queryParams:c,fragment:u,routeConfig:l,url:f,outlet:h,title:y}));if(_ instanceof xi)throw new cd(_);t=_}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new cd(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new xi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ke(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ee(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},nw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B7(n,e,t,r,i){let o=IR(n,e,t);return o.matched?(r=c7(e,r),F7(r,e,t,i).pipe(se(s=>s===!0?o:W({},nw)))):he(o)}function IR(n,e,t){if(e.path==="**")return U7(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?W({},nw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Y2)(t,n,e);if(!i)return W({},nw);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?W(W({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function U7(n){return{matched:!0,parameters:n.length>0?J2(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function K2(n,e,t,r){return t.length>0&&H7(n,t,r)?{segmentGroup:new Ke(e,z7(r,new Ke(t,n.children))),slicedSegments:[]}:t.length===0&&$7(n,t,r)?{segmentGroup:new Ke(n.segments,j7(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ke(n.segments,n.children),slicedSegments:t}}function j7(n,e,t,r){let i={};for(let o of t)if(Ag(n,e,o)&&!r[Qr(o)]){let s=new Ke([],{});i[Qr(o)]=s}return W(W({},r),i)}function z7(n,e){let t={};t[Ae]=e;for(let r of n)if(r.path===""&&Qr(r)!==Ae){let i=new Ke([],{});t[Qr(r)]=i}return t}function H7(n,e,t){return t.some(r=>Ag(n,e,r)&&Qr(r)!==Ae)}function $7(n,e,t){return t.some(r=>Ag(n,e,r))}function Ag(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function G7(n,e,t){return e.length===0&&!n.children[t]}var rw=class{};function W7(n,e,t,r,i,o,s="emptyOnly"){return new iw(n,e,t,r,i,s,o).recognize()}var q7=31,iw=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new tw(this.urlSerializer,this.urlTree)}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=K2(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(({children:t,rootSnapshot:r})=>{let i=new pr(r,t),o=new od("",i),s=cR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new oa([],Object.freeze({}),Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ae,t).pipe(se(r=>({children:r,rootSnapshot:t})),fi(r=>{if(r instanceof cd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ad?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(se(s=>s instanceof pr?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return _t(o).pipe(ac(s=>{let a=r.children[s],c=u7(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Ph((s,a)=>(s.push(...a),s)),Uo(null),fy(),Qt(s=>{if(s===null)return Pc(r);let a=CR(s);return K7(a),he(a)}))}processSegment(e,t,r,i,o,s,a){return _t(t).pipe(ac(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(fi(u=>{if(u instanceof ad)return he(null);throw u}))),Wi(c=>!!c),fi(c=>{if(wR(c))return G7(r,i,o)?he(new rw):Pc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Qr(r)!==s&&(s===Ae||!Ag(i,o,r))?Pc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Pc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:l,positionalParamSegments:f,remainingSegments:h}=IR(t,i,o);if(!c)return Pc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>q7&&(this.allowRedirects=!1));let p=new oa(o,u,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,Z2(i),Qr(i),i.component??i._loadedComponent??null,i,X2(i)),m=_g(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let y=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,f,p,e);return this.applyRedirects.lineralizeSegments(i,y).pipe(Qt(_=>this.processSegment(e,r,t,_.concat(h),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=B7(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Gt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Gt(({routes:u})=>{let l=r._loadedInjector??e,{parameters:f,consumedSegments:h,remainingSegments:p}=c,m=new oa(h,f,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,Z2(r),Qr(r),r.component??r._loadedComponent??null,r,X2(r)),y=_g(m,s,this.paramsInheritanceStrategy);m.params=Object.freeze(y.params),m.data=Object.freeze(y.data);let{segmentGroup:_,slicedSegments:A}=K2(t,h,p,u);if(A.length===0&&_.hasChildren())return this.processChildren(l,u,_,m).pipe(se(R=>new pr(m,R)));if(u.length===0&&A.length===0)return he(new pr(m,[]));let b=Qr(r)===o;return this.processSegment(l,u,_,A,b?Ae:o,!0,m).pipe(se(R=>new pr(m,R instanceof pr?[R]:[])))}))):Pc(t)))}getChildConfig(e,t,r){return t.children?he({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?he({routes:t._loadedRoutes,injector:t._loadedInjector}):k7(e,t,r,this.urlSerializer).pipe(Qt(i=>i?this.configLoader.loadChildren(e,t).pipe(pn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):V7(t))):he({routes:[],injector:e})}};function K7(n){n.sort((e,t)=>e.value.outlet===Ae?-1:t.value.outlet===Ae?1:e.value.outlet.localeCompare(t.value.outlet))}function Z7(n){let e=n.value.routeConfig;return e&&e.path===""}function CR(n){let e=[],t=new Set;for(let r of n){if(!Z7(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=CR(r.children);e.push(new pr(r.value,i))}return e.filter(r=>!t.has(r))}function Z2(n){return n.data||{}}function X2(n){return n.resolve||{}}function X7(n,e,t,r,i,o){return Qt(s=>W7(n,e,t,r,s.extractedUrl,i,o).pipe(se(({state:a,tree:c})=>ae(W({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Y7(n,e){return Qt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return he(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of AR(c))s.add(u);let a=0;return _t(s).pipe(ac(c=>o.has(c)?Q7(c,r,n,e):(c.data=_g(c,c.parent,n).resolve,he(void 0))),pn(()=>a++),cc(1),Qt(c=>a===s.size?he(t):Yn))})}function AR(n){let e=n.children.map(t=>AR(t)).flat();return[n,...e]}function Q7(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!gR(i)&&(o[ud]=i.title),J7(o,n,e,r).pipe(se(s=>(n._resolvedData=s,n.data=_g(n,n.parent,t).resolve,null)))}function J7(n,e,t,r){let i=W_(n);if(i.length===0)return he({});let o={};return _t(i).pipe(Qt(s=>eU(n[s],e,t,r).pipe(Wi(),pn(a=>{if(a instanceof Uc)throw wg(new aa,a);o[s]=a}))),cc(1),se(()=>o),fi(s=>wR(s)?Yn:ic(s)))}function eU(n,e,t,r){let i=dd(e)??r,o=Hc(n,i),s=o.resolve?o.resolve(e,t):jn(i,()=>o(e,t));return Qo(s)}function $_(n){return Gt(e=>{let t=n(e);return t?_t(t).pipe(se(()=>e)):he(e)})}var sw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ae);return r}getResolvedTitleForRoute(t){return t.data[ud]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>U(xR),providedIn:"root"})}return n})(),xR=(()=>{class n extends sw{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(_e(H2))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pd=new X("",{providedIn:"root",factory:()=>({})}),aw=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Et({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ir(0,"router-outlet")},dependencies:[fd],encapsulation:2})}return n})();function cw(n){let e=n.children&&n.children.map(cw),t=e?ae(W({},n),{children:e}):W({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ae&&(t.component=aw),t}var gd=new X(""),DR=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=U(E_);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return he(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Qo(t.loadComponent()).pipe(se(SR),pn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),yl(()=>{this.componentLoaders.delete(t)})),i=new ec(r,()=>new ht).pipe(Ja());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return he({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=bR(r,this.compiler,t,this.onLoadEndListener).pipe(yl(()=>{this.childrenLoaders.delete(r)})),s=new ec(o,()=>new ht).pipe(Ja());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bR(n,e,t,r){return Qo(n.loadChildren()).pipe(se(SR),Qt(i=>i instanceof p_||Array.isArray(i)?he(i):_t(e.compileModuleAsync(i))),se(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(gd,[],{optional:!0,self:!0}).flat()),{routes:s.map(cw),injector:o}}))}function tU(n){return n&&typeof n=="object"&&"default"in n}function SR(n){return tU(n)?n.default:n}var xg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>U(nU),providedIn:"root"})}return n})(),nU=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TR=new X("");var RR=new X(""),MR=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ht;transitionAbortSubject=new ht;configLoader=U(DR);environmentInjector=U(Bn);destroyRef=U(Pl);urlSerializer=U(ld);rootContexts=U(zc);location=U(Ko);inputBindingEnabled=U(Cg,{optional:!0})!==null;titleStrategy=U(sw);options=U(pd,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=U(xg);createViewTransition=U(TR,{optional:!0});navigationErrorHandler=U(RR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>he(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new dg(i)),r=i=>this.events.next(new fg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ae(W({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Lt(null),this.transitions.pipe(Ln(r=>r!==null),Gt(r=>{let i=!1,o=!1;return he(r).pipe(Gt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ar.SupersededByNewNavigation),Yn;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ae(W({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let u="";return this.events.next(new oo(s.id,this.urlSerializer.serialize(s.rawUrl),u,td.IgnoredSameUrlNavigation)),s.resolve(!1),Yn}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return he(s).pipe(Gt(u=>(this.events.next(new ca(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Yn:Promise.resolve(u))),X7(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),pn(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=ae(W({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new nd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:l,source:f,restoredState:h,extras:p}=s,m=new ca(u,this.urlSerializer.serialize(l),f,h);this.events.next(m);let y=hR(this.rootComponentType).snapshot;return this.currentTransition=r=ae(W({},s),{targetSnapshot:y,urlAfterRedirects:l,extras:ae(W({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,he(r)}else{let u="";return this.events.next(new oo(s.id,this.urlSerializer.serialize(s.extractedUrl),u,td.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Yn}}),pn(s=>{let a=new ag(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),se(s=>(this.currentTransition=r=ae(W({},s),{guards:m7(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),b7(this.environmentInjector,s=>this.events.next(s)),pn(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw wg(this.urlSerializer,s.guardsResult);let a=new cg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Ln(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",ar.GuardRejected),!1)),$_(s=>{if(s.guards.canActivateChecks.length!==0)return he(s).pipe(pn(a=>{let c=new ug(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Gt(a=>{let c=!1;return he(a).pipe(Y7(this.paramsInheritanceStrategy,this.environmentInjector),pn({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",ar.NoDataFromResolver)}}))}),pn(a=>{let c=new lg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),$_(s=>{let a=c=>{let u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(pn(l=>{c.component=l}),se(()=>{})));for(let l of c.children)u.push(...a(l));return u};return ml(a(s.targetSnapshot.root)).pipe(Uo(null),Vt(1))}),$_(()=>this.afterPreactivation()),Gt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?_t(c).pipe(se(()=>r)):he(r)}),se(s=>{let a=d7(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ae(W({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),pn(()=>{this.events.next(new rd)}),g7(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Vt(1),pn({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Di(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Fh(this.transitionAbortSubject.pipe(pn(s=>{throw s}))),yl(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",ar.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),fi(s=>{if(this.destroyed)return r.resolve(!1),Yn;if(o=!0,_R(s))this.events.next(new Ai(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),p7(s)?this.events.next(new Bc(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Vc(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=jn(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Uc){let{message:u,cancellationCode:l}=wg(this.urlSerializer,c);this.events.next(new Ai(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Bc(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Yn}))}))}cancelNavigationTransition(t,r,i){let o=new Ai(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rU(n){return n!==ig}var NR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>U(iU),providedIn:"root"})}return n})(),Ig=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},iU=(()=>{class n extends Ig{static \u0275fac=(()=>{let t;return function(i){return(t||(t=$o(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OR=(()=>{class n{urlSerializer=U(ld);options=U(pd,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=U(Ko);urlHandlingStrategy=U(xg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new xi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof xi?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=hR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>U(oU),providedIn:"root"})}return n})(),oU=(()=>{class n extends OR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ca?this.updateStateMemento():t instanceof oo?this.commitTransition(r):t instanceof nd?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof rd?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ai&&(t.code===ar.GuardRejected||t.code===ar.NoDataFromResolver)?this.restoreHistory(r):t instanceof Vc?this.restoreHistory(r,!0):t instanceof Di&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=W(W({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=W(W({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=$o(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uw(n,e){n.events.pipe(Ln(t=>t instanceof Di||t instanceof Ai||t instanceof Vc||t instanceof oo),se(t=>t instanceof Di||t instanceof oo?0:(t instanceof Ai?t.code===ar.Redirect||t.code===ar.SupersededByNewNavigation:!1)?2:1),Ln(t=>t!==2),Vt(1)).subscribe(()=>{e()})}var sU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},mr=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=U(qT);stateManager=U(OR);options=U(pd,{optional:!0})||{};pendingTasks=U(Ys);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=U(MR);urlSerializer=U(ld);location=U(Ko);urlHandlingStrategy=U(xg);_events=new ht;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=U(NR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=U(gd,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!U(Cg,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ct;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ai&&r.code!==ar.Redirect&&r.code!==ar.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Di)this.navigated=!0;else if(r instanceof Bc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=W({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||rU(i.source)},s);this.scheduleNavigation(a,ig,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}uU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ig,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=W({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(cw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,l=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":l=W(W({},this.currentUrlTree.queryParams),o);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=o||null}l!==null&&(l=this.removeEmptyProps(l));let f;try{let h=i?i.snapshot:this.routerState.snapshot.root;f=uR(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return lR(f,t,l,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Yo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ig,null,r)}navigate(t,r={skipLocationChange:!1}){return cU(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=W({},sU):r===!1?i=W({},aU):i=r,Yo(t))return $2(this.currentUrlTree,t,i);let o=this.parseUrl(t);return $2(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,h)=>{a=f,c=h});let l=this.pendingTasks.add();return uw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cU(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ee(4008,!1)}function uU(n){return!(n instanceof rd)&&!(n instanceof Bc)}var Dg=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ht;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Di&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Yo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:oT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Yo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Ne(mr),Ne(Jr),j1("tabindex"),Ne(Rc),Ne(Ar),Ne(Oc))};static \u0275dir=Nt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&je("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Mc("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ta],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ta],replaceUrl:[2,"replaceUrl","replaceUrl",ta],routerLink:"routerLink"},features:[Gr]})}return n})();var fU=new X("");function lw(n,...e){return xn([{provide:gd,multi:!0,useValue:n},[],{provide:Jr,useFactory:hU,deps:[mr]},{provide:y_,multi:!0,useFactory:pU},e.map(t=>t.\u0275providers)])}function hU(n){return n.routerState.root}function pU(){let n=U(At);return e=>{let t=n.get(yi);if(e!==t.components[0])return;let r=n.get(mr),i=n.get(gU);n.get(mU)===1&&r.initialNavigation(),n.get(vU,null,Te.Optional)?.setUpPreloading(),n.get(fU,null,Te.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var gU=new X("",{factory:()=>new ht}),mU=new X("",{providedIn:"root",factory:()=>1});var vU=new X("");var PR=()=>{};var FR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},yU=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},bg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,l=o>>2,f=(o&3)<<4|a>>4,h=(a&15)<<2|u>>6,p=u&63;c||(p=64,s||(h=64)),r.push(t[l],t[f],t[h],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(FR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):yU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||f==null)throw new fw;let h=o<<2|a>>4;if(r.push(h),u!==64){let p=a<<4&240|u>>2;if(r.push(p),f!==64){let m=u<<6&192|f;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},fw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},_U=function(n){let e=FR(n);return bg.encodeByteArray(e,!0)},md=function(n){return _U(n).replace(/\./g,"")},Sg=function(n){try{return bg.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function LR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var wU=()=>LR().__FIREBASE_DEFAULTS__,EU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},IU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Sg(n[1]);return e&&JSON.parse(e)},Tg=()=>{try{return PR()||wU()||EU()||IU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pw=n=>{var e,t;return(t=(e=Tg())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Rg=n=>{let e=pw(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gw=()=>{var n;return(n=Tg())===null||n===void 0?void 0:n.config},mw=n=>{var e;return(e=Tg())===null||e===void 0?void 0:e[`_${n}`]};var ua=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function VR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[md(JSON.stringify(t)),md(JSON.stringify(s)),""].join(".")}function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function CU(){var n;let e=(n=Tg())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function zR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HR(){let n=an();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function $R(){return!CU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function la(){try{return typeof indexedDB=="object"}catch{return!1}}function Mg(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function GR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var AU="FirebaseError",Sn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=AU,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zn.prototype.create)}},zn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?xU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Sn(i,a,r)}};function xU(n,e){return n.replace(DU,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var DU=/\{\$([^}]+)}/g;function WR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(kR(o)&&kR(s)){if(!bi(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function kR(n){return n!==null&&typeof n=="object"}function $c(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gc(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Wc(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function qR(n,e){let t=new hw(n,e);return t.subscribe.bind(t)}var hw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");bU(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=dw),i.error===void 0&&(i.error=dw),i.complete===void 0&&(i.complete=dw);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function bU(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dw(){}var sde=4*60*60*1e3;function mt(n){return n&&n._delegate?n._delegate:n}var xt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var da="[DEFAULT]";var vw=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ua;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TU(e))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return I(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=da){return this.instances.has(e)}getOptions(e=da){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SU(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=da){return this.component?this.component.multipleInstances?e:da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function SU(n){return n===da?void 0:n}function TU(n){return n.instantiationMode==="EAGER"}var Ng=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new vw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var RU=[],Pe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Pe||{}),MU={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},NU=Pe.INFO,OU={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},PU=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=OU[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Si=class{constructor(e){this.name=e,this._logLevel=NU,this._logHandler=PU,this._userLogHandler=null,RU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}};var kU=(n,e)=>e.some(t=>n instanceof t),KR,ZR;function FU(){return KR||(KR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LU(){return ZR||(ZR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var XR=new WeakMap,_w=new WeakMap,YR=new WeakMap,yw=new WeakMap,Ew=new WeakMap;function VU(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(ei(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&XR.set(t,n)}).catch(()=>{}),Ew.set(e,n),e}function BU(n){if(_w.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});_w.set(n,e)}var ww={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return _w.get(n);if(e==="objectStoreNames")return n.objectStoreNames||YR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ei(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function QR(n){ww=n(ww)}function UU(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Og(this),e,...t);return YR.set(r,e.sort?e.sort():[e]),ei(r)}:LU().includes(n)?function(...e){return n.apply(Og(this),e),ei(XR.get(this))}:function(...e){return ei(n.apply(Og(this),e))}}function jU(n){return typeof n=="function"?UU(n):(n instanceof IDBTransaction&&BU(n),kU(n,FU())?new Proxy(n,ww):n)}function ei(n){if(n instanceof IDBRequest)return VU(n);if(yw.has(n))return yw.get(n);let e=jU(n);return e!==n&&(yw.set(n,e),Ew.set(e,n)),e}var Og=n=>Ew.get(n);function fa(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=ei(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ei(s.result),c.oldVersion,c.newVersion,ei(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function Pg(n,{blocked:e}={}){let t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),ei(t).then(()=>{})}var zU=["get","getKey","getAll","getAllKeys","count"],HU=["put","add","delete","clear"],Iw=new Map;function JR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Iw.get(e))return Iw.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=HU.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zU.includes(t)))return;let o=function(s,...a){return I(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return Iw.set(e,o),o}QR(n=>ae(W({},n),{get:(e,t,r)=>JR(e,t)||n.get(e,t,r),has:(e,t)=>!!JR(e,t)||n.has(e,t)}));var Aw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($U(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function $U(n){let e=n.getComponent();return e?.type==="VERSION"}var xw="@firebase/app",eM="0.11.4";var so=new Si("@firebase/app"),GU="@firebase/app-compat",WU="@firebase/analytics-compat",qU="@firebase/analytics",KU="@firebase/app-check-compat",ZU="@firebase/app-check",XU="@firebase/auth",YU="@firebase/auth-compat",QU="@firebase/database",JU="@firebase/data-connect",ej="@firebase/database-compat",tj="@firebase/functions",nj="@firebase/functions-compat",rj="@firebase/installations",ij="@firebase/installations-compat",oj="@firebase/messaging",sj="@firebase/messaging-compat",aj="@firebase/performance",cj="@firebase/performance-compat",uj="@firebase/remote-config",lj="@firebase/remote-config-compat",dj="@firebase/storage",fj="@firebase/storage-compat",hj="@firebase/firestore",pj="@firebase/vertexai",gj="@firebase/firestore-compat",mj="firebase",vj="11.6.0";var Dw="[DEFAULT]",yj={[xw]:"fire-core",[GU]:"fire-core-compat",[qU]:"fire-analytics",[WU]:"fire-analytics-compat",[ZU]:"fire-app-check",[KU]:"fire-app-check-compat",[XU]:"fire-auth",[YU]:"fire-auth-compat",[QU]:"fire-rtdb",[JU]:"fire-data-connect",[ej]:"fire-rtdb-compat",[tj]:"fire-fn",[nj]:"fire-fn-compat",[rj]:"fire-iid",[ij]:"fire-iid-compat",[oj]:"fire-fcm",[sj]:"fire-fcm-compat",[aj]:"fire-perf",[cj]:"fire-perf-compat",[uj]:"fire-rc",[lj]:"fire-rc-compat",[dj]:"fire-gcs",[fj]:"fire-gcs-compat",[hj]:"fire-fst",[gj]:"fire-fst-compat",[pj]:"fire-vertex","fire-js":"fire-js",[mj]:"fire-js-all"};var vd=new Map,_j=new Map,bw=new Map;function tM(n,e){try{n.container.addComponent(e)}catch(t){so.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function en(n){let e=n.name;if(bw.has(e))return so.debug(`There were multiple attempts to register component ${e}.`),!1;bw.set(e,n);for(let t of vd.values())tM(t,n);for(let t of _j.values())tM(t,n);return!0}function vr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function mn(n){return n==null?!1:n.settings!==void 0}var wj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jo=new zn("app","Firebase",wj);var Sw=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jo.create("app-deleted",{appName:this._name})}};var es=vj;function Mw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Dw,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Jo.create("bad-app-name",{appName:String(i)});if(t||(t=gw()),!t)throw Jo.create("no-options");let o=vd.get(i);if(o){if(bi(t,o.options)&&bi(r,o.config))return o;throw Jo.create("duplicate-app",{appName:i})}let s=new Ng(i);for(let c of bw.values())s.addComponent(c);let a=new Sw(t,r,s);return vd.set(i,a),a}function Rr(n=Dw){let e=vd.get(n);if(!e&&n===Dw&&gw())return Mw();if(!e)throw Jo.create("no-app",{appName:n});return e}function kg(){return Array.from(vd.values())}function Ve(n,e,t){var r;let i=(r=yj[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),so.warn(a.join(" "));return}en(new xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Ej="firebase-heartbeat-database",Ij=1,yd="firebase-heartbeat-store",Cw=null;function oM(){return Cw||(Cw=fa(Ej,Ij,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Jo.create("idb-open",{originalErrorMessage:n.message})})),Cw}function Cj(n){return I(this,null,function*(){try{let t=(yield oM()).transaction(yd),r=yield t.objectStore(yd).get(sM(n));return yield t.done,r}catch(e){if(e instanceof Sn)so.warn(e.message);else{let t=Jo.create("idb-get",{originalErrorMessage:e?.message});so.warn(t.message)}}})}function nM(n,e){return I(this,null,function*(){try{let r=(yield oM()).transaction(yd,"readwrite");yield r.objectStore(yd).put(e,sM(n)),yield r.done}catch(t){if(t instanceof Sn)so.warn(t.message);else{let r=Jo.create("idb-set",{originalErrorMessage:t?.message});so.warn(r.message)}}})}function sM(n){return`${n.name}!${n.options.appId}`}var Aj=1024,xj=30,Tw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Rw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return I(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=rM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>xj){let s=bj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){so.warn(r)}})}getHeartbeatsHeader(){return I(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=rM(),{heartbeatsToSend:r,unsentEntries:i}=Dj(this._heartbeatsCache.heartbeats),o=md(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return so.warn(t),""}})}};function rM(){return new Date().toISOString().substring(0,10)}function Dj(n,e=Aj){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),iM(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),iM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Rw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(this,null,function*(){return la()?Mg().then(()=>!0).catch(()=>!1):!1})}read(){return I(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Cj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return I(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return nM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return I(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return nM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function iM(n){return md(JSON.stringify({version:2,heartbeats:n})).length}function bj(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Sj(n){en(new xt("platform-logger",e=>new Aw(e),"PRIVATE")),en(new xt("heartbeat",e=>new Tw(e),"PRIVATE")),Ve(xw,eM,n),Ve(xw,eM,"esm2017"),Ve("fire-js","")}Sj("");var Tj="firebase",Rj="11.6.0";Ve(Tj,Rj,"app");function Nw(n){n===void 0&&(iS(Nw),n=U(At));let e=n.get(xp);return t=>new fe(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Mr=new Ac("ANGULARFIRE2_VERSION");function ao(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ti=(n,e)=>{let t=e?[e]:kg(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},qc=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(qc||{}),aM=Vl()&&typeof Zone<"u"?qc.WARN:qc.SILENT;var Fg=class{zone;delegate;constructor(e,t=ly){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Nr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=U(Me);this.outsideAngular=t.runOutsideAngular(()=>new Fg(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Fg(typeof Zone>"u"?void 0:Zone.current,uy))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cM=!1;function Mj(n,e){!cM&&(aM>qc.SILENT||Vl())&&(cM=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),aM>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Nj(n){let e=U(Me,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ha(n){let e=U(Me,{optional:!0});return e?e.run(()=>n()):n()}var Oj=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),jn(t,()=>ha(()=>n.apply(void 0,r)))),ct=(n,e,t)=>(t||=e?qc.WARN:qc.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=U(Nr),s=U(xp),a=U(Bn)}catch{return Mj(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=ha(()=>s.add())),i[u]=Oj(i[u],r,a));let c=Nj(()=>n.apply(this,i));return e?c instanceof fe?c.pipe(Bo(o.outsideAngular),Vo(o.insideAngular),Nw(a)):c instanceof Promise?ha(()=>new Promise((u,l)=>{s.run(()=>c).then(f=>jn(a,()=>ha(()=>u(f))),f=>jn(a,()=>ha(()=>l(f))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:ha(()=>c):c instanceof fe?c.pipe(Bo(o.outsideAngular),Vo(o.insideAngular)):ha(()=>c)});var yr=class{constructor(e){return e}},ti=class{constructor(){return kg()}};function Pj(n){return n&&n.length===1?n[0]:new yr(Rr())}var Ow=new X("angularfire2._apps"),kj={provide:yr,useFactory:Pj,deps:[[new Ut,Ow]]},Fj={provide:ti,deps:[[new Ut,Ow]]};function Lj(n){return(e,t)=>{let r=t.get(xr);Ve("angularfire",Mr.full,"core"),Ve("angularfire",Mr.full,"app"),Ve("angular",o2.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new yr(i)}}function uM(n,...e){return xn([kj,Fj,{provide:Ow,useFactory:Lj(n),multi:!0,deps:[Me,At,Nr,...e]}])}var lM=ct(Mw,!0);var Vj=new Map,Bj={activated:!1,tokenObservers:[]},Uj={initialized:!1,enabled:!1};function ni(n){return Vj.get(n)||Object.assign({},Bj)}function pM(){return Uj}var jj="https://content-firebaseappcheck.googleapis.com/v1";var zj="exchangeDebugToken",dM={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},dfe=24*60*60*1e3;var Fw=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return I(this,null,function*(){this.stop();try{this.pending=new ua,this.pending.promise.catch(t=>{}),yield Hj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ua,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Hj(n){return new Promise(e=>{setTimeout(e,n)})}var $j={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ts=new zn("appCheck","AppCheck",$j);function gM(n){if(!ni(n).activated)throw ts.create("use-before-activation",{appName:n.name})}function mM(r,i){return I(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let p=yield s.getHeartbeatsHeader();p&&(o["X-Firebase-Client"]=p)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(p){throw ts.create("fetch-network-error",{originalErrorMessage:p?.message})}if(c.status!==200)throw ts.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(p){throw ts.create("fetch-parse-error",{originalErrorMessage:p?.message})}let l=u.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(l[1])*1e3,h=Date.now();return{token:u.token,expireTimeMillis:h+f,issuedAtTimeMillis:h}})}function vM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${jj}/projects/${t}/apps/${r}:${zj}?key=${i}`,body:{debug_token:e}}}var Gj="firebase-app-check-database",Wj=1,Lw="firebase-app-check-store";var Lg=null;function qj(){return Lg||(Lg=new Promise((n,e)=>{try{let t=indexedDB.open(Gj,Wj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ts.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Lw,{keyPath:"compositeKey"})}}}catch(t){e(ts.create("storage-open",{originalErrorMessage:t?.message}))}}),Lg)}function Kj(n,e){return Zj(Xj(n),e)}function Zj(n,e){return I(this,null,function*(){let r=(yield qj()).transaction(Lw,"readwrite"),o=r.objectStore(Lw).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(ts.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function Xj(n){return`${n.options.appId}-${n.name}`}var _d=new Si("@firebase/app-check");function Pw(n,e){return la()?Kj(n,e).catch(t=>{_d.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function yM(){return pM().enabled}function _M(){return I(this,null,function*(){let n=pM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Yj={error:"UNKNOWN_ERROR"};function Qj(n){return bg.encodeString(JSON.stringify(n),!1)}function Vw(n,e=!1,t=!1){return I(this,null,function*(){let r=n.app;gM(r);let i=ni(r),o=i.token,s;if(o&&!wd(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(wd(u)?o=u:yield Pw(r,void 0))}if(!e&&o&&wd(o))return{token:o.token};let a=!1;if(yM())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=mM(vM(r,yield _M()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield Pw(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?_d.warn(u.message):t&&_d.error(u),kw(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield ni(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?_d.warn(u.message):t&&_d.error(u),s=u}let c;return o?s?wd(o)?c={token:o.token,internalError:s}:c=kw(s):(c={token:o.token},i.token=o,yield Pw(r,o)):c=kw(s),a&&nz(r,c),c})}function Jj(n){return I(this,null,function*(){let e=n.app;gM(e);let{provider:t}=ni(e);if(yM()){let r=yield _M(),{token:i}=yield mM(vM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function ez(n,e,t,r){let{app:i}=n,o=ni(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&wd(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),fM(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>fM(n))}function wM(n,e){let t=ni(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function fM(n){let{app:e}=n,t=ni(e),r=t.tokenRefresher;r||(r=tz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function tz(n){let{app:e}=n;return new Fw(()=>I(this,null,function*(){let t=ni(e),r;if(t.token?r=yield Vw(n,!0):r=yield Vw(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ni(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},dM.RETRIAL_MIN_WAIT,dM.RETRIAL_MAX_WAIT)}function nz(n,e){let t=ni(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function wd(n){return n.expireTimeMillis-Date.now()>0}function kw(n){return{token:Qj(Yj),error:n}}var Bw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ni(this.app);for(let t of e)wM(this.app,t.next);return Promise.resolve()}};function rz(n,e){return new Bw(n,e)}function iz(n){return{getToken:e=>Vw(n,e),getLimitedUseToken:()=>Jj(n),addTokenListener:e=>ez(n,"INTERNAL",e),removeTokenListener:e=>wM(n.app,e)}}var oz="@firebase/app-check",sz="0.8.13";var az="app-check",hM="app-check-internal";function cz(){en(new xt(az,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return rz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(hM).initialize()})),en(new xt(hM,n=>{let e=n.getProvider("app-check").getImmediate();return iz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ve(oz,sz)}cz();var uz="app-check";var ns=class{constructor(){return Ti(uz)}};var lz=["localhost","0.0.0.0","127.0.0.1"],Afe=typeof window<"u"&&lz.includes(window.location.hostname);function FM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var LM=FM,VM=new zn("auth","Firebase",FM());var Hg=new Si("@firebase/auth");function dz(n,...e){Hg.logLevel<=Pe.WARN&&Hg.warn(`Auth (${es}): ${n}`,...e)}function Bg(n,...e){Hg.logLevel<=Pe.ERROR&&Hg.error(`Auth (${es}): ${n}`,...e)}function Or(n,...e){throw cE(n,...e)}function ri(n,...e){return cE(n,...e)}function aE(n,e,t){let r=Object.assign(Object.assign({},LM()),{[e]:t});return new zn("auth","Firebase",r).create(e,{appName:n.name})}function lo(n){return aE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fz(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Or(n,"argument-error"),aE(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return VM.create(n,...e)}function ce(n,e,...t){if(!n)throw cE(e,...t)}function co(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Bg(e),new Error(e)}function fo(n,e){n||co(e)}function zw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function hz(){return EM()==="http:"||EM()==="https:"}function EM(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function pz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hz()||jR()||"connection"in navigator)?navigator.onLine:!0}function gz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var pa=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,fo(t>e,"Short delay should be less than long delay!"),this.isMobile=BR()||zR()}get(){return pz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function uE(n,e){fo(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var $g=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;co("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;co("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;co("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var mz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var vz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yz=new pa(3e4,6e4);function os(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ss(o,s,a,c){return I(this,arguments,function*(n,e,t,r,i={}){return BM(n,i,()=>I(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let f=$c(Object.assign({key:n.config.apiKey},l)).slice(1),h=yield n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);let p=Object.assign({method:e,headers:h},u);return UR()||(p.referrerPolicy="no-referrer"),$g.fetch()(yield UM(n,n.config.apiHost,t,f),p)}))})}function BM(n,e,t){return I(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},mz),e);try{let i=new Hw(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Vg(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vg(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Vg(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Vg(n,"user-disabled",s);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw aE(n,l,u);Or(n,l)}}catch(i){if(i instanceof Sn)throw i;Or(n,"network-request-failed",{message:String(i)})}})}function Td(o,s,a,c){return I(this,arguments,function*(n,e,t,r,i={}){let u=yield ss(n,e,t,r,i);return"mfaPendingCredential"in u&&Or(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function UM(n,e,t,r){return I(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?uE(n.config,i):`${n.config.apiScheme}://${i}`;return vz.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function _z(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Hw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ri(this.auth,"network-request-failed")),yz.get())})}};function Vg(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ri(n,e,r);return i.customData._tokenResponse=t,i}function IM(n){return n!==void 0&&n.enterprise!==void 0}var $w=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _z(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function wz(n,e){return I(this,null,function*(){return ss(n,"GET","/v2/recaptchaConfig",os(n,e))})}function Ez(n,e){return I(this,null,function*(){return ss(n,"POST","/v1/accounts:delete",e)})}function Gg(n,e){return I(this,null,function*(){return ss(n,"POST","/v1/accounts:lookup",e)})}function Id(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function lE(n,e=!1){return I(this,null,function*(){let t=mt(n),r=yield t.getIdToken(e),i=dE(r);ce(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Id(Uw(i.auth_time)),issuedAtTime:Id(Uw(i.iat)),expirationTime:Id(Uw(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Uw(n){return Number(n)*1e3}function dE(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Bg("JWT malformed, contained fewer than 3 sections"),null;try{let i=Sg(t);return i?JSON.parse(i):(Bg("Failed to decode base64 JWT payload"),null)}catch(i){return Bg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function CM(n){let e=dE(n);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ad(n,e,t=!1){return I(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Sn&&Iz(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Iz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Gw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>I(this,null,function*(){yield this.iteration()}),t)}iteration(){return I(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var xd=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Id(this.lastLoginAt),this.creationTime=Id(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Wg(n){return I(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ad(n,Gg(t,{idToken:r}));ce(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?jM(o.providerUserInfo):[],a=Cz(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,l=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new xd(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(n,f)})}function fE(n){return I(this,null,function*(){let e=mt(n);yield Wg(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Cz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jM(n){return n.map(e=>{var{providerId:t}=e,r=yh(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Az(n,e){return I(this,null,function*(){let t=yield BM(n,{},()=>I(this,null,function*(){let r=$c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield UM(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",$g.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function xz(n,e){return I(this,null,function*(){return ss(n,"POST","/v2/accounts:revokeToken",os(n,e))})}var Cd=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ce(e.length!==0,"internal-error");let t=CM(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return I(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return I(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Az(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ce(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ce(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return co("not implemented")}};function rs(n,e){ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var is=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=yh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xd(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return I(this,null,function*(){let t=yield Ad(this,this.stsTokenManager.getToken(this.auth,e));return ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return lE(this,e)}reload(){return fE(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return I(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Wg(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return I(this,null,function*(){if(mn(this.auth.app))return Promise.reject(lo(this.auth));let e=yield this.getIdToken();return yield Ad(this,Ez(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,l;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,p=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,m=(s=t.photoURL)!==null&&s!==void 0?s:void 0,y=(a=t.tenantId)!==null&&a!==void 0?a:void 0,_=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,A=(u=t.createdAt)!==null&&u!==void 0?u:void 0,b=(l=t.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:R,emailVerified:O,isAnonymous:V,providerData:B,stsTokenManager:x}=t;ce(R&&x,e,"internal-error");let E=Cd.fromJSON(this.name,x);ce(typeof R=="string",e,"internal-error"),rs(f,e.name),rs(h,e.name),ce(typeof O=="boolean",e,"internal-error"),ce(typeof V=="boolean",e,"internal-error"),rs(p,e.name),rs(m,e.name),rs(y,e.name),rs(_,e.name),rs(A,e.name),rs(b,e.name);let D=new n({uid:R,auth:e,email:h,emailVerified:O,displayName:f,isAnonymous:V,photoURL:m,phoneNumber:p,tenantId:y,stsTokenManager:E,createdAt:A,lastLoginAt:b});return B&&Array.isArray(B)&&(D.providerData=B.map(T=>Object.assign({},T))),_&&(D._redirectEventId=_),D}static _fromIdTokenResponse(e,t,r=!1){return I(this,null,function*(){let i=new Cd;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Wg(o),o})}static _fromGetAccountInfoResponse(e,t,r){return I(this,null,function*(){let i=t.users[0];ce(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?jM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Cd;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new xd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var AM=new Map;function uo(n){fo(n instanceof Function,"Expected a class definition");let e=AM.get(n);return e?(fo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,AM.set(n,e),e)}var Dz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(this,null,function*(){return!0})}_set(t,r){return I(this,null,function*(){this.storage[t]=r})}_get(t){return I(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return I(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Ww=Dz;function Ug(n,e,t){return`firebase:${n}:${e}:${t}`}var qg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ug(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ug("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return I(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Gg(this.auth,{idToken:e}).catch(()=>{});return t?is._fromGetAccountInfoResponse(this.auth,t,e):null}return is._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return I(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return I(this,null,function*(){if(!t.length)return new n(uo(Ww),e,r);let i=(yield Promise.all(t.map(u=>I(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||uo(Ww),s=Ug(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let l=yield u._get(s);if(l){let f;if(typeof l=="string"){let h=yield Gg(e,{idToken:l}).catch(()=>{});if(!h)break;f=yield is._fromGetAccountInfoResponse(e,h,l)}else f=is._fromJSON(e,l);u!==o&&(a=f),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>I(this,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function xM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qM(e))return"Blackberry";if(KM(e))return"Webos";if(HM(e))return"Safari";if((e.includes("chrome/")||$M(e))&&!e.includes("edge/"))return"Chrome";if(WM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function zM(n=an()){return/firefox\//i.test(n)}function HM(n=an()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $M(n=an()){return/crios\//i.test(n)}function GM(n=an()){return/iemobile/i.test(n)}function WM(n=an()){return/android/i.test(n)}function qM(n=an()){return/blackberry/i.test(n)}function KM(n=an()){return/webos/i.test(n)}function hE(n=an()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bz(n=an()){var e;return hE(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Sz(){return HR()&&document.documentMode===10}function ZM(n=an()){return hE(n)||WM(n)||KM(n)||qM(n)||/windows phone/i.test(n)||GM(n)}function XM(n,e=[]){let t;switch(n){case"Browser":t=xM(an());break;case"Worker":t=`${xM(an())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${es}/${r}`}var qw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return I(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Tz(t){return I(this,arguments,function*(n,e={}){return ss(n,"GET","/v2/passwordPolicy",os(n,e))})}var Rz=6,Kw=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:Rz,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Zw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kg(this),this.idTokenSubscription=new Kg(this),this.beforeStateQueue=new qw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=uo(t)),this._initializationPromise=this.queue(()=>I(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield qg.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return I(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return I(this,null,function*(){try{let t=yield Gg(this,{idToken:e}),r=yield is._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return I(this,null,function*(){var t;if(mn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return I(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return I(this,null,function*(){try{yield Wg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=gz()}_delete(){return I(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return I(this,null,function*(){if(mn(this.app))return Promise.reject(lo(this));let t=e?mt(e):null;return t&&ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return I(this,null,function*(){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>I(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return I(this,null,function*(){return mn(this.app)?Promise.reject(lo(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return mn(this.app)?Promise.reject(lo(this)):this.queue(()=>I(this,null,function*(){yield this.assertedPersistence.setPersistence(uo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return I(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return I(this,null,function*(){let e=yield Tz(this),t=new Kw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return I(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield xz(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return I(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return I(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&uo(e)||this._popupRedirectResolver;ce(t,this,"argument-error"),this.redirectPersistenceManager=yield qg.create(this,[uo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return I(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>I(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return I(this,null,function*(){if(e===this.currentUser)return this.queue(()=>I(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return I(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return I(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return I(this,null,function*(){var e;if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&dz(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function as(n){return mt(n)}var Kg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=qR(t=>this.observer=t)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var rm={loadJS(){return I(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mz(n){rm=n}function YM(n){return rm.loadJS(n)}function Nz(){return rm.recaptchaEnterpriseScript}function Oz(){return rm.gapiScript}function QM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Xw=class{constructor(){this.enterprise=new Yw}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Yw=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var Pz="recaptcha-enterprise",JM="NO_RECAPTCHA",Qw=class{constructor(e){this.type=Pz,this.auth=as(e)}verify(e="verify",t=!1){return I(this,null,function*(){function r(o){return I(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>I(this,null,function*(){wz(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new $w(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;IM(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(JM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Xw().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&IM(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Nz();c.length!==0&&(c+=a),YM(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function Ed(n,e,t,r=!1,i=!1){return I(this,null,function*(){let o=new Qw(n),s;if(i)s=JM;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Jw(n,e,t,r,i){return I(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Ed(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>I(this,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Ed(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Ed(n,e,t);return r(n,a).catch(c=>I(this,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let l=yield Ed(n,e,t,!1,!0);return r(n,l)}return Promise.reject(c)}))}else{let a=yield Ed(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function pE(n,e){let t=vr(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(bi(o,e??{}))return i;Or(i,"already-initialized")}return t.initialize({options:e})}function kz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(uo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function gE(n,e,t){let r=as(n);ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=eN(e),{host:s,port:a}=Fz(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},l=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ce(bi(u,r.config.emulator)&&bi(l,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=l,r.settings.appVerificationDisabledForTesting=!0,i||Lz()}function eN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Fz(n){let e=eN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:DM(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:DM(s)}}}function DM(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Lz(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Zc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return co("not implemented")}_getIdTokenResponse(e){return co("not implemented")}_linkToIdToken(e,t){return co("not implemented")}_getReauthenticationResolver(e){return co("not implemented")}};function Vz(n,e){return I(this,null,function*(){return ss(n,"POST","/v1/accounts:signUp",e)})}function Bz(n,e){return I(this,null,function*(){return Td(n,"POST","/v1/accounts:signInWithPassword",os(n,e))})}function Uz(n,e){return I(this,null,function*(){return Td(n,"POST","/v1/accounts:signInWithEmailLink",os(n,e))})}function jz(n,e){return I(this,null,function*(){return Td(n,"POST","/v1/accounts:signInWithEmailLink",os(n,e))})}var Dd=class n extends Zc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return I(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jw(e,t,"signInWithPassword",Bz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Uz(e,{email:this._email,oobCode:this._password});default:Or(e,"internal-error")}})}_linkToIdToken(e,t){return I(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jw(e,r,"signUpPassword",Vz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return jz(e,{idToken:t,email:this._email,oobCode:this._password});default:Or(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Kc(n,e){return I(this,null,function*(){return Td(n,"POST","/v1/accounts:signInWithIdp",os(n,e))})}var zz="http://localhost",Zg=class n extends Zc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=yh(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Kc(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Kc(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Kc(e,t)}buildRequest(){let e={requestUri:zz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$c(t)}return e}};function Hz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $z(n){let e=Gc(Wc(n)).link,t=e?Gc(Wc(e)).deep_link_id:null,r=Gc(Wc(n)).deep_link_id;return(r?Gc(Wc(r)).link:null)||r||t||e||n}var Xg=class n{constructor(e){var t,r,i,o,s,a;let c=Gc(Wc(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,l=(r=c.oobCode)!==null&&r!==void 0?r:null,f=Hz((i=c.mode)!==null&&i!==void 0?i:null);ce(u&&l&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=l,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=$z(e);try{return new n(t)}catch{return null}}};var tN=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Dd._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Xg.parseLink(r);return ce(i,"argument-error"),Dd._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),bd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Yg=class extends bd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var mE=(()=>{class n extends Yg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Zg._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function Gz(n,e){return I(this,null,function*(){return Td(n,"POST","/v1/accounts:signUp",os(n,e))})}var Xc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return I(this,null,function*(){let o=yield is._fromIdTokenResponse(e,r,i),s=bM(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return I(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=bM(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function bM(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var eE=class n extends Sn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function nN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?eE._fromErrorAndOperation(n,o,e,r):o})}function Wz(n,e,t=!1){return I(this,null,function*(){let r=yield Ad(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Xc._forOperation(n,"link",r)})}function qz(n,e,t=!1){return I(this,null,function*(){let{auth:r}=n;if(mn(r.app))return Promise.reject(lo(r));let i="reauthenticate";try{let o=yield Ad(n,nN(r,i,e,n),t);ce(o.idToken,r,"internal-error");let s=dE(o.idToken);ce(s,r,"internal-error");let{sub:a}=s;return ce(n.uid===a,r,"user-mismatch"),Xc._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Or(r,"user-mismatch"),o}})}function rN(n,e,t=!1){return I(this,null,function*(){if(mn(n.app))return Promise.reject(lo(n));let r="signIn",i=yield nN(n,r,e),o=yield Xc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function vE(n,e){return I(this,null,function*(){return rN(as(n),e)})}function iN(n){return I(this,null,function*(){let e=as(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function yE(n,e,t){return I(this,null,function*(){if(mn(n.app))return Promise.reject(lo(n));let r=as(n),s=yield Jw(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gz,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&iN(n),c}),a=yield Xc._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function _E(n,e,t){return mn(n.app)?Promise.reject(lo(n)):vE(mt(n),tN.credential(e,t)).catch(r=>I(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&iN(n),r}))}function wE(n,e,t,r){return mt(n).onIdTokenChanged(e,t,r)}function EE(n,e,t){return mt(n).beforeAuthStateChanged(e,t)}function IE(n,e,t,r){return mt(n).onAuthStateChanged(e,t,r)}function im(n){return mt(n).signOut()}var Qg="__sak";var Jg=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qg,"1"),this.storage.removeItem(Qg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Kz=1e3,Zz=10,Xz=(()=>{class n extends Jg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Sz()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Zz):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Kz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return I(this,null,function*(){yield Fo(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return I(this,null,function*(){let r=yield Fo(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return I(this,null,function*(){yield Fo(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),oN=Xz;var Yz=(()=>{class n extends Jg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),CE=Yz;function Qz(n){return Promise.all(n.map(e=>I(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Jz=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return I(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(l=>I(this,null,function*(){return l(r.origin,s)})),u=yield Qz(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function AE(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var tE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return I(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=AE("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(l),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(h.data.response);break;default:clearTimeout(l),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Ri(){return window}function eH(n){Ri().location.href=n}function sN(){return typeof Ri().WorkerGlobalScope<"u"&&typeof Ri().importScripts=="function"}function tH(){return I(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function nH(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function rH(){return sN()?self:null}var aN="firebaseLocalStorageDb",iH=1,em="firebaseLocalStorage",cN="fbase_key",ga=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function om(n,e){return n.transaction([em],e?"readwrite":"readonly").objectStore(em)}function oH(){let n=indexedDB.deleteDatabase(aN);return new ga(n).toPromise()}function nE(){let n=indexedDB.open(aN,iH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(em,{keyPath:cN})}catch(i){t(i)}}),n.addEventListener("success",()=>I(this,null,function*(){let r=n.result;r.objectStoreNames.contains(em)?e(r):(r.close(),yield oH(),e(yield nE()))}))})}function SM(n,e,t){return I(this,null,function*(){let r=om(n,!0).put({[cN]:e,value:t});return new ga(r).toPromise()})}function sH(n,e){return I(this,null,function*(){let t=om(n,!1).get(e),r=yield new ga(t).toPromise();return r===void 0?null:r.value})}function TM(n,e){let t=om(n,!0).delete(e);return new ga(t).toPromise()}var aH=800,cH=3,uH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return I(this,null,function*(){return this.db?this.db:(this.db=yield nE(),this.db)})}_withRetries(t){return I(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>cH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return I(this,null,function*(){return sN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return I(this,null,function*(){this.receiver=Jz._getInstance(rH()),this.receiver._subscribe("keyChanged",(t,r)=>I(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>I(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return I(this,null,function*(){var t,r;if(this.activeServiceWorker=yield tH(),!this.activeServiceWorker)return;this.sender=new tE(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return I(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||nH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return I(this,null,function*(){try{if(!indexedDB)return!1;let t=yield nE();return yield SM(t,Qg,"1"),yield TM(t,Qg),!0}catch{}return!1})}_withPendingWrite(t){return I(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(i=>SM(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return I(this,null,function*(){let r=yield this._withRetries(i=>sH(i,t));return this.localCache[t]=r,r})}_remove(t){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(r=>TM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return I(this,null,function*(){let t=yield this._withRetries(o=>{let s=om(o,!1).getAll();return new ga(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>I(this,null,function*(){return this._poll()}),aH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),uN=uH;var Nfe=QM("rcb"),Ofe=new pa(3e4,6e4);function lN(n,e){return e?uo(e):(ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Sd=class extends Zc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kc(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function lH(n){return rN(n.auth,new Sd(n),n.bypassAuthState)}function dH(n){let{auth:e,user:t}=n;return ce(t,e,"internal-error"),qz(t,new Sd(n),n.bypassAuthState)}function fH(n){return I(this,null,function*(){let{auth:e,user:t}=n;return ce(t,e,"internal-error"),Wz(t,new Sd(n),n.bypassAuthState)})}var tm=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>I(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return I(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lH;case"linkViaPopup":case"linkViaRedirect":return fH;case"reauthViaPopup":case"reauthViaRedirect":return dH;default:Or(this.auth,"internal-error")}}resolve(e){fo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var hH=new pa(2e3,1e4);function xE(n,e,t){return I(this,null,function*(){if(mn(n.app))return Promise.reject(ri(n,"operation-not-supported-in-this-environment"));let r=as(n);fz(n,e,bd);let i=lN(r,t);return new pH(r,"signInViaPopup",e,i).executeNotNull()})}var pH=(()=>{class n extends tm{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return I(this,null,function*(){let t=yield this.execute();return ce(t,this.auth,"internal-error"),t})}onExecution(){return I(this,null,function*(){fo(this.filter.length===1,"Popup operations only handle one event");let t=AE();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,hH.get())};t()}}n.currentPopupAction=null;return n})(),gH="pendingRedirect",jg=new Map,rE=class n extends tm{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return I(this,null,function*(){let e=jg.get(this.auth._key());if(!e){try{let r=(yield mH(this.resolver,this.auth))?yield Fo(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}jg.set(this.auth._key(),e)}return this.bypassAuthState||jg.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return I(this,null,function*(){if(e.type==="signInViaRedirect")return Fo(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Fo(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return I(this,null,function*(){})}cleanUp(){}};function mH(n,e){return I(this,null,function*(){let t=_H(e),r=yH(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function vH(n,e){jg.set(n._key(),e)}function yH(n){return uo(n._redirectPersistence)}function _H(n){return Ug(gH,n.config.apiKey,n.name)}function wH(n,e,t=!1){return I(this,null,function*(){if(mn(n.app))return Promise.reject(lo(n));let r=as(n),i=lN(r,e),s=yield new rE(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var EH=10*60*1e3,iE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!dN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ri(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EH&&this.cachedEventUids.clear(),this.cachedEventUids.has(RM(e))}saveEventToCache(e){this.cachedEventUids.add(RM(e)),this.lastProcessedEventTime=Date.now()}};function RM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function IH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dN(n);default:return!1}}function CH(t){return I(this,arguments,function*(n,e={}){return ss(n,"GET","/v1/projects",e)})}var AH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xH=/^https?/;function DH(n){return I(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield CH(n);for(let t of e)try{if(bH(t))return}catch{}Or(n,"unauthorized-domain")})}function bH(n){let e=zw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!xH.test(t))return!1;if(AH.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var SH=new pa(3e4,6e4);function MM(){let n=Ri().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function TH(n){return new Promise((e,t)=>{var r,i,o;function s(){MM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MM(),t(ri(n,"network-request-failed"))},timeout:SH.get()})}if(!((i=(r=Ri().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ri().gapi)===null||o===void 0)&&o.load)s();else{let a=QM("iframefcb");return Ri()[a]=()=>{gapi.load?s():t(ri(n,"network-request-failed"))},YM(`${Oz()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw zg=null,e})}var zg=null;function RH(n){return zg=zg||TH(n),zg}var MH=new pa(5e3,15e3),NH="__/auth/iframe",OH="emulator/auth/iframe",PH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FH(n){let e=n.config;ce(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?uE(e,OH):`https://${n.config.authDomain}/${NH}`,r={apiKey:e.apiKey,appName:n.name,v:es},i=kH.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${$c(r).slice(1)}`}function LH(n){return I(this,null,function*(){let e=yield RH(n),t=Ri().gapi;return ce(t,n,"internal-error"),e.open({where:document.body,url:FH(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PH,dontclear:!0},r=>new Promise((i,o)=>I(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ri(n,"network-request-failed"),a=Ri().setTimeout(()=>{o(s)},MH.get());function c(){Ri().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var VH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BH=500,UH=600,jH="_blank",zH="http://localhost",nm=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function HH(n,e,t,r=BH,i=UH){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},VH),{width:r.toString(),height:i.toString(),top:o,left:s}),u=an().toLowerCase();t&&(a=$M(u)?jH:t),zM(u)&&(e=e||zH,c.scrollbars="yes");let l=Object.entries(c).reduce((h,[p,m])=>`${h}${p}=${m},`,"");if(bz(u)&&a!=="_self")return $H(e||"",a),new nm(null);let f=window.open(e||"",a,l);ce(f,n,"popup-blocked");try{f.focus()}catch{}return new nm(f)}function $H(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var GH="__/auth/handler",WH="emulator/auth/handler",qH=encodeURIComponent("fac");function NM(n,e,t,r,i,o){return I(this,null,function*(){ce(n.config.authDomain,n,"auth-domain-config-required"),ce(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:es,eventId:i};if(e instanceof bd){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",WR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,f]of Object.entries(o||{}))s[l]=f}if(e instanceof Yg){let l=e.getScopes().filter(f=>f!=="");l.length>0&&(s.scopes=l.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=yield n._getAppCheckToken(),u=c?`#${qH}=${encodeURIComponent(c)}`:"";return`${KH(n)}?${$c(a).slice(1)}${u}`})}function KH({config:n}){return n.emulator?uE(n,WH):`https://${n.authDomain}/${GH}`}var jw="webStorageSupport",oE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CE,this._completeRedirectFn=wH,this._overrideRedirectResult=vH}_openPopup(e,t,r,i){return I(this,null,function*(){var o;fo((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield NM(e,t,r,zw(),i);return HH(e,s,AE())})}_openRedirect(e,t,r,i){return I(this,null,function*(){yield this._originValidation(e);let o=yield NM(e,t,r,zw(),i);return eH(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(fo(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return I(this,null,function*(){let t=yield LH(e),r=new iE(e);return t.register("authEvent",i=>(ce(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jw,{type:jw},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[jw];s!==void 0&&t(!!s),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=DH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ZM()||HM()||hE()}},fN=oE;var OM="@firebase/auth",PM="1.10.0";var sE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return I(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function ZH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XH(n){en(new xt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ce(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XM(n)},u=new Zw(r,i,o,c);return kz(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),en(new xt("auth-internal",e=>{let t=as(e.getProvider("auth").getImmediate());return(r=>new sE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(OM,PM,ZH(n)),Ve(OM,PM,"esm2017")}var YH=5*60,QH=mw("authIdTokenMaxAge")||YH,kM=null,JH=n=>e=>I(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>QH)return;let i=t?.token;kM!==i&&(kM=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function DE(n=Rr()){let e=vr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=pE(n,{popupRedirectResolver:fN,persistence:[uN,oN,CE]}),r=mw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=JH(o.toString());EE(t,s,()=>s(t.currentUser)),wE(t,a=>s(a))}}let i=pw("auth");return i&&gE(t,`http://${i}`),t}function e$(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Mz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ri("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",e$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XH("Browser");var hN="auth",tn=class{constructor(e){return e}},ma=class{constructor(){return Ti(hN)}};var bE=new X("angularfire2.auth-instances");function j$(n,e){let t=ao(hN,n,e);return t&&new tn(t)}function z$(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new tn(r)}}var H$={provide:ma,deps:[[new Ut,bE]]},$$={provide:tn,useFactory:j$,deps:[[new Ut,bE],yr]};function pN(n,...e){return Ve("angularfire",Mr.full,"auth"),xn([$$,H$,{provide:bE,useFactory:z$(n),multi:!0,deps:[Me,At,Nr,ti,[new Ut,ns],...e]}])}var gN=ct(yE,!0,2);var mN=ct(DE,!0);var cs=ct(IE,!0);var vN=ct(_E,!0,2);var yN=ct(xE,!0,2);var sm=class n{auth=U(tn);router=U(mr);logout(){im(this.auth).then(()=>{this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-home"]],decls:12,vars:0,consts:[[1,"text-center","p-4"],[1,"mb-3"],[1,"mb-4"],[1,"d-grid","gap-2","d-md-block"],[1,"btn","btn-outline-danger","me-2",3,"click"],["routerLink","/list",1,"btn","btn-primary"]],template:function(t,r){t&1&&(te(0,"div",0)(1,"h2",1),xe(2,"Welcome to Your Shopping List!"),ne(),te(3,"p",1),xe(4," This app helps you easily create, manage, and plan your shopping lists. Add products manually or by barcode scanning, choose shopping locations, and access your lists from any device. "),ne(),te(5,"p",2),xe(6," Whether you're doing weekly groceries or preparing for a big event, this app keeps your shopping organized and stress-free. "),ne(),te(7,"div",3)(8,"button",4),je("click",function(){return r.logout()}),xe(9," Log Out "),ne(),te(10,"a",5),xe(11,"Go to My Shopping Lists"),ne()()())},dependencies:[Dg],encapsulation:2})};var bN=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Ne(Rc),Ne(Ar))};static \u0275dir=Nt({type:n})}return n})(),SN=(()=>{class n extends bN{static \u0275fac=(()=>{let t;return function(i){return(t||(t=$o(n)))(i||n)}})();static \u0275dir=Nt({type:n,features:[Kr]})}return n})(),TE=new X("");var G$={provide:TE,useExisting:Yi(()=>ls),multi:!0};function W$(){let n=Sr()?Sr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var q$=new X(""),ls=(()=>{class n extends bN{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!W$())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Ne(Rc),Ne(Ar),Ne(q$,8))};static \u0275dir=Nt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&je("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Zr([G$]),Kr]})}return n})();function K$(n){return n==null||Z$(n)===0}function Z$(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var pm=new X(""),TN=new X("");function X$(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Y$(n){return K$(n.value)?{required:!0}:null}function _N(n){return null}function RN(n){return n!=null}function MN(n){return Wo(n)?_t(n):n}function NN(n){let e={};return n.forEach(t=>{e=t!=null?W(W({},e),t):e}),Object.keys(e).length===0?null:e}function ON(n,e){return e.map(t=>t(n))}function Q$(n){return!n.validate}function PN(n){return n.map(e=>Q$(e)?e:t=>e.validate(t))}function J$(n){if(!n)return null;let e=n.filter(RN);return e.length==0?null:function(t){return NN(ON(t,e))}}function RE(n){return n!=null?J$(PN(n)):null}function eG(n){if(!n)return null;let e=n.filter(RN);return e.length==0?null:function(t){let r=ON(t,e).map(MN);return vl(r).pipe(se(NN))}}function ME(n){return n!=null?eG(PN(n)):null}function wN(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function tG(n){return n._rawValidators}function nG(n){return n._rawAsyncValidators}function SE(n){return n?Array.isArray(n)?n:[n]:[]}function cm(n,e){return Array.isArray(n)?n.includes(e):n===e}function EN(n,e){let t=SE(e);return SE(n).forEach(i=>{cm(t,i)||t.push(i)}),t}function IN(n,e){return SE(e).filter(t=>!cm(n,t))}var um=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=RE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ME(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Jc=class extends um{name;get formDirective(){return null}get path(){return null}},kd=class extends um{_parent=null;name=null;valueAccessor=null},lm=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},rG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Uhe=ae(W({},rG),{"[class.ng-submitted]":"isSubmitted"}),tu=(()=>{class n extends lm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ne(kd,2))};static \u0275dir=Nt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Pp("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Kr]})}return n})(),gm=(()=>{class n extends lm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ne(Jc,10))};static \u0275dir=Nt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Pp("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Kr]})}return n})();var Rd="VALID",am="INVALID",Yc="PENDING",Md="DISABLED",eu=class{},dm=class extends eu{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Od=class extends eu{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Pd=class extends eu{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Qc=class extends eu{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function kN(n){return(mm(n)?n.validators:n)||null}function iG(n){return Array.isArray(n)?RE(n):n||null}function FN(n,e){return(mm(e)?e.asyncValidators:n)||null}function oG(n){return Array.isArray(n)?ME(n):n||null}function mm(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function sG(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ee(1e3,"");if(!r[t])throw new ee(1001,"")}function aG(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ee(1002,"")})}var fm=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return br(this.statusReactive)}set status(e){br(()=>this.statusReactive.set(e))}_status=Nc(()=>this.statusReactive());statusReactive=Sc(void 0);get valid(){return this.status===Rd}get invalid(){return this.status===am}get pending(){return this.status==Yc}get disabled(){return this.status===Md}get enabled(){return this.status!==Md}errors;get pristine(){return br(this.pristineReactive)}set pristine(e){br(()=>this.pristineReactive.set(e))}_pristine=Nc(()=>this.pristineReactive());pristineReactive=Sc(!0);get dirty(){return!this.pristine}get touched(){return br(this.touchedReactive)}set touched(e){br(()=>this.touchedReactive.set(e))}_touched=Nc(()=>this.touchedReactive());touchedReactive=Sc(!1);get untouched(){return!this.touched}_events=new ht;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(EN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(EN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(IN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(IN(e,this._rawAsyncValidators))}hasValidator(e){return cm(this._rawValidators,e)}hasAsyncValidator(e){return cm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(W({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Pd(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Pd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(W({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Od(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Od(!0,r))}markAsPending(e={}){this.status=Yc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Qc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(W({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Md,this.errors=null,this._forEachChild(i=>{i.disable(ae(W({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dm(this.value,r)),this._events.next(new Qc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(W({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rd,this._forEachChild(r=>{r.enable(ae(W({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(W({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rd||this.status===Yc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dm(this.value,t)),this._events.next(new Qc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(W({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Md:Rd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Yc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=MN(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Qc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ce,this.statusChanges=new Ce}_calculateStatus(){return this._allControlsDisabled()?Md:this.errors?am:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yc)?Yc:this._anyControlsHaveStatus(am)?am:Rd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Od(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Pd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=iG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=oG(this._rawAsyncValidators)}},hm=class extends fm{constructor(e,t,r){super(kN(t),FN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){aG(this,!0,e),Object.keys(e).forEach(r=>{sG(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var NE=new X("",{providedIn:"root",factory:()=>OE}),OE="always";function cG(n,e){return[...e.path,n]}function LN(n,e,t=OE){VN(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),lG(n,e),fG(n,e),dG(n,e),uG(n,e)}function CN(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function uG(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function VN(n,e){let t=tG(n);e.validator!==null?n.setValidators(wN(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=nG(n);e.asyncValidator!==null?n.setAsyncValidators(wN(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();CN(e._rawValidators,i),CN(e._rawAsyncValidators,i)}function lG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&BN(n,e)})}function dG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&BN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function BN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function fG(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function hG(n,e){n==null,VN(n,e)}function pG(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function gG(n){return Object.getPrototypeOf(n.constructor)===SN}function mG(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function vG(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===ls?t=o:gG(o)?r=o:i=o}),i||r||t||null}var yG={provide:Jc,useExisting:Yi(()=>Fd)},Nd=Promise.resolve(),Fd=(()=>{class n extends Jc{callSetDisabledState;get submitted(){return br(this.submittedReactive)}_submitted=Nc(()=>this.submittedReactive());submittedReactive=Sc(!1);_directives=new Set;form;ngSubmit=new Ce;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new hm({},RE(t),ME(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Nd.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),LN(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Nd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Nd.then(()=>{let r=this._findContainer(t.path),i=new hm({});hG(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Nd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Nd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),mG(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Ne(pm,10),Ne(TN,10),Ne(NE,8))};static \u0275dir=Nt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&je("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Zr([yG]),Kr]})}return n})();function AN(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function xN(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var _G=class extends fm{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(kN(t),FN(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(xN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){AN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){AN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var wG={provide:kd,useExisting:Yi(()=>va)},DN=Promise.resolve(),va=(()=>{class n extends kd{_changeDetectorRef;callSetDisabledState;control=new _G;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ce;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=vG(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),pG(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){LN(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){DN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ta(r);DN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?cG(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Ne(Jc,9),Ne(pm,10),Ne(TN,10),Ne(TE,10),Ne(ea,8),Ne(NE,8))};static \u0275dir=Nt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Zr([wG]),Kr,Gr]})}return n})();var vm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Nt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),EG={provide:TE,useExisting:Yi(()=>PE),multi:!0},PE=(()=>{class n extends SN{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=$o(n)))(i||n)}})();static \u0275dir=Nt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&je("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Zr([EG]),Kr]})}return n})();function IG(n){return typeof n=="number"?n:parseFloat(n)}var UN=(()=>{class n{_validator=_N;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):_N,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Nt({type:n,features:[Gr]})}return n})();var CG={provide:pm,useExisting:Yi(()=>kE),multi:!0},kE=(()=>{class n extends UN{min;inputName="min";normalizeInput=t=>IG(t);createValidator=t=>X$(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=$o(n)))(i||n)}})();static \u0275dir=Nt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Mc("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Zr([CG]),Kr]})}return n})(),AG={provide:pm,useExisting:Yi(()=>Ld),multi:!0};var Ld=(()=>{class n extends UN{required;inputName="required";normalizeInput=ta;createValidator=t=>Y$;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=$o(n)))(i||n)}})();static \u0275dir=Nt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Mc("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Zr([AG]),Kr]})}return n})();var xG=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=hr({type:n});static \u0275inj=fr({})}return n})();var Mi=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:NE,useValue:t.callSetDisabledState??OE}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=hr({type:n});static \u0275inj=fr({imports:[xG]})}return n})();var jN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zN={};var ho,LE;(function(){var n;function e(x,E){function D(){}D.prototype=E.prototype,x.D=E.prototype,x.prototype=new D,x.prototype.constructor=x,x.C=function(T,M,N){for(var S=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)S[Rt-2]=arguments[Rt];return E.prototype[M].apply(T,S)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,E,D){D||(D=0);var T=Array(16);if(typeof E=="string")for(var M=0;16>M;++M)T[M]=E.charCodeAt(D++)|E.charCodeAt(D++)<<8|E.charCodeAt(D++)<<16|E.charCodeAt(D++)<<24;else for(M=0;16>M;++M)T[M]=E[D++]|E[D++]<<8|E[D++]<<16|E[D++]<<24;E=x.g[0],D=x.g[1],M=x.g[2];var N=x.g[3],S=E+(N^D&(M^N))+T[0]+3614090360&4294967295;E=D+(S<<7&4294967295|S>>>25),S=N+(M^E&(D^M))+T[1]+3905402710&4294967295,N=E+(S<<12&4294967295|S>>>20),S=M+(D^N&(E^D))+T[2]+606105819&4294967295,M=N+(S<<17&4294967295|S>>>15),S=D+(E^M&(N^E))+T[3]+3250441966&4294967295,D=M+(S<<22&4294967295|S>>>10),S=E+(N^D&(M^N))+T[4]+4118548399&4294967295,E=D+(S<<7&4294967295|S>>>25),S=N+(M^E&(D^M))+T[5]+1200080426&4294967295,N=E+(S<<12&4294967295|S>>>20),S=M+(D^N&(E^D))+T[6]+2821735955&4294967295,M=N+(S<<17&4294967295|S>>>15),S=D+(E^M&(N^E))+T[7]+4249261313&4294967295,D=M+(S<<22&4294967295|S>>>10),S=E+(N^D&(M^N))+T[8]+1770035416&4294967295,E=D+(S<<7&4294967295|S>>>25),S=N+(M^E&(D^M))+T[9]+2336552879&4294967295,N=E+(S<<12&4294967295|S>>>20),S=M+(D^N&(E^D))+T[10]+4294925233&4294967295,M=N+(S<<17&4294967295|S>>>15),S=D+(E^M&(N^E))+T[11]+2304563134&4294967295,D=M+(S<<22&4294967295|S>>>10),S=E+(N^D&(M^N))+T[12]+1804603682&4294967295,E=D+(S<<7&4294967295|S>>>25),S=N+(M^E&(D^M))+T[13]+4254626195&4294967295,N=E+(S<<12&4294967295|S>>>20),S=M+(D^N&(E^D))+T[14]+2792965006&4294967295,M=N+(S<<17&4294967295|S>>>15),S=D+(E^M&(N^E))+T[15]+1236535329&4294967295,D=M+(S<<22&4294967295|S>>>10),S=E+(M^N&(D^M))+T[1]+4129170786&4294967295,E=D+(S<<5&4294967295|S>>>27),S=N+(D^M&(E^D))+T[6]+3225465664&4294967295,N=E+(S<<9&4294967295|S>>>23),S=M+(E^D&(N^E))+T[11]+643717713&4294967295,M=N+(S<<14&4294967295|S>>>18),S=D+(N^E&(M^N))+T[0]+3921069994&4294967295,D=M+(S<<20&4294967295|S>>>12),S=E+(M^N&(D^M))+T[5]+3593408605&4294967295,E=D+(S<<5&4294967295|S>>>27),S=N+(D^M&(E^D))+T[10]+38016083&4294967295,N=E+(S<<9&4294967295|S>>>23),S=M+(E^D&(N^E))+T[15]+3634488961&4294967295,M=N+(S<<14&4294967295|S>>>18),S=D+(N^E&(M^N))+T[4]+3889429448&4294967295,D=M+(S<<20&4294967295|S>>>12),S=E+(M^N&(D^M))+T[9]+568446438&4294967295,E=D+(S<<5&4294967295|S>>>27),S=N+(D^M&(E^D))+T[14]+3275163606&4294967295,N=E+(S<<9&4294967295|S>>>23),S=M+(E^D&(N^E))+T[3]+4107603335&4294967295,M=N+(S<<14&4294967295|S>>>18),S=D+(N^E&(M^N))+T[8]+1163531501&4294967295,D=M+(S<<20&4294967295|S>>>12),S=E+(M^N&(D^M))+T[13]+2850285829&4294967295,E=D+(S<<5&4294967295|S>>>27),S=N+(D^M&(E^D))+T[2]+4243563512&4294967295,N=E+(S<<9&4294967295|S>>>23),S=M+(E^D&(N^E))+T[7]+1735328473&4294967295,M=N+(S<<14&4294967295|S>>>18),S=D+(N^E&(M^N))+T[12]+2368359562&4294967295,D=M+(S<<20&4294967295|S>>>12),S=E+(D^M^N)+T[5]+4294588738&4294967295,E=D+(S<<4&4294967295|S>>>28),S=N+(E^D^M)+T[8]+2272392833&4294967295,N=E+(S<<11&4294967295|S>>>21),S=M+(N^E^D)+T[11]+1839030562&4294967295,M=N+(S<<16&4294967295|S>>>16),S=D+(M^N^E)+T[14]+4259657740&4294967295,D=M+(S<<23&4294967295|S>>>9),S=E+(D^M^N)+T[1]+2763975236&4294967295,E=D+(S<<4&4294967295|S>>>28),S=N+(E^D^M)+T[4]+1272893353&4294967295,N=E+(S<<11&4294967295|S>>>21),S=M+(N^E^D)+T[7]+4139469664&4294967295,M=N+(S<<16&4294967295|S>>>16),S=D+(M^N^E)+T[10]+3200236656&4294967295,D=M+(S<<23&4294967295|S>>>9),S=E+(D^M^N)+T[13]+681279174&4294967295,E=D+(S<<4&4294967295|S>>>28),S=N+(E^D^M)+T[0]+3936430074&4294967295,N=E+(S<<11&4294967295|S>>>21),S=M+(N^E^D)+T[3]+3572445317&4294967295,M=N+(S<<16&4294967295|S>>>16),S=D+(M^N^E)+T[6]+76029189&4294967295,D=M+(S<<23&4294967295|S>>>9),S=E+(D^M^N)+T[9]+3654602809&4294967295,E=D+(S<<4&4294967295|S>>>28),S=N+(E^D^M)+T[12]+3873151461&4294967295,N=E+(S<<11&4294967295|S>>>21),S=M+(N^E^D)+T[15]+530742520&4294967295,M=N+(S<<16&4294967295|S>>>16),S=D+(M^N^E)+T[2]+3299628645&4294967295,D=M+(S<<23&4294967295|S>>>9),S=E+(M^(D|~N))+T[0]+4096336452&4294967295,E=D+(S<<6&4294967295|S>>>26),S=N+(D^(E|~M))+T[7]+1126891415&4294967295,N=E+(S<<10&4294967295|S>>>22),S=M+(E^(N|~D))+T[14]+2878612391&4294967295,M=N+(S<<15&4294967295|S>>>17),S=D+(N^(M|~E))+T[5]+4237533241&4294967295,D=M+(S<<21&4294967295|S>>>11),S=E+(M^(D|~N))+T[12]+1700485571&4294967295,E=D+(S<<6&4294967295|S>>>26),S=N+(D^(E|~M))+T[3]+2399980690&4294967295,N=E+(S<<10&4294967295|S>>>22),S=M+(E^(N|~D))+T[10]+4293915773&4294967295,M=N+(S<<15&4294967295|S>>>17),S=D+(N^(M|~E))+T[1]+2240044497&4294967295,D=M+(S<<21&4294967295|S>>>11),S=E+(M^(D|~N))+T[8]+1873313359&4294967295,E=D+(S<<6&4294967295|S>>>26),S=N+(D^(E|~M))+T[15]+4264355552&4294967295,N=E+(S<<10&4294967295|S>>>22),S=M+(E^(N|~D))+T[6]+2734768916&4294967295,M=N+(S<<15&4294967295|S>>>17),S=D+(N^(M|~E))+T[13]+1309151649&4294967295,D=M+(S<<21&4294967295|S>>>11),S=E+(M^(D|~N))+T[4]+4149444226&4294967295,E=D+(S<<6&4294967295|S>>>26),S=N+(D^(E|~M))+T[11]+3174756917&4294967295,N=E+(S<<10&4294967295|S>>>22),S=M+(E^(N|~D))+T[2]+718787259&4294967295,M=N+(S<<15&4294967295|S>>>17),S=D+(N^(M|~E))+T[9]+3951481745&4294967295,x.g[0]=x.g[0]+E&4294967295,x.g[1]=x.g[1]+(M+(S<<21&4294967295|S>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+N&4294967295}r.prototype.u=function(x,E){E===void 0&&(E=x.length);for(var D=E-this.blockSize,T=this.B,M=this.h,N=0;N<E;){if(M==0)for(;N<=D;)i(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<E;)if(T[M++]=x.charCodeAt(N++),M==this.blockSize){i(this,T),M=0;break}}else for(;N<E;)if(T[M++]=x[N++],M==this.blockSize){i(this,T),M=0;break}}this.h=M,this.o+=E},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var E=1;E<x.length-8;++E)x[E]=0;var D=8*this.o;for(E=x.length-8;E<x.length;++E)x[E]=D&255,D/=256;for(this.u(x),x=Array(16),E=D=0;4>E;++E)for(var T=0;32>T;T+=8)x[D++]=this.g[E]>>>T&255;return x};function o(x,E){var D=a;return Object.prototype.hasOwnProperty.call(D,x)?D[x]:D[x]=E(x)}function s(x,E){this.h=E;for(var D=[],T=!0,M=x.length-1;0<=M;M--){var N=x[M]|0;T&&N==E||(D[M]=N,T=!1)}this.g=D}var a={};function c(x){return-128<=x&&128>x?o(x,function(E){return new s([E|0],0>E?-1:0)}):new s([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return f;if(0>x)return _(u(-x));for(var E=[],D=1,T=0;x>=D;T++)E[T]=x/D|0,D*=4294967296;return new s(E,0)}function l(x,E){if(x.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(x.charAt(0)=="-")return _(l(x.substring(1),E));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=u(Math.pow(E,8)),T=f,M=0;M<x.length;M+=8){var N=Math.min(8,x.length-M),S=parseInt(x.substring(M,M+N),E);8>N?(N=u(Math.pow(E,N)),T=T.j(N).add(u(S))):(T=T.j(D),T=T.add(u(S)))}return T}var f=c(0),h=c(1),p=c(16777216);n=s.prototype,n.m=function(){if(y(this))return-_(this).m();for(var x=0,E=1,D=0;D<this.g.length;D++){var T=this.i(D);x+=(0<=T?T:4294967296+T)*E,E*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(m(this))return"0";if(y(this))return"-"+_(this).toString(x);for(var E=u(Math.pow(x,6)),D=this,T="";;){var M=O(D,E).g;D=A(D,M.j(E));var N=((0<D.g.length?D.g[0]:D.h)>>>0).toString(x);if(D=M,m(D))return N+T;for(;6>N.length;)N="0"+N;T=N+T}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function m(x){if(x.h!=0)return!1;for(var E=0;E<x.g.length;E++)if(x.g[E]!=0)return!1;return!0}function y(x){return x.h==-1}n.l=function(x){return x=A(this,x),y(x)?-1:m(x)?0:1};function _(x){for(var E=x.g.length,D=[],T=0;T<E;T++)D[T]=~x.g[T];return new s(D,~x.h).add(h)}n.abs=function(){return y(this)?_(this):this},n.add=function(x){for(var E=Math.max(this.g.length,x.g.length),D=[],T=0,M=0;M<=E;M++){var N=T+(this.i(M)&65535)+(x.i(M)&65535),S=(N>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);T=S>>>16,N&=65535,S&=65535,D[M]=S<<16|N}return new s(D,D[D.length-1]&-2147483648?-1:0)};function A(x,E){return x.add(_(E))}n.j=function(x){if(m(this)||m(x))return f;if(y(this))return y(x)?_(this).j(_(x)):_(_(this).j(x));if(y(x))return _(this.j(_(x)));if(0>this.l(p)&&0>x.l(p))return u(this.m()*x.m());for(var E=this.g.length+x.g.length,D=[],T=0;T<2*E;T++)D[T]=0;for(T=0;T<this.g.length;T++)for(var M=0;M<x.g.length;M++){var N=this.i(T)>>>16,S=this.i(T)&65535,Rt=x.i(M)>>>16,Xn=x.i(M)&65535;D[2*T+2*M]+=S*Xn,b(D,2*T+2*M),D[2*T+2*M+1]+=N*Xn,b(D,2*T+2*M+1),D[2*T+2*M+1]+=S*Rt,b(D,2*T+2*M+1),D[2*T+2*M+2]+=N*Rt,b(D,2*T+2*M+2)}for(T=0;T<E;T++)D[T]=D[2*T+1]<<16|D[2*T];for(T=E;T<2*E;T++)D[T]=0;return new s(D,0)};function b(x,E){for(;(x[E]&65535)!=x[E];)x[E+1]+=x[E]>>>16,x[E]&=65535,E++}function R(x,E){this.g=x,this.h=E}function O(x,E){if(m(E))throw Error("division by zero");if(m(x))return new R(f,f);if(y(x))return E=O(_(x),E),new R(_(E.g),_(E.h));if(y(E))return E=O(x,_(E)),new R(_(E.g),E.h);if(30<x.g.length){if(y(x)||y(E))throw Error("slowDivide_ only works with positive integers.");for(var D=h,T=E;0>=T.l(x);)D=V(D),T=V(T);var M=B(D,1),N=B(T,1);for(T=B(T,2),D=B(D,2);!m(T);){var S=N.add(T);0>=S.l(x)&&(M=M.add(D),N=S),T=B(T,1),D=B(D,1)}return E=A(x,M.j(E)),new R(M,E)}for(M=f;0<=x.l(E);){for(D=Math.max(1,Math.floor(x.m()/E.m())),T=Math.ceil(Math.log(D)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),N=u(D),S=N.j(E);y(S)||0<S.l(x);)D-=T,N=u(D),S=N.j(E);m(N)&&(N=h),M=M.add(N),x=A(x,S)}return new R(M,x)}n.A=function(x){return O(this,x).h},n.and=function(x){for(var E=Math.max(this.g.length,x.g.length),D=[],T=0;T<E;T++)D[T]=this.i(T)&x.i(T);return new s(D,this.h&x.h)},n.or=function(x){for(var E=Math.max(this.g.length,x.g.length),D=[],T=0;T<E;T++)D[T]=this.i(T)|x.i(T);return new s(D,this.h|x.h)},n.xor=function(x){for(var E=Math.max(this.g.length,x.g.length),D=[],T=0;T<E;T++)D[T]=this.i(T)^x.i(T);return new s(D,this.h^x.h)};function V(x){for(var E=x.g.length+1,D=[],T=0;T<E;T++)D[T]=x.i(T)<<1|x.i(T-1)>>>31;return new s(D,x.h)}function B(x,E){var D=E>>5;E%=32;for(var T=x.g.length-D,M=[],N=0;N<T;N++)M[N]=0<E?x.i(N+D)>>>E|x.i(N+D+1)<<32-E:x.i(N+D);return new s(M,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LE=zN.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=l,ho=zN.Integer=s}).apply(typeof jN<"u"?jN:typeof self<"u"?self:typeof window<"u"?window:{});var ym=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},po={};var VE,DG,nu,BE,Vd,_m,UE,jE,zE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,v){return d==Array.prototype||d==Object.prototype||(d[g]=v.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ym=="object"&&ym];for(var g=0;g<d.length;++g){var v=d[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(d,g){if(g)e:{var v=r;d=d.split(".");for(var w=0;w<d.length-1;w++){var k=d[w];if(!(k in v))break e;v=v[k]}d=d[d.length-1],w=v[d],g=g(w),g!=w&&g!=null&&e(v,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var v=0,w=!1,k={next:function(){if(!w&&v<d.length){var L=v++;return{value:g(L,d[L]),done:!1}}return w=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(d){return d||function(){return o(this,function(g,v){return v})}});var s=s||{},a=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function u(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function l(d,g,v){return d.call.apply(d.bind,arguments)}function f(d,g,v){if(!d)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,w),d.apply(g,k)}}return function(){return d.apply(g,arguments)}}function h(d,g,v){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?l:f,h.apply(null,arguments)}function p(d,g){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),d.apply(this,w)}}function m(d,g){function v(){}v.prototype=g.prototype,d.aa=g.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(w,k,L){for(var K=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)K[ot-2]=arguments[ot];return g.prototype[k].apply(w,K)}}function y(d){let g=d.length;if(0<g){let v=Array(g);for(let w=0;w<g;w++)v[w]=d[w];return v}return[]}function _(d,g){for(let v=1;v<arguments.length;v++){let w=arguments[v];if(c(w)){let k=d.length||0,L=w.length||0;d.length=k+L;for(let K=0;K<L;K++)d[k+K]=w[K]}else d.push(w)}}class A{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function b(d){return/^[\s\xa0]*$/.test(d)}function R(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function O(d){return O[" "](d),d}O[" "]=function(){};var V=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function B(d,g,v){for(let w in d)g.call(v,d[w],w,d)}function x(d,g){for(let v in d)g.call(void 0,d[v],v,d)}function E(d){let g={};for(let v in d)g[v]=d[v];return g}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(d,g){let v,w;for(let k=1;k<arguments.length;k++){w=arguments[k];for(v in w)d[v]=w[v];for(let L=0;L<D.length;L++)v=D[L],Object.prototype.hasOwnProperty.call(w,v)&&(d[v]=w[v])}}function M(d){var g=1;d=d.split(":");let v=[];for(;0<g&&d.length;)v.push(d.shift()),g--;return d.length&&v.push(d.join(":")),v}function N(d){a.setTimeout(()=>{throw d},0)}function S(){var d=d0;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Rt{constructor(){this.h=this.g=null}add(g,v){let w=Xn.get();w.set(g,v),this.h?this.h.next=w:this.g=w,this.h=w}}var Xn=new A(()=>new qu,d=>d.reset());class qu{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ui,ji=!1,d0=new Rt,mx=()=>{let d=a.Promise.resolve(void 0);Ui=()=>{d.then(aL)}};var aL=()=>{for(var d;d=S();){try{d.h.call(d.g)}catch(v){N(v)}var g=Xn;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}ji=!1};function No(){this.s=this.s,this.C=this.C}No.prototype.s=!1,No.prototype.ma=function(){this.s||(this.s=!0,this.N())},No.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function wn(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}wn.prototype.h=function(){this.defaultPrevented=!0};var cL=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let v=()=>{};a.addEventListener("test",v,g),a.removeEventListener("test",v,g)}catch{}return d}();function Ku(d,g){if(wn.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,w=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(V){e:{try{O(g.nodeName);var k=!0;break e}catch{}k=!1}k||(g=null)}}else v=="mouseover"?g=d.fromElement:v=="mouseout"&&(g=d.toElement);this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:uL[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ku.aa.h.call(this)}}m(Ku,wn);var uL={2:"touch",3:"pen",4:"mouse"};Ku.prototype.h=function(){Ku.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Zu="closure_listenable_"+(1e6*Math.random()|0),lL=0;function dL(d,g,v,w,k){this.listener=d,this.proxy=null,this.src=g,this.type=v,this.capture=!!w,this.ha=k,this.key=++lL,this.da=this.fa=!1}function Vf(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Bf(d){this.src=d,this.g={},this.h=0}Bf.prototype.add=function(d,g,v,w,k){var L=d.toString();d=this.g[L],d||(d=this.g[L]=[],this.h++);var K=h0(d,g,w,k);return-1<K?(g=d[K],v||(g.fa=!1)):(g=new dL(g,this.src,L,!!w,k),g.fa=v,d.push(g)),g};function f0(d,g){var v=g.type;if(v in d.g){var w=d.g[v],k=Array.prototype.indexOf.call(w,g,void 0),L;(L=0<=k)&&Array.prototype.splice.call(w,k,1),L&&(Vf(g),d.g[v].length==0&&(delete d.g[v],d.h--))}}function h0(d,g,v,w){for(var k=0;k<d.length;++k){var L=d[k];if(!L.da&&L.listener==g&&L.capture==!!v&&L.ha==w)return k}return-1}var p0="closure_lm_"+(1e6*Math.random()|0),g0={};function vx(d,g,v,w,k){if(w&&w.once)return _x(d,g,v,w,k);if(Array.isArray(g)){for(var L=0;L<g.length;L++)vx(d,g[L],v,w,k);return null}return v=_0(v),d&&d[Zu]?d.K(g,v,u(w)?!!w.capture:!!w,k):yx(d,g,v,!1,w,k)}function yx(d,g,v,w,k,L){if(!g)throw Error("Invalid event type");var K=u(k)?!!k.capture:!!k,ot=v0(d);if(ot||(d[p0]=ot=new Bf(d)),v=ot.add(g,v,w,K,L),v.proxy)return v;if(w=fL(),v.proxy=w,w.src=d,w.listener=v,d.addEventListener)cL||(k=K),k===void 0&&(k=!1),d.addEventListener(g.toString(),w,k);else if(d.attachEvent)d.attachEvent(Ex(g.toString()),w);else if(d.addListener&&d.removeListener)d.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function fL(){function d(v){return g.call(d.src,d.listener,v)}let g=hL;return d}function _x(d,g,v,w,k){if(Array.isArray(g)){for(var L=0;L<g.length;L++)_x(d,g[L],v,w,k);return null}return v=_0(v),d&&d[Zu]?d.L(g,v,u(w)?!!w.capture:!!w,k):yx(d,g,v,!0,w,k)}function wx(d,g,v,w,k){if(Array.isArray(g))for(var L=0;L<g.length;L++)wx(d,g[L],v,w,k);else w=u(w)?!!w.capture:!!w,v=_0(v),d&&d[Zu]?(d=d.i,g=String(g).toString(),g in d.g&&(L=d.g[g],v=h0(L,v,w,k),-1<v&&(Vf(L[v]),Array.prototype.splice.call(L,v,1),L.length==0&&(delete d.g[g],d.h--)))):d&&(d=v0(d))&&(g=d.g[g.toString()],d=-1,g&&(d=h0(g,v,w,k)),(v=-1<d?g[d]:null)&&m0(v))}function m0(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Zu])f0(g.i,d);else{var v=d.type,w=d.proxy;g.removeEventListener?g.removeEventListener(v,w,d.capture):g.detachEvent?g.detachEvent(Ex(v),w):g.addListener&&g.removeListener&&g.removeListener(w),(v=v0(g))?(f0(v,d),v.h==0&&(v.src=null,g[p0]=null)):Vf(d)}}}function Ex(d){return d in g0?g0[d]:g0[d]="on"+d}function hL(d,g){if(d.da)d=!0;else{g=new Ku(g,this);var v=d.listener,w=d.ha||d.src;d.fa&&m0(d),d=v.call(w,g)}return d}function v0(d){return d=d[p0],d instanceof Bf?d:null}var y0="__closure_events_fn_"+(1e9*Math.random()>>>0);function _0(d){return typeof d=="function"?d:(d[y0]||(d[y0]=function(g){return d.handleEvent(g)}),d[y0])}function En(){No.call(this),this.i=new Bf(this),this.M=this,this.F=null}m(En,No),En.prototype[Zu]=!0,En.prototype.removeEventListener=function(d,g,v,w){wx(this,d,g,v,w)};function kn(d,g){var v,w=d.F;if(w)for(v=[];w;w=w.F)v.push(w);if(d=d.M,w=g.type||g,typeof g=="string")g=new wn(g,d);else if(g instanceof wn)g.target=g.target||d;else{var k=g;g=new wn(w,d),T(g,k)}if(k=!0,v)for(var L=v.length-1;0<=L;L--){var K=g.g=v[L];k=Uf(K,w,!0,g)&&k}if(K=g.g=d,k=Uf(K,w,!0,g)&&k,k=Uf(K,w,!1,g)&&k,v)for(L=0;L<v.length;L++)K=g.g=v[L],k=Uf(K,w,!1,g)&&k}En.prototype.N=function(){if(En.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var v=d.g[g],w=0;w<v.length;w++)Vf(v[w]);delete d.g[g],d.h--}}this.F=null},En.prototype.K=function(d,g,v,w){return this.i.add(String(d),g,!1,v,w)},En.prototype.L=function(d,g,v,w){return this.i.add(String(d),g,!0,v,w)};function Uf(d,g,v,w){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var k=!0,L=0;L<g.length;++L){var K=g[L];if(K&&!K.da&&K.capture==v){var ot=K.listener,hn=K.ha||K.src;K.fa&&f0(d.i,K),k=ot.call(hn,w)!==!1&&k}}return k&&!w.defaultPrevented}function Ix(d,g,v){if(typeof d=="function")v&&(d=h(d,v));else if(d&&typeof d.handleEvent=="function")d=h(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function Cx(d){d.g=Ix(()=>{d.g=null,d.i&&(d.i=!1,Cx(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class pL extends No{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Cx(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xu(d){No.call(this),this.h=d,this.g={}}m(Xu,No);var Ax=[];function xx(d){B(d.g,function(g,v){this.g.hasOwnProperty(v)&&m0(g)},d),d.g={}}Xu.prototype.N=function(){Xu.aa.N.call(this),xx(this)},Xu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var w0=a.JSON.stringify,gL=a.JSON.parse,mL=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function E0(){}E0.prototype.h=null;function Dx(d){return d.h||(d.h=d.i())}function bx(){}var Yu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function I0(){wn.call(this,"d")}m(I0,wn);function C0(){wn.call(this,"c")}m(C0,wn);var Ds={},Sx=null;function jf(){return Sx=Sx||new En}Ds.La="serverreachability";function Tx(d){wn.call(this,Ds.La,d)}m(Tx,wn);function Qu(d){let g=jf();kn(g,new Tx(g))}Ds.STAT_EVENT="statevent";function Rx(d,g){wn.call(this,Ds.STAT_EVENT,d),this.stat=g}m(Rx,wn);function Fn(d){let g=jf();kn(g,new Rx(g,d))}Ds.Ma="timingevent";function Mx(d,g){wn.call(this,Ds.Ma,d),this.size=g}m(Mx,wn);function Ju(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function el(){this.g=!0}el.prototype.xa=function(){this.g=!1};function vL(d,g,v,w,k,L){d.info(function(){if(d.g)if(L)for(var K="",ot=L.split("&"),hn=0;hn<ot.length;hn++){var We=ot[hn].split("=");if(1<We.length){var In=We[0];We=We[1];var Cn=In.split("_");K=2<=Cn.length&&Cn[1]=="type"?K+(In+"="+We+"&"):K+(In+"=redacted&")}}else K=null;else K=L;return"XMLHTTP REQ ("+w+") [attempt "+k+"]: "+g+`
`+v+`
`+K})}function yL(d,g,v,w,k,L,K){d.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+k+"]: "+g+`
`+v+`
`+L+" "+K})}function $a(d,g,v,w){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+wL(d,v)+(w?" "+w:"")})}function _L(d,g){d.info(function(){return"TIMEOUT: "+g})}el.prototype.info=function(){};function wL(d,g){if(!d.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var w=v[d];if(!(2>w.length)){var k=w[1];if(Array.isArray(k)&&!(1>k.length)){var L=k[0];if(L!="noop"&&L!="stop"&&L!="close")for(var K=1;K<k.length;K++)k[K]=""}}}}return w0(v)}catch{return g}}var zf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nx={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},A0;function Hf(){}m(Hf,E0),Hf.prototype.g=function(){return new XMLHttpRequest},Hf.prototype.i=function(){return{}},A0=new Hf;function Oo(d,g,v,w){this.j=d,this.i=g,this.l=v,this.R=w||1,this.U=new Xu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ox}function Ox(){this.i=null,this.g="",this.h=!1}var Px={},x0={};function D0(d,g,v){d.L=1,d.v=qf(zi(g)),d.m=v,d.P=!0,kx(d,null)}function kx(d,g){d.F=Date.now(),$f(d),d.A=zi(d.v);var v=d.A,w=d.R;Array.isArray(w)||(w=[String(w)]),Zx(v.i,"t",w),d.C=0,v=d.j.J,d.h=new Ox,d.g=hD(d.j,v?g:null,!d.m),0<d.O&&(d.M=new pL(h(d.Y,d,d.g),d.O)),g=d.U,v=d.g,w=d.ca;var k="readystatechange";Array.isArray(k)||(k&&(Ax[0]=k.toString()),k=Ax);for(var L=0;L<k.length;L++){var K=vx(v,k[L],w||g.handleEvent,!1,g.h||g);if(!K)break;g.g[K.key]=K}g=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Qu(),vL(d.i,d.u,d.A,d.l,d.R,d.m)}Oo.prototype.ca=function(d){d=d.target;let g=this.M;g&&Hi(d)==3?g.j():this.Y(d)},Oo.prototype.Y=function(d){try{if(d==this.g)e:{let Cn=Hi(this.g);var g=this.g.Ba();let qa=this.g.Z();if(!(3>Cn)&&(Cn!=3||this.g&&(this.h.h||this.g.oa()||nD(this.g)))){this.J||Cn!=4||g==7||(g==8||0>=qa?Qu(3):Qu(2)),b0(this);var v=this.g.Z();this.X=v;t:if(Fx(this)){var w=nD(this.g);d="";var k=w.length,L=Hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bs(this),tl(this);var K="";break t}this.h.i=new a.TextDecoder}for(g=0;g<k;g++)this.h.h=!0,d+=this.h.i.decode(w[g],{stream:!(L&&g==k-1)});w.length=0,this.h.g+=d,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=v==200,yL(this.i,this.u,this.A,this.l,this.R,Cn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,hn=this.g;if((ot=hn.g?hn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(ot)){var We=ot;break t}}We=null}if(v=We)$a(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,S0(this,v);else{this.o=!1,this.s=3,Fn(12),bs(this),tl(this);break e}}if(this.P){v=!0;let jr;for(;!this.J&&this.C<K.length;)if(jr=EL(this,K),jr==x0){Cn==4&&(this.s=4,Fn(14),v=!1),$a(this.i,this.l,null,"[Incomplete Response]");break}else if(jr==Px){this.s=4,Fn(15),$a(this.i,this.l,K,"[Invalid Chunk]"),v=!1;break}else $a(this.i,this.l,jr,null),S0(this,jr);if(Fx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Cn!=4||K.length!=0||this.h.h||(this.s=1,Fn(16),v=!1),this.o=this.o&&v,!v)$a(this.i,this.l,K,"[Invalid Chunked Response]"),bs(this),tl(this);else if(0<K.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),P0(In),In.M=!0,Fn(11))}}else $a(this.i,this.l,K,null),S0(this,K);Cn==4&&bs(this),this.o&&!this.J&&(Cn==4?uD(this.j,this):(this.o=!1,$f(this)))}else VL(this.g),v==400&&0<K.indexOf("Unknown SID")?(this.s=3,Fn(12)):(this.s=0,Fn(13)),bs(this),tl(this)}}}catch{}finally{}};function Fx(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function EL(d,g){var v=d.C,w=g.indexOf(`
`,v);return w==-1?x0:(v=Number(g.substring(v,w)),isNaN(v)?Px:(w+=1,w+v>g.length?x0:(g=g.slice(w,w+v),d.C=w+v,g)))}Oo.prototype.cancel=function(){this.J=!0,bs(this)};function $f(d){d.S=Date.now()+d.I,Lx(d,d.I)}function Lx(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ju(h(d.ba,d),g)}function b0(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Oo.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(_L(this.i,this.A),this.L!=2&&(Qu(),Fn(17)),bs(this),this.s=2,tl(this)):Lx(this,this.S-d)};function tl(d){d.j.G==0||d.J||uD(d.j,d)}function bs(d){b0(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,xx(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function S0(d,g){try{var v=d.j;if(v.G!=0&&(v.g==d||T0(v.h,d))){if(!d.K&&T0(v.h,d)&&v.G==3){try{var w=v.Da.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var k=w;if(k[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)Qf(v),Xf(v);else break e;O0(v),Fn(18)}}else v.za=k[1],0<v.za-v.T&&37500>k[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ju(h(v.Za,v),6e3));if(1>=Ux(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ts(v,11)}else if((d.K||v.g==d)&&Qf(v),!b(g))for(k=v.Da.g.parse(g),g=0;g<k.length;g++){let We=k[g];if(v.T=We[0],We=We[1],v.G==2)if(We[0]=="c"){v.K=We[1],v.ia=We[2];let In=We[3];In!=null&&(v.la=In,v.j.info("VER="+v.la));let Cn=We[4];Cn!=null&&(v.Aa=Cn,v.j.info("SVER="+v.Aa));let qa=We[5];qa!=null&&typeof qa=="number"&&0<qa&&(w=1.5*qa,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;let jr=d.g;if(jr){let eh=jr.g?jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eh){var L=w.h;L.g||eh.indexOf("spdy")==-1&&eh.indexOf("quic")==-1&&eh.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(R0(L,L.h),L.h=null))}if(w.D){let k0=jr.g?jr.g.getResponseHeader("X-HTTP-Session-Id"):null;k0&&(w.ya=k0,yt(w.I,w.D,k0))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var K=d;if(w.qa=fD(w,w.J?w.ia:null,w.W),K.K){jx(w.h,K);var ot=K,hn=w.L;hn&&(ot.I=hn),ot.B&&(b0(ot),$f(ot)),w.g=K}else aD(w);0<v.i.length&&Yf(v)}else We[0]!="stop"&&We[0]!="close"||Ts(v,7);else v.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Ts(v,7):N0(v):We[0]!="noop"&&v.l&&v.l.ta(We),v.v=0)}}Qu(4)}catch{}}var IL=class{constructor(d,g){this.g=d,this.map=g}};function Vx(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bx(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ux(d){return d.h?1:d.g?d.g.size:0}function T0(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function R0(d,g){d.g?d.g.add(g):d.h=g}function jx(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Vx.prototype.cancel=function(){if(this.i=zx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function zx(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let v of d.g.values())g=g.concat(v.D);return g}return y(d.i)}function CL(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],v=d.length,w=0;w<v;w++)g.push(d[w]);return g}g=[],v=0;for(w in d)g[v++]=d[w];return g}function AL(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var v=0;v<d;v++)g.push(v);return g}g=[],v=0;for(let w in d)g[v++]=w;return g}}}function Hx(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var v=AL(d),w=CL(d),k=w.length,L=0;L<k;L++)g.call(void 0,w[L],v&&v[L],d)}var $x=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xL(d,g){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var w=d[v].indexOf("="),k=null;if(0<=w){var L=d[v].substring(0,w);k=d[v].substring(w+1)}else L=d[v];g(L,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Ss(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ss){this.h=d.h,Gf(this,d.j),this.o=d.o,this.g=d.g,Wf(this,d.s),this.l=d.l;var g=d.i,v=new il;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),Gx(this,v),this.m=d.m}else d&&(g=String(d).match($x))?(this.h=!1,Gf(this,g[1]||"",!0),this.o=nl(g[2]||""),this.g=nl(g[3]||"",!0),Wf(this,g[4]),this.l=nl(g[5]||"",!0),Gx(this,g[6]||"",!0),this.m=nl(g[7]||"")):(this.h=!1,this.i=new il(null,this.h))}Ss.prototype.toString=function(){var d=[],g=this.j;g&&d.push(rl(g,Wx,!0),":");var v=this.g;return(v||g=="file")&&(d.push("//"),(g=this.o)&&d.push(rl(g,Wx,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(rl(v,v.charAt(0)=="/"?SL:bL,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",rl(v,RL)),d.join("")};function zi(d){return new Ss(d)}function Gf(d,g,v){d.j=v?nl(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Wf(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Gx(d,g,v){g instanceof il?(d.i=g,ML(d.i,d.h)):(v||(g=rl(g,TL)),d.i=new il(g,d.h))}function yt(d,g,v){d.i.set(g,v)}function qf(d){return yt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function nl(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function rl(d,g,v){return typeof d=="string"?(d=encodeURI(d).replace(g,DL),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function DL(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Wx=/[#\/\?@]/g,bL=/[#\?:]/g,SL=/[#\?]/g,TL=/[#\?@]/g,RL=/#/g;function il(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Po(d){d.g||(d.g=new Map,d.h=0,d.i&&xL(d.i,function(g,v){d.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=il.prototype,n.add=function(d,g){Po(this),this.i=null,d=Ga(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(g),this.h+=1,this};function qx(d,g){Po(d),g=Ga(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Kx(d,g){return Po(d),g=Ga(d,g),d.g.has(g)}n.forEach=function(d,g){Po(this),this.g.forEach(function(v,w){v.forEach(function(k){d.call(g,k,w,this)},this)},this)},n.na=function(){Po(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let w=0;w<g.length;w++){let k=d[w];for(let L=0;L<k.length;L++)v.push(g[w])}return v},n.V=function(d){Po(this);let g=[];if(typeof d=="string")Kx(this,d)&&(g=g.concat(this.g.get(Ga(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)g=g.concat(d[v])}return g},n.set=function(d,g){return Po(this),this.i=null,d=Ga(this,d),Kx(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},n.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function Zx(d,g,v){qx(d,g),0<v.length&&(d.i=null,d.g.set(Ga(d,g),y(v)),d.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var w=g[v];let L=encodeURIComponent(String(w)),K=this.V(w);for(w=0;w<K.length;w++){var k=L;K[w]!==""&&(k+="="+encodeURIComponent(String(K[w]))),d.push(k)}}return this.i=d.join("&")};function Ga(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function ML(d,g){g&&!d.j&&(Po(d),d.i=null,d.g.forEach(function(v,w){var k=w.toLowerCase();w!=k&&(qx(this,w),Zx(this,k,v))},d)),d.j=g}function NL(d,g){let v=new el;if(a.Image){let w=new Image;w.onload=p(ko,v,"TestLoadImage: loaded",!0,g,w),w.onerror=p(ko,v,"TestLoadImage: error",!1,g,w),w.onabort=p(ko,v,"TestLoadImage: abort",!1,g,w),w.ontimeout=p(ko,v,"TestLoadImage: timeout",!1,g,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=d}else g(!1)}function OL(d,g){let v=new el,w=new AbortController,k=setTimeout(()=>{w.abort(),ko(v,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:w.signal}).then(L=>{clearTimeout(k),L.ok?ko(v,"TestPingServer: ok",!0,g):ko(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(k),ko(v,"TestPingServer: error",!1,g)})}function ko(d,g,v,w,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),w(v)}catch{}}function PL(){this.g=new mL}function kL(d,g,v){let w=v||"";try{Hx(d,function(k,L){let K=k;u(k)&&(K=w0(k)),g.push(w+L+"="+encodeURIComponent(K))})}catch(k){throw g.push(w+"type="+encodeURIComponent("_badmap")),k}}function ol(d){this.l=d.Ub||null,this.j=d.eb||!1}m(ol,E0),ol.prototype.g=function(){return new Kf(this.l,this.j)},ol.prototype.i=function(d){return function(){return d}}({});function Kf(d,g){En.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Kf,En),n=Kf.prototype,n.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,al(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sl(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,al(this)),this.g&&(this.readyState=3,al(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xx(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xx(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?sl(this):al(this),this.readyState==3&&Xx(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,sl(this))},n.Qa=function(d){this.g&&(this.response=d,sl(this))},n.ga=function(){this.g&&sl(this)};function sl(d){d.readyState=4,d.l=null,d.j=null,d.v=null,al(d)}n.setRequestHeader=function(d,g){this.u.append(d,g)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=g.next();return d.join(`\r
`)};function al(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Kf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Yx(d){let g="";return B(d,function(v,w){g+=w,g+=":",g+=v,g+=`\r
`}),g}function M0(d,g,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=Yx(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):yt(d,g,v))}function Mt(d){En.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Mt,En);var FL=/^https?$/i,LL=["POST","PUT"];n=Mt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,g,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():A0.g(),this.v=this.o?Dx(this.o):Dx(A0),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(L){Qx(this,L);return}if(d=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var k in w)v.set(k,w[k]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let L of w.keys())v.set(L,w.get(L));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(L=>L.toLowerCase()=="content-type"),k=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(LL,g,void 0))||w||k||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,K]of v)this.g.setRequestHeader(L,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tD(this),this.u=!0,this.g.send(d),this.u=!1}catch(L){Qx(this,L)}};function Qx(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,Jx(d),Zf(d)}function Jx(d){d.A||(d.A=!0,kn(d,"complete"),kn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,kn(this,"complete"),kn(this,"abort"),Zf(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zf(this,!0)),Mt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?eD(this):this.bb())},n.bb=function(){eD(this)};function eD(d){if(d.h&&typeof s<"u"&&(!d.v[1]||Hi(d)!=4||d.Z()!=2)){if(d.u&&Hi(d)==4)Ix(d.Ea,0,d);else if(kn(d,"readystatechange"),Hi(d)==4){d.h=!1;try{let K=d.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var w;if(w=K===0){var k=String(d.D).match($x)[1]||null;!k&&a.self&&a.self.location&&(k=a.self.location.protocol.slice(0,-1)),w=!FL.test(k?k.toLowerCase():"")}v=w}if(v)kn(d,"complete"),kn(d,"success");else{d.m=6;try{var L=2<Hi(d)?d.g.statusText:""}catch{L=""}d.l=L+" ["+d.Z()+"]",Jx(d)}}finally{Zf(d)}}}}function Zf(d,g){if(d.g){tD(d);let v=d.g,w=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||kn(d,"ready");try{v.onreadystatechange=w}catch{}}}function tD(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Hi(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Hi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),gL(g)}};function nD(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function VL(d){let g={};d=(d.g&&2<=Hi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<d.length;w++){if(b(d[w]))continue;var v=M(d[w]);let k=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let L=g[k]||[];g[k]=L,L.push(v)}x(g,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cl(d,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||g}function rD(d){this.Aa=0,this.i=[],this.j=new el,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cl("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cl("baseRetryDelayMs",5e3,d),this.cb=cl("retryDelaySeedMs",1e4,d),this.Wa=cl("forwardChannelMaxRetries",2,d),this.wa=cl("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Vx(d&&d.concurrentRequestLimit),this.Da=new PL,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=rD.prototype,n.la=8,n.G=1,n.connect=function(d,g,v,w){Fn(0),this.W=d,this.H=g||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=fD(this,null,this.W),Yf(this)};function N0(d){if(iD(d),d.G==3){var g=d.U++,v=zi(d.I);if(yt(v,"SID",d.K),yt(v,"RID",g),yt(v,"TYPE","terminate"),ul(d,v),g=new Oo(d,d.j,g),g.L=2,g.v=qf(zi(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=g.v,v=!0),v||(g.g=hD(g.j,null),g.g.ea(g.v)),g.F=Date.now(),$f(g)}dD(d)}function Xf(d){d.g&&(P0(d),d.g.cancel(),d.g=null)}function iD(d){Xf(d),d.u&&(a.clearTimeout(d.u),d.u=null),Qf(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Yf(d){if(!Bx(d.h)&&!d.s){d.s=!0;var g=d.Ga;Ui||mx(),ji||(Ui(),ji=!0),d0.add(g,d),d.B=0}}function BL(d,g){return Ux(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ju(h(d.Ga,d,g),lD(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let k=new Oo(this,this.j,d),L=this.o;if(this.S&&(L?(L=E(L),T(L,this.S)):L=this.S),this.m!==null||this.O||(k.H=L,L=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=sD(this,k,g),v=zi(this.I),yt(v,"RID",d),yt(v,"CVER",22),this.D&&yt(v,"X-HTTP-Session-Id",this.D),ul(this,v),L&&(this.O?g="headers="+encodeURIComponent(String(Yx(L)))+"&"+g:this.m&&M0(v,this.m,L)),R0(this.h,k),this.Ua&&yt(v,"TYPE","init"),this.P?(yt(v,"$req",g),yt(v,"SID","null"),k.T=!0,D0(k,v,null)):D0(k,v,g),this.G=2}}else this.G==3&&(d?oD(this,d):this.i.length==0||Bx(this.h)||oD(this))};function oD(d,g){var v;g?v=g.l:v=d.U++;let w=zi(d.I);yt(w,"SID",d.K),yt(w,"RID",v),yt(w,"AID",d.T),ul(d,w),d.m&&d.o&&M0(w,d.m,d.o),v=new Oo(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),g&&(d.i=g.D.concat(d.i)),g=sD(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),R0(d.h,v),D0(v,w,g)}function ul(d,g){d.H&&B(d.H,function(v,w){yt(g,w,v)}),d.l&&Hx({},function(v,w){yt(g,w,v)})}function sD(d,g,v){v=Math.min(d.i.length,v);var w=d.l?h(d.l.Na,d.l,d):null;e:{var k=d.i;let L=-1;for(;;){let K=["count="+v];L==-1?0<v?(L=k[0].g,K.push("ofs="+L)):L=0:K.push("ofs="+L);let ot=!0;for(let hn=0;hn<v;hn++){let We=k[hn].g,In=k[hn].map;if(We-=L,0>We)L=Math.max(0,k[hn].g-100),ot=!1;else try{kL(In,K,"req"+We+"_")}catch{w&&w(In)}}if(ot){w=K.join("&");break e}}}return d=d.i.splice(0,v),g.D=d,w}function aD(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;Ui||mx(),ji||(Ui(),ji=!0),d0.add(g,d),d.v=0}}function O0(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ju(h(d.Fa,d),lD(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,cD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ju(h(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Fn(10),Xf(this),cD(this))};function P0(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function cD(d){d.g=new Oo(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=zi(d.qa);yt(g,"RID","rpc"),yt(g,"SID",d.K),yt(g,"AID",d.T),yt(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&yt(g,"TO",d.ja),yt(g,"TYPE","xmlhttp"),ul(d,g),d.m&&d.o&&M0(g,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=qf(zi(g)),v.m=null,v.P=!0,kx(v,d)}n.Za=function(){this.C!=null&&(this.C=null,Xf(this),O0(this),Fn(19))};function Qf(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function uD(d,g){var v=null;if(d.g==g){Qf(d),P0(d),d.g=null;var w=2}else if(T0(d.h,g))v=g.D,jx(d.h,g),w=1;else return;if(d.G!=0){if(g.o)if(w==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var k=d.B;w=jf(),kn(w,new Mx(w,v)),Yf(d)}else aD(d);else if(k=g.s,k==3||k==0&&0<g.X||!(w==1&&BL(d,g)||w==2&&O0(d)))switch(v&&0<v.length&&(g=d.h,g.i=g.i.concat(v)),k){case 1:Ts(d,5);break;case 4:Ts(d,10);break;case 3:Ts(d,6);break;default:Ts(d,2)}}}function lD(d,g){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*g}function Ts(d,g){if(d.j.info("Error code "+g),g==2){var v=h(d.fb,d),w=d.Xa;let k=!w;w=new Ss(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gf(w,"https"),qf(w),k?NL(w.toString(),v):OL(w.toString(),v)}else Fn(2);d.G=0,d.l&&d.l.sa(g),dD(d),iD(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Fn(2)):(this.j.info("Failed to ping google.com"),Fn(1))};function dD(d){if(d.G=0,d.ka=[],d.l){let g=zx(d.h);(g.length!=0||d.i.length!=0)&&(_(d.ka,g),_(d.ka,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.ra()}}function fD(d,g,v){var w=v instanceof Ss?zi(v):new Ss(v);if(w.g!="")g&&(w.g=g+"."+w.g),Wf(w,w.s);else{var k=a.location;w=k.protocol,g=g?g+"."+k.hostname:k.hostname,k=+k.port;var L=new Ss(null);w&&Gf(L,w),g&&(L.g=g),k&&Wf(L,k),v&&(L.l=v),w=L}return v=d.D,g=d.ya,v&&g&&yt(w,v,g),yt(w,"VER",d.la),ul(d,w),w}function hD(d,g,v){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Mt(new ol({eb:v})):new Mt(d.pa),g.Ha(d.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pD(){}n=pD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Jf(){}Jf.prototype.g=function(d,g){return new ur(d,g)};function ur(d,g){En.call(this),this.g=new rD(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!b(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!b(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Wa(this)}m(ur,En),ur.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ur.prototype.close=function(){N0(this.g)},ur.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=w0(d),d=v);g.i.push(new IL(g.Ya++,d)),g.G==3&&Yf(g)},ur.prototype.N=function(){this.g.l=null,delete this.j,N0(this.g),delete this.g,ur.aa.N.call(this)};function gD(d){I0.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let v in g){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}m(gD,I0);function mD(){C0.call(this),this.status=1}m(mD,C0);function Wa(d){this.g=d}m(Wa,pD),Wa.prototype.ua=function(){kn(this.g,"a")},Wa.prototype.ta=function(d){kn(this.g,new gD(d))},Wa.prototype.sa=function(d){kn(this.g,new mD)},Wa.prototype.ra=function(){kn(this.g,"b")},Jf.prototype.createWebChannel=Jf.prototype.g,ur.prototype.send=ur.prototype.o,ur.prototype.open=ur.prototype.m,ur.prototype.close=ur.prototype.close,zE=po.createWebChannelTransport=function(){return new Jf},jE=po.getStatEventTarget=function(){return jf()},UE=po.Event=Ds,_m=po.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zf.NO_ERROR=0,zf.TIMEOUT=8,zf.HTTP_ERROR=6,Vd=po.ErrorCode=zf,Nx.COMPLETE="complete",BE=po.EventType=Nx,bx.EventType=Yu,Yu.OPEN="a",Yu.CLOSE="b",Yu.ERROR="c",Yu.MESSAGE="d",En.prototype.listen=En.prototype.K,nu=po.WebChannel=bx,DG=po.FetchXmlHttpFactory=ol,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,VE=po.XhrIo=Mt}).apply(typeof ym<"u"?ym:typeof self<"u"?self:typeof window<"u"?window:{});var HN="@firebase/firestore",$N="4.7.10";var cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");var Cu="11.5.0";var Ea=new Si("@firebase/firestore");function ru(){return Ea.logLevel}function Y(n,...e){if(Ea.logLevel<=Pe.DEBUG){let t=e.map(TC);Ea.debug(`Firestore (${Cu}): ${n}`,...t)}}function mo(n,...e){if(Ea.logLevel<=Pe.ERROR){let t=e.map(TC);Ea.error(`Firestore (${Cu}): ${n}`,...t)}}function lu(n,...e){if(Ea.logLevel<=Pe.WARN){let t=e.map(TC);Ea.warn(`Firestore (${Cu}): ${n}`,...t)}}function TC(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ue(n="Unexpected state"){let e=`FIRESTORE (${Cu}) INTERNAL ASSERTION FAILED: `+n;throw mo(e),new Error(e)}function Ye(n,e){n||ue()}function ve(n,e){return n}var j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Q=class extends Sn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var oi=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Dm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},qE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cn.UNAUTHENTICATED))}shutdown(){}},KE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ZE=class{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ye(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new oi,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>I(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new oi)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string"),new Dm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string"),new cn(e)}},XE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},YE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new XE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},bm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},QE=class{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,mn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ye(this.o===void 0);let r=o=>{o.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,Y("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new bm(this.V));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ye(typeof t.token=="string"),this.R=t.token,new bm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function bG(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function kO(){return new TextEncoder}var Sm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=bG(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Oe(n,e){return n<e?-1:n>e?1:0}function JE(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Oe(r,i);{let o=kO(),s=SG(o.encode(GN(n,t)),o.encode(GN(e,t)));return s!==0?s:Oe(r,i)}}t+=r>65535?2:1}return Oe(n.length,e.length)}function GN(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function SG(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Oe(n[t],e[t]);return Oe(n.length,e.length)}function du(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var WN=-62135596800,qN=1e6,vn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*qN);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<WN)throw new Q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qN}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-WN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var we=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new vn(0,0))}static max(){return new n(new vn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var KN="__name__",Tm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ue(),r===void 0?r=e.length-t:r>e.length-t&&ue(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Oe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):JE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ho.fromString(e.substring(4,e.length-2))}},Dt=class n extends Tm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Q(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},TG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_r=class n extends Tm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return TG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===KN}static keyField(){return new n([KN])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new Q(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Q(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var oe=class n{constructor(e){this.path=e}static fromPath(e){return new n(Dt.fromString(e))}static fromName(e){return new n(Dt.fromString(e).popFirst(5))}static empty(){return new n(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Dt(e.slice()))}};var $d=-1,eI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};eI.UNKNOWN_ID=-1;function RG(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=we.fromTimestamp(r===1e9?new vn(t+1,0):new vn(t,r));return new Ia(i,oe.empty(),e)}function MG(n){return new Ia(n.readTime,n.key,$d)}var Ia=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(we.min(),oe.empty(),$d)}static max(){return new n(we.max(),oe.empty(),$d)}};function NG(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=oe.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}var OG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Au(n){return I(this,null,function*(){if(n.code!==j.FAILED_PRECONDITION||n.message!==OG)throw n;Y("LocalStore","Unexpectedly lost primary lease")})}var H=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(l=>{s[u]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function PG(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xu(n){return n.name==="IndexedDbTransactionError"}var RC=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this._e&&this._e(t),t}}n.ae=-1;return n})(),MC=-1;function av(n){return n==null}function Gd(n){return n===0&&1/n==-1/0}function kG(n){return typeof n=="number"&&Number.isInteger(n)&&!Gd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var FO="";function FG(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ZN(e)),e=LG(n.get(t),e);return ZN(e)}function LG(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case FO:t+="";break;default:t+=o}}return t}function ZN(n){return n+FO+""}var VG="remoteDocuments",LO="owner";var VO="mutationQueues";var BO="mutations";var UO="documentMutations",BG="remoteDocumentsV14";var jO="remoteDocumentGlobal";var zO="targets";var HO="targetDocuments";var $O="targetGlobal",GO="collectionParents";var WO="clientMetadata";var qO="bundles";var KO="namedQueries";var UG="indexConfiguration";var jG="indexState";var zG="indexEntries";var ZO="documentOverlays";var HG="globals";var $G=[VO,BO,UO,VG,zO,LO,$O,HO,WO,jO,GO,qO,KO],epe=[...$G,ZO],GG=[VO,BO,UO,BG,zO,LO,$O,HO,WO,jO,GO,qO,KO,ZO],WG=GG,qG=[...WG,UG,jG,zG];var tpe=[...qG,HG];function XN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ta(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function XO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Pt=class n{constructor(e,t){this.comparator=e,this.root=t||Oi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Oi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new au(this.root,e,this.comparator,!1)}getReverseIterator(){return new au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new au(this.root,e,this.comparator,!0)}},au=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Oi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();let e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}};Oi.EMPTY=null,Oi.RED=!0,Oi.BLACK=!1;Oi.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Oi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var un=class n{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rm(this.data.getIterator())}getIteratorFrom(e){return new Rm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Rm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ni=class n{constructor(e){this.fields=e,e.sort(_r.comparator)}static empty(){return new n([])}unionWith(e){let t=new un(_r.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return du(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Mm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Rn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Mm("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Rn.EMPTY_BYTE_STRING=new Rn("");var KG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(n){if(Ye(!!n),typeof n=="string"){let e=0,t=KG.exec(n);if(Ye(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yo(n){return typeof n=="string"?Rn.fromBase64String(n):Rn.fromUint8Array(n)}var YO="server_timestamp",QO="__type__",JO="__previous_value__",eP="__local_write_time__";function NC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[QO])===null||t===void 0?void 0:t.stringValue)===YO}function cv(n){let e=n.mapValue.fields[JO];return NC(e)?cv(e):e}function Wd(n){let e=vo(n.mapValue.fields[eP].timestampValue);return new vn(e.seconds,e.nanos)}var nI=class{constructor(e,t,r,i,o,s,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Nm="(default)",Om=class n{constructor(e,t){this.projectId=e,this.database=t||Nm}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Nm}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var OC="__type__",tP="__max__",wm={mapValue:{fields:{__type__:{stringValue:tP}}}},PC="__vector__",fu="value";function fs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?NC(n)?4:rP(n)?9007199254740991:nP(n)?10:11:ue()}function Fi(n,e){if(n===e)return!0;let t=fs(n);if(t!==fs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wd(n).isEqual(Wd(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=vo(i.timestampValue),a=vo(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return yo(i.bytesValue).isEqual(yo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return It(i.geoPointValue.latitude)===It(o.geoPointValue.latitude)&&It(i.geoPointValue.longitude)===It(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return It(i.integerValue)===It(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=It(i.doubleValue),a=It(o.doubleValue);return s===a?Gd(s)===Gd(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return du(n.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(XN(s)!==XN(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Fi(s[c],a[c])))return!1;return!0}(n,e);default:return ue()}}function qd(n,e){return(n.values||[]).find(t=>Fi(t,e))!==void 0}function hu(n,e){if(n===e)return 0;let t=fs(n),r=fs(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=It(o.integerValue||o.doubleValue),c=It(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return YN(n.timestampValue,e.timestampValue);case 4:return YN(Wd(n),Wd(e));case 5:return JE(n.stringValue,e.stringValue);case 6:return function(o,s){let a=yo(o),c=yo(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=Oe(a[u],c[u]);if(l!==0)return l}return Oe(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Oe(It(o.latitude),It(s.latitude));return a!==0?a:Oe(It(o.longitude),It(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return QN(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,l;let f=o.fields||{},h=s.fields||{},p=(a=f[fu])===null||a===void 0?void 0:a.arrayValue,m=(c=h[fu])===null||c===void 0?void 0:c.arrayValue,y=Oe(((u=p?.values)===null||u===void 0?void 0:u.length)||0,((l=m?.values)===null||l===void 0?void 0:l.length)||0);return y!==0?y:QN(p,m)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===wm.mapValue&&s===wm.mapValue)return 0;if(o===wm.mapValue)return 1;if(s===wm.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let f=0;f<c.length&&f<l.length;++f){let h=JE(c[f],l[f]);if(h!==0)return h;let p=hu(a[c[f]],u[l[f]]);if(p!==0)return p}return Oe(c.length,l.length)}(n.mapValue,e.mapValue);default:throw ue()}}function YN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);let t=vo(n),r=vo(e),i=Oe(t.seconds,r.seconds);return i!==0?i:Oe(t.nanos,r.nanos)}function QN(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=hu(t[i],r[i]);if(o)return o}return Oe(t.length,r.length)}function pu(n){return rI(n)}function rI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=vo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return yo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return oe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=rI(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${rI(t.fields[s])}`;return i+"}"}(n.mapValue):ue()}function Cm(n){switch(fs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=cv(n);return e?16+Cm(e):16;case 5:return 2*n.stringValue.length;case 6:return yo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Cm(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ta(r.fields,(o,s)=>{i+=o.length+Cm(s)}),i}(n.mapValue);default:throw ue()}}function JN(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iI(n){return!!n&&"integerValue"in n}function kC(n){return!!n&&"arrayValue"in n}function eO(n){return!!n&&"nullValue"in n}function tO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Am(n){return!!n&&"mapValue"in n}function nP(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[OC])===null||t===void 0?void 0:t.stringValue)===PC}function Ud(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ta(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ud(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ud(n.arrayValue.values[t]);return e}return Object.assign({},n)}function rP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tP}var rpe={mapValue:{fields:{[OC]:{stringValue:PC},[fu]:{arrayValue:{}}}}};var ii=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Am(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ud(t)}setAll(e){let t=_r.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Ud(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Am(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Am(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ta(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Ud(this.value))}};function iP(n){let e=[];return Ta(n.fields,(t,r)=>{let i=new _r([t]);if(Am(r)){let o=iP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ni(e)}var si=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,we.min(),we.min(),we.min(),ii.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,we.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,we.min(),we.min(),ii.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,we.min(),we.min(),ii.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var gu=class{constructor(e,t){this.position=e,this.inclusive=t}};function nO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=oe.comparator(oe.fromName(s.referenceValue),t.key):r=hu(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function rO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fi(n.position[t],e.position[t]))return!1;return!0}var mu=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function ZG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Pm=class{},Zt=class n extends Pm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new sI(e,t,r):t==="array-contains"?new uI(e,r):t==="in"?new lI(e,r):t==="not-in"?new dI(e,r):t==="array-contains-any"?new fI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new aI(e,r):new cI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(hu(t,this.value)):t!==null&&fs(this.value)===fs(t)&&this.matchesComparison(hu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ai=class n extends Pm{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new n(e,t)}matches(e){return oP(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}};function oP(n){return n.op==="and"}function sP(n){return XG(n)&&oP(n)}function XG(n){for(let e of n.filters)if(e instanceof ai)return!1;return!0}function oI(n){if(n instanceof Zt)return n.field.canonicalString()+n.op.toString()+pu(n.value);if(sP(n))return n.filters.map(e=>oI(e)).join(",");{let e=n.filters.map(t=>oI(t)).join(",");return`${n.op}(${e})`}}function aP(n,e){return n instanceof Zt?function(r,i){return i instanceof Zt&&r.op===i.op&&r.field.isEqual(i.field)&&Fi(r.value,i.value)}(n,e):n instanceof ai?function(r,i){return i instanceof ai&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&aP(s,i.filters[a]),!0):!1}(n,e):void ue()}function cP(n){return n instanceof Zt?function(t){return`${t.field.canonicalString()} ${t.op} ${pu(t.value)}`}(n):n instanceof ai?function(t){return t.op.toString()+" {"+t.getFilters().map(cP).join(" ,")+"}"}(n):"Filter"}var sI=class extends Zt{constructor(e,t,r){super(e,t,r),this.key=oe.fromName(r.referenceValue)}matches(e){let t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}},aI=class extends Zt{constructor(e,t){super(e,"in",t),this.keys=uP("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},cI=class extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=uP("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function uP(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>oe.fromName(r.referenceValue))}var uI=class extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return kC(t)&&qd(t.arrayValue,this.value)}},lI=class extends Zt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&qd(this.value.arrayValue,t)}},dI=class extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(qd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!qd(this.value.arrayValue,t)}},fI=class extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!kC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qd(this.value.arrayValue,r))}};var hI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.le=null}};function iO(n,e=null,t=[],r=[],i=null,o=null,s=null){return new hI(n,e,t,r,i,o,s)}function FC(n){let e=ve(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>oI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),av(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>pu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>pu(r)).join(",")),e.le=t}return e.le}function LC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ZG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!aP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!rO(n.startAt,e.startAt)&&rO(n.endAt,e.endAt)}function pI(n){return oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ca=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}};function YG(n,e,t,r,i,o,s,a){return new Ca(n,e,t,r,i,o,s,a)}function uv(n){return new Ca(n)}function oO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lP(n){return n.collectionGroup!==null}function jd(n){let e=ve(n);if(e.he===null){e.he=[];let t=new Set;for(let o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new un(_r.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new mu(o,r))}),t.has(_r.keyField().canonicalString())||e.he.push(new mu(_r.keyField(),r))}return e.he}function Pi(n){let e=ve(n);return e.Pe||(e.Pe=QG(e,jd(n))),e.Pe}function QG(n,e){if(n.limitType==="F")return iO(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new mu(i.field,o)});let t=n.endAt?new gu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new gu(n.startAt.position,n.startAt.inclusive):null;return iO(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function gI(n,e){let t=n.filters.concat([e]);return new Ca(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function mI(n,e,t){return new Ca(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lv(n,e){return LC(Pi(n),Pi(e))&&n.limitType===e.limitType}function dP(n){return`${FC(Pi(n))}|lt:${n.limitType}`}function iu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>cP(i)).join(", ")}]`),av(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>pu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>pu(i)).join(",")),`Target(${r})`}(Pi(n))}; limitType=${n.limitType})`}function dv(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):oe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of jd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=nO(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,jd(r),i)||r.endAt&&!function(s,a,c){let u=nO(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,jd(r),i))}(n,e)}function JG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fP(n){return(e,t)=>{let r=!1;for(let i of jd(n)){let o=eW(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function eW(n,e,t){let r=n.field.isKeyField()?oe.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?hu(c,u):ue()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}var _o=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ta(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return XO(this.inner)}size(){return this.innerSize}};var tW=new Pt(oe.comparator);function wo(){return tW}var hP=new Pt(oe.comparator);function Bd(...n){let e=hP;for(let t of n)e=e.insert(t.key,t);return e}function pP(n){let e=hP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ya(){return zd()}function gP(){return zd()}function zd(){return new _o(n=>n.toString(),(n,e)=>n.isEqual(e))}var nW=new Pt(oe.comparator),rW=new un(oe.comparator);function Le(...n){let e=rW;for(let t of n)e=e.add(t);return e}var iW=new un(Oe);function oW(){return iW}function VC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gd(e)?"-0":e}}function mP(n){return{integerValue:""+n}}function sW(n,e){return kG(e)?mP(e):VC(n,e)}var vu=class{constructor(){this._=void 0}};function aW(n,e,t){return n instanceof yu?function(i,o){let s={fields:{[QO]:{stringValue:YO},[eP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&NC(o)&&(o=cv(o)),o&&(s.fields[JO]=o),{mapValue:s}}(t,e):n instanceof Aa?yP(n,e):n instanceof xa?_P(n,e):function(i,o){let s=vP(i,o),a=sO(s)+sO(i.Ie);return iI(s)&&iI(i.Ie)?mP(a):VC(i.serializer,a)}(n,e)}function cW(n,e,t){return n instanceof Aa?yP(n,e):n instanceof xa?_P(n,e):t}function vP(n,e){return n instanceof _u?function(r){return iI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var yu=class extends vu{},Aa=class extends vu{constructor(e){super(),this.elements=e}};function yP(n,e){let t=wP(e);for(let r of n.elements)t.some(i=>Fi(i,r))||t.push(r);return{arrayValue:{values:t}}}var xa=class extends vu{constructor(e){super(),this.elements=e}};function _P(n,e){let t=wP(e);for(let r of n.elements)t=t.filter(i=>!Fi(i,r));return{arrayValue:{values:t}}}var _u=class extends vu{constructor(e,t){super(),this.serializer=e,this.Ie=t}};function sO(n){return It(n.integerValue||n.doubleValue)}function wP(n){return kC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function uW(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Aa&&i instanceof Aa||r instanceof xa&&i instanceof xa?du(r.elements,i.elements,Fi):r instanceof _u&&i instanceof _u?Fi(r.Ie,i.Ie):r instanceof yu&&i instanceof yu}(n.transform,e.transform)}var vI=class{constructor(e,t){this.version=e,this.transformResults=t}},go=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function xm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var wu=class{};function EP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Kd(n.key,go.none()):new Da(n.key,n.data,go.none());{let t=n.data,r=ii.empty(),i=new un(_r.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Eo(n.key,r,new Ni(i.toArray()),go.none())}}function lW(n,e,t){n instanceof Da?function(i,o,s){let a=i.value.clone(),c=cO(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Eo?function(i,o,s){if(!xm(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=cO(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(IP(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Hd(n,e,t,r){return n instanceof Da?function(o,s,a,c){if(!xm(o.precondition,s))return a;let u=o.value.clone(),l=uO(o.fieldTransforms,c,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Eo?function(o,s,a,c){if(!xm(o.precondition,s))return a;let u=uO(o.fieldTransforms,c,s),l=s.data;return l.setAll(IP(o)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return xm(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function dW(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=vP(r.transform,i||null);o!=null&&(t===null&&(t=ii.empty()),t.set(r.field,o))}return t||null}function aO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&du(r,i,(o,s)=>uW(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Da=class extends wu{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Eo=class extends wu{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function IP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function cO(n,e,t){let r=new Map;Ye(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,cW(s,a,t[i]))}return r}function uO(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,aW(o,s,e))}return r}var Kd=class extends wu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},yI=class extends wu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var _I=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&lW(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hd(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Hd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=gP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=EP(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&du(this.mutations,e.mutations,(t,r)=>aO(t,r))&&du(this.baseMutations,e.baseMutations,(t,r)=>aO(t,r))}},wI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ye(e.mutations.length===r.length);let i=function(){return nW}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var EI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var II=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var qt,ze;function fW(n){switch(n){case j.OK:return ue();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ue()}}function CP(n){if(n===void 0)return mo("GRPC error has no .code"),j.UNKNOWN;switch(n){case qt.OK:return j.OK;case qt.CANCELLED:return j.CANCELLED;case qt.UNKNOWN:return j.UNKNOWN;case qt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case qt.INTERNAL:return j.INTERNAL;case qt.UNAVAILABLE:return j.UNAVAILABLE;case qt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case qt.NOT_FOUND:return j.NOT_FOUND;case qt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case qt.ABORTED:return j.ABORTED;case qt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case qt.DATA_LOSS:return j.DATA_LOSS;default:return ue()}}(ze=qt||(qt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";var lO=null;var hW=new ho([4294967295,4294967295],0);function dO(n){let e=kO().encode(n),t=new LE;return t.update(e),new Uint8Array(t.digest())}function fO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ho([t,r],0),new ho([i,o],0)]}var CI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _a(`Invalid padding: ${t}`);if(r<0)throw new _a(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _a(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new _a(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=ho.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(ho.fromNumber(r)));return i.compare(hW)===1&&(i=new ho([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;let t=dO(e),[r,i]=fO(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);if(!this.Re(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ee===0)return;let t=dO(e),[r,i]=fO(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);this.Ve(s)}}Ve(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},_a=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var km=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Zd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(we.min(),i,new Pt(Oe),wo(),Le())}},Zd=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Le(),Le(),Le())}};var cu=class{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}},Fm=class{constructor(e,t){this.targetId=e,this.ge=t}},Lm=class{constructor(e,t,r=Rn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Vm=class{constructor(){this.pe=0,this.ye=hO(),this.we=Rn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Le(),t=Le(),r=Le();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ue()}}),new Zd(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=hO()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ye(this.pe>=0)}Le(){this.be=!0,this.Se=!0}},AI=class{constructor(e){this.ke=e,this.qe=new Map,this.Qe=wo(),this.$e=Em(),this.Ue=Em(),this.Ke=new Pt(Oe)}We(e){for(let t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(let t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{let r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ue()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){let t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){let o=i.target;if(pI(o))if(r===0){let s=new oe(o.path);this.ze(t,s,si.newNoDocument(s,we.min()))}else Ye(r===1);else{let s=this.et(t);if(s!==r){let a=this.tt(e),c=a?this.nt(a,e,s):1;if(c!==0){this.Ye(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,u)}lO?.rt(function(l,f,h,p,m){var y,_,A,b,R,O;let V={localCacheCount:l,existenceFilterCount:f.count,databaseId:h.database,projectId:h.projectId},B=f.unchangedNames;return B&&(V.bloomFilter={applied:m===0,hashCount:(y=B?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(b=(A=(_=B?.bits)===null||_===void 0?void 0:_.bitmap)===null||A===void 0?void 0:A.length)!==null&&b!==void 0?b:0,padding:(O=(R=B?.bits)===null||R===void 0?void 0:R.padding)!==null&&O!==void 0?O:0,mightContain:x=>{var E;return(E=p?.mightContain(x))!==null&&E!==void 0&&E}}),V}(s,e.ge,this.ke.it(),a,c))}}}}tt(e){let t=e.ge.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=yo(r).toUint8Array()}catch(c){if(c instanceof Mm)return lu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new CI(s,i,o)}catch(c){return lu(c instanceof _a?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){let r=this.ke.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ke.it(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,o,null),i++)}),i}ot(e){let t=new Map;this.qe.forEach((o,s)=>{let a=this.Xe(s);if(a){if(o.current&&pI(a.target)){let c=new oe(a.target.path);this._t(c).has(s)||this.ut(s,c)||this.ze(s,c,si.newNoDocument(c,e))}o.ve&&(t.set(s,o.Fe()),o.Me())}});let r=Le();this.Ue.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Xe(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(e));let i=new km(e,t,this.Ke,this.Qe,r);return this.Qe=wo(),this.$e=Em(),this.Ue=Em(),this.Ke=new Pt(Oe),i}Ge(e,t){if(!this.Je(e))return;let r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;let i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){let t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Vm,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new un(Oe),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new un(Oe),this.$e=this.$e.insert(e,t)),t}Je(e){let t=this.Xe(e)!==null;return t||Y("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){let t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Vm),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}};function Em(){return new Pt(oe.comparator)}function hO(){return new Pt(oe.comparator)}var pW={asc:"ASCENDING",desc:"DESCENDING"},gW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mW={and:"AND",or:"OR"},xI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function DI(n,e){return n.useProto3Json||av(e)?e:{value:e}}function Bm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vW(n,e){return Bm(n,e.toTimestamp())}function ki(n){return Ye(!!n),we.fromTimestamp(function(t){let r=vo(t);return new vn(r.seconds,r.nanos)}(n))}function BC(n,e){return bI(n,e).canonicalString()}function bI(n,e){let t=function(i){return new Dt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function xP(n){let e=Dt.fromString(n);return Ye(RP(e)),e}function SI(n,e){return BC(n.databaseId,e.path)}function HE(n,e){let t=xP(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new oe(bP(t))}function DP(n,e){return BC(n.databaseId,e)}function yW(n){let e=xP(n);return e.length===4?Dt.emptyPath():bP(e)}function TI(n){return new Dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bP(n){return Ye(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function pO(n,e,t){return{name:SI(n,e),fields:t.value.mapValue.fields}}function _W(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,l){return u.useProto3Json?(Ye(l===void 0||typeof l=="string"),Rn.fromBase64String(l||"")):(Ye(l===void 0||l instanceof Buffer||l instanceof Uint8Array),Rn.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let l=u.code===void 0?j.UNKNOWN:CP(u.code);return new Q(l,u.message||"")}(s);t=new Lm(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=HE(n,r.document.name),o=ki(r.document.updateTime),s=r.document.createTime?ki(r.document.createTime):we.min(),a=new ii({mapValue:{fields:r.document.fields}}),c=si.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];t=new cu(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=HE(n,r.document),o=r.readTime?ki(r.readTime):we.min(),s=si.newNoDocument(i,o),a=r.removedTargetIds||[];t=new cu([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=HE(n,r.document),o=r.removedTargetIds||[];t=new cu([],o,i,null)}else{if(!("filter"in e))return ue();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new II(i,o),a=r.targetId;t=new Fm(a,s)}}return t}function wW(n,e){let t;if(e instanceof Da)t={update:pO(n,e.key,e.value)};else if(e instanceof Kd)t={delete:SI(n,e.key)};else if(e instanceof Eo)t={update:pO(n,e.key,e.data),updateMask:TW(e.fieldMask)};else{if(!(e instanceof yI))return ue();t={verify:SI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof yu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Aa)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _u)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw ue()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:vW(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ue()}(n,e.precondition)),t}function EW(n,e){return n&&n.length>0?(Ye(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?ki(i.updateTime):ki(o);return s.isEqual(we.min())&&(s=ki(o)),new vI(s,i.transformResults||[])}(t,e))):[]}function IW(n,e){return{documents:[DP(n,e.path)]}}function CW(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=DP(n,i);let o=function(u){if(u.length!==0)return TP(ai.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:ou(h.field),direction:DW(h.dir)}}(l))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=DI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ht:t,parent:i}}function AW(n){let e=yW(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ye(r===1);let l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];t.where&&(o=function(f){let h=SP(f);return h instanceof ai&&sP(h)?h.getFilters():[h]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(h=>function(m){return new mu(su(m.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(t.orderBy));let a=null;t.limit&&(a=function(f){let h;return h=typeof f=="object"?f.value:f,av(h)?null:h}(t.limit));let c=null;t.startAt&&(c=function(f){let h=!!f.before,p=f.values||[];return new gu(p,h)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let h=!f.before,p=f.values||[];return new gu(p,h)}(t.endAt)),YG(e,i,s,o,a,"F",c,u)}function xW(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function SP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=su(t.unaryFilter.field);return Zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=su(t.unaryFilter.field);return Zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=su(t.unaryFilter.field);return Zt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=su(t.unaryFilter.field);return Zt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(n):n.fieldFilter!==void 0?function(t){return Zt.create(su(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ai.create(t.compositeFilter.filters.map(r=>SP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue()}}(t.compositeFilter.op))}(n):ue()}function DW(n){return pW[n]}function bW(n){return gW[n]}function SW(n){return mW[n]}function ou(n){return{fieldPath:n.canonicalString()}}function su(n){return _r.fromServerFormat(n.fieldPath)}function TP(n){return n instanceof Zt?function(t){if(t.op==="=="){if(tO(t.value))return{unaryFilter:{field:ou(t.field),op:"IS_NAN"}};if(eO(t.value))return{unaryFilter:{field:ou(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(tO(t.value))return{unaryFilter:{field:ou(t.field),op:"IS_NOT_NAN"}};if(eO(t.value))return{unaryFilter:{field:ou(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ou(t.field),op:bW(t.op),value:t.value}}}(n):n instanceof ai?function(t){let r=t.getFilters().map(i=>TP(i));return r.length===1?r[0]:{compositeFilter:{op:SW(t.op),filters:r}}}(n):ue()}function TW(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function RP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Xd=class n{constructor(e,t,r,i,o=we.min(),s=we.min(),a=Rn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var RI=class{constructor(e){this.Tt=e}};function RW(n){let e=AW({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?mI(e,e.limit,"L"):e}var Um=class{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(It(e.integerValue));else if("doubleValue"in e){let r=It(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),Gd(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=vo(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(yo(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?rP(e)?this.ft(t,Number.MAX_SAFE_INTEGER):nP(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):ue()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){let r=e.fields||{};this.ft(t,55);for(let i of Object.keys(r))this.wt(i,t),this.Rt(r[i],t)}vt(e,t){var r,i;let o=e.fields||{};this.ft(t,53);let s=fu,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(It(a)),this.wt(s,t),this.Rt(o[s],t)}Ft(e,t){let r=e.values||[];this.ft(t,50);for(let i of r)this.Rt(i,t)}Dt(e,t){this.ft(t,37),oe.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}};Um.xt=new Um;var MI=class{constructor(){this.Tn=new NI}addToCollectionParentIndex(e,t){return this.Tn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Ia.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Ia.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}},NI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new un(Dt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new un(Dt.comparator)).toArray()}};var ipe=new Uint8Array(0);var gO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MP=41943040,Pr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Pr.DEFAULT_COLLECTION_PERCENTILE=10,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pr.DEFAULT=new Pr(MP,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pr.DISABLED=new Pr(-1,0,0);var Yd=class n{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new n(0)}static Kn(){return new n(-1)}};var mO="LruGarbageCollector",MW=1048576;function vO([n,e],[t,r]){let i=Oe(n,t);return i===0?Oe(e,r):i}var OI=class{constructor(e){this.Hn=e,this.buffer=new un(vO),this.Jn=0}Yn(){return++this.Jn}Zn(e){let t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();vO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},PI=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Y(mO,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>I(this,null,function*(){this.Xn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){xu(t)?Y(mO,"Ignoring IndexedDB error during garbage collection: ",t):yield Au(t)}yield this.er(3e5)}))}},kI=class{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return H.resolve(RC.ae);let r=new OI(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(gO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gO):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,o,s,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),ru()<=Pe.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function NW(n,e){return new kI(n,e)}var FI=class{constructor(){this.changes=new _o(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,si.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var LI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var VI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Hd(r.mutation,i,Ni.empty(),vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Le()){let i=ya();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Bd();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ya();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Le()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=wo(),s=zd(),a=function(){return zd()}();return t.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Eo)?o=o.insert(u.key,u):l!==void 0?(s.set(u.key,l.mutation.getFieldMask()),Hd(l.mutation,u,l.mutation.getFieldMask(),vn.now())):s.set(u.key,Ni.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,l)=>s.set(u,l)),t.forEach((u,l)=>{var f;return a.set(u,new LI(l,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=zd(),i=new Pt((s,a)=>s-a),o=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let l=r.get(c)||Ni.empty();l=a.applyToLocalView(u,l),r.set(c,l);let f=(i.get(a.batchId)||Le()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,f=gP();l.forEach(h=>{if(!o.has(h)){let p=EP(t.get(h),r.get(h));p!==null&&f.set(h,p),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return H.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):H.resolve(ya()),a=$d,c=o;return s.next(u=>H.forEach(u,(l,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(l)?H.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Le())).next(l=>({batchId:a,changes:pP(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next(r=>{let i=Bd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Bd();return this.indexManager.getCollectionParents(e,o).next(a=>H.forEach(a,c=>{let u=function(f,h){return new Ca(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((f,h)=>{s=s.insert(f,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let l=u.getKey();s.get(l)===null&&(s=s.insert(l,si.newInvalidDocument(l)))});let a=Bd();return s.forEach((c,u)=>{let l=o.get(c);l!==void 0&&Hd(l.mutation,u,Ni.empty(),vn.now()),dv(t,u)&&(a=a.insert(c,u))}),a})}};var BI=class{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return H.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ki(i.createTime)}}(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:RW(i.bundledQuery),readTime:ki(i.readTime)}}(t)),H.resolve()}};var UI=class{constructor(){this.overlays=new Pt(oe.comparator),this.Rr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ya();return H.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Et(e,t,o)}),H.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){let i=ya(),o=t.length+1,s=new oe(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return H.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Pt((u,l)=>u-l),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let l=o.get(u.largestBatchId);l===null&&(l=ya(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=ya(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return H.resolve(a)}Et(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new EI(t,r));let o=this.Rr.get(t);o===void 0&&(o=Le(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}};var jI=class{constructor(){this.sessionToken=Rn.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}};var Qd=class{constructor(){this.Vr=new un(Kt.mr),this.gr=new un(Kt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){let r=new Kt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Kt(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){let t=new oe(new Dt([])),r=new Kt(t,e),i=new Kt(t,e+1),o=[];return this.gr.forEachInRange([r,i],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){let t=new oe(new Dt([])),r=new Kt(t,e),i=new Kt(t,e+1),o=Le();return this.gr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Kt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Kt=class{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return oe.comparator(e.key,t.key)||Oe(e.Cr,t.Cr)}static pr(e,t){return Oe(e.Cr,t.Cr)||oe.comparator(e.key,t.key)}};var zI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new un(Kt.mr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new _I(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Mr=this.Mr.add(new Kt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(s)}lookupMutationBatch(e,t){return H.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Nr(r),o=i<0?0:i;return H.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?MC:this.Fr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Kt(t,0),i=new Kt(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],s=>{let a=this.Or(s.Cr);o.push(a)}),H.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(Oe);return t.forEach(i=>{let o=new Kt(i,0),s=new Kt(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],a=>{r=r.add(a.Cr)})}),H.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;oe.isDocumentKey(o)||(o=o.child(""));let s=new Kt(new oe(o),0),a=new un(Oe);return this.Mr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Cr)),!0)},s),H.resolve(this.Br(a))}Br(e){let t=[];return e.forEach(r=>{let i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ye(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return H.forEach(t.mutations,i=>{let o=new Kt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){let r=new Kt(t,0),i=this.Mr.firstAfterOrEqual(r);return H.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){let t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var HI=class{constructor(e){this.kr=e,this.docs=function(){return new Pt(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():si.newInvalidDocument(t))}getEntries(e,t){let r=wo();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():si.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=wo(),s=t.path,a=new oe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||NG(MG(l),r)<=0||(i.has(l.key)||dv(t,l))&&(o=o.insert(l.key,l.mutableCopy()))}return H.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ue()}qr(e,t){return H.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $I(this)}getSize(e){return H.resolve(this.size)}},$I=class extends FI{constructor(e){super(),this.Ir=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),H.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}};var GI=class{constructor(e){this.persistence=e,this.Qr=new _o(t=>FC(t),LC),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Qd,this.targetCount=0,this.Kr=Yd.Un()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),H.resolve()}zn(e){this.Qr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Kr=new Yd(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.zn(t),H.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Qr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(o).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){let r=this.Qr.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),H.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),H.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),H.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Ur.vr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this.Ur.containsKey(t))}};var jm=class{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new RC(0),this.zr=!1,this.zr=!0,this.jr=new jI,this.referenceDelegate=e(this),this.Hr=new GI(this),this.indexManager=new MI,this.remoteDocumentCache=function(i){return new HI(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new RI(t),this.Yr=new BI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new zI(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){Y("MemoryPersistence","Starting transaction:",e);let i=new WI(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,t){return H.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}},WI=class extends tI{constructor(e){super(),this.currentSequenceNumber=e}},qI=class n{constructor(e){this.persistence=e,this.ti=new Qd,this.ni=null}static ri(e){return new n(e)}get ii(){if(this.ni)return this.ni;throw ue()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),H.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.ii,r=>{let i=oe.fromPath(r);return this.si(e,i).next(o=>{o||t.removeEntry(i,we.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return H.or([()=>H.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}},zm=class n{constructor(e,t){this.persistence=e,this.oi=new _o(r=>FG(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=NW(this,t)}static ri(e,t){return new n(e,t)}Zr(){}Xr(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){let t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return H.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?H.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,s=>this.ar(e,s,t).next(a=>{a||(r++,o.removeEntry(s,we.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),H.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Cm(e.data.value)),t}ar(e,t,r){return H.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.oi.get(t);return H.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var KI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=Le(),i=Le();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var ZI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var XI=class{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return $R()?8:PG(an())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ZI;return this._s(e,t,s).next(a=>{if(o.result=a,this.Xi)return this.us(e,t,s,a.size)})}).next(()=>o.result)}us(e,t,r,i){return r.documentReadCount<this.es?(ru()<=Pe.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",iu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),H.resolve()):(ru()<=Pe.DEBUG&&Y("QueryEngine","Query:",iu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(ru()<=Pe.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",iu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(t))):H.resolve())}rs(e,t){if(oO(t))return H.resolve(null);let r=Pi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=mI(t,null,"F"),r=Pi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Le(...o);return this.ns.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.cs(t,a);return this.ls(t,u,s,c.readTime)?this.rs(e,mI(t,null,"F")):this.hs(e,u,t,c)}))})))}ss(e,t,r,i){return oO(t)||i.isEqual(we.min())?H.resolve(null):this.ns.getDocuments(e,r).next(o=>{let s=this.cs(t,o);return this.ls(t,s,r,i)?H.resolve(null):(ru()<=Pe.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),iu(t)),this.hs(e,s,t,RG(i,$d)).next(a=>a))})}cs(e,t){let r=new un(fP(e));return t.forEach((i,o)=>{dv(e,o)&&(r=r.add(o))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,t,r){return ru()<=Pe.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",iu(t)),this.ns.getDocumentsMatchingQuery(e,t,Ia.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var UC="LocalStore",OW=3e8,YI=class{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Pt(Oe),this.Is=new _o(o=>FC(o),LC),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}};function PW(n,e,t,r){return new YI(n,e,t,r)}function NP(n,e){return I(this,null,function*(){let t=ve(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Le();for(let u of i){s.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of o){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Rs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function kW(n,e){let t=ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let f=u.batch,h=f.keys(),p=H.resolve();return h.forEach(m=>{p=p.next(()=>l.getEntry(c,m)).next(y=>{let _=u.docVersions.get(m);Ye(_!==null),y.version.compareTo(_)<0&&(f.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),l.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Le();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function OP(n){let e=ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function FW(n,e){let t=ve(n),r=e.snapshotVersion,i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;let a=[];e.targetChanges.forEach((l,f)=>{let h=i.get(f);if(!h)return;a.push(t.Hr.removeMatchingKeys(o,l.removedDocuments,f).next(()=>t.Hr.addMatchingKeys(o,l.addedDocuments,f)));let p=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(Rn.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,r)),i=i.insert(f,p),function(y,_,A){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=OW?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(h,p,l)&&a.push(t.Hr.updateTargetData(o,p))});let c=wo(),u=Le();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(LW(o,s,e.documentUpdates).next(l=>{c=l.Vs,u=l.fs})),!r.isEqual(we.min())){let l=t.Hr.getLastRemoteSnapshotVersion(o).next(f=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return H.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Ts=i,o))}function LW(n,e,t){let r=Le(),i=Le();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=wo();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):Y(UC,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Vs:s,fs:i}})}function VW(n,e){let t=ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=MC),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function BW(n,e){let t=ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(o=>o?(i=o,H.resolve(i)):t.Hr.allocateTargetId(r).next(s=>(i=new Xd(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}function QI(n,e,t){return I(this,null,function*(){let r=ve(n),i=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!xu(s))throw s;Y(UC,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)})}function yO(n,e,t){let r=ve(n),i=we.min(),o=Le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,l){let f=ve(c),h=f.Is.get(l);return h!==void 0?H.resolve(f.Ts.get(h)):f.Hr.getTargetData(u,l)}(r,s,Pi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(s,e,t?i:we.min(),t?o:Le())).next(a=>(UW(r,JG(e),a),{documents:a,gs:o})))}function UW(n,e,t){let r=n.Es.get(e)||we.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}var Hm=class{constructor(){this.activeTargetIds=oW()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var JI=class{constructor(){this.ho=new Hm,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Hm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var eC=class{To(e){}shutdown(){}};var _O="ConnectivityMonitor",$m=class{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Y(_O,"Network connectivity changed: AVAILABLE");for(let e of this.Vo)e(0)}Ro(){Y(_O,"Network connectivity changed: UNAVAILABLE");for(let e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Im=null;function tC(){return Im===null?Im=function(){return 268435456+Math.round(2147483648*Math.random())}():Im++,"0x"+Im.toString(16)}var $E="RestConnection",jW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},nC=class{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Nm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,o){let s=tC(),a=this.bo(e,t.toUriEncodedString());Y($E,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,i,o),this.vo(e,a,c,r).then(u=>(Y($E,`Received RPC '${e}' ${s}: `,u),u),u=>{throw lu($E,`RPC '${e}' ${s} failed with error: `,u,"url: ",a,"request:",r),u})}Co(e,t,r,i,o,s){return this.So(e,t,r,i,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}bo(e,t){let r=jW[e];return`${this.po}/v1/${t}:${r}`}terminate(){}};var rC=class{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}};var Tn="WebChannelConnection",iC=class extends nC{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){let o=tC();return new Promise((s,a)=>{let c=new VE;c.setWithCredentials(!0),c.listenOnce(BE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Vd.NO_ERROR:let l=c.getResponseJson();Y(Tn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case Vd.TIMEOUT:Y(Tn,`RPC '${e}' ${o} timed out`),a(new Q(j.DEADLINE_EXCEEDED,"Request time out"));break;case Vd.HTTP_ERROR:let f=c.getStatus();if(Y(Tn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let p=h?.error;if(p&&p.status&&p.message){let m=function(_){let A=_.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(A)>=0?A:j.UNKNOWN}(p.status);a(new Q(m,p.message))}else a(new Q(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Q(j.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{Y(Tn,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);Y(Tn,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",u,r,15)})}Wo(e,t,r){let i=tC(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=zE(),a=jE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let l=o.join("");Y(Tn,`Creating RPC '${e}' stream ${i}: ${l}`,c);let f=s.createWebChannel(l,c),h=!1,p=!1,m=new rC({Fo:_=>{p?Y(Tn,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(Y(Tn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),Y(Tn,`RPC '${e}' stream ${i} sending:`,_),f.send(_))},Mo:()=>f.close()}),y=(_,A,b)=>{_.listen(A,R=>{try{b(R)}catch(O){setTimeout(()=>{throw O},0)}})};return y(f,nu.EventType.OPEN,()=>{p||(Y(Tn,`RPC '${e}' stream ${i} transport opened.`),m.Qo())}),y(f,nu.EventType.CLOSE,()=>{p||(p=!0,Y(Tn,`RPC '${e}' stream ${i} transport closed`),m.Uo())}),y(f,nu.EventType.ERROR,_=>{p||(p=!0,lu(Tn,`RPC '${e}' stream ${i} transport errored:`,_),m.Uo(new Q(j.UNAVAILABLE,"The operation could not be completed")))}),y(f,nu.EventType.MESSAGE,_=>{var A;if(!p){let b=_.data[0];Ye(!!b);let R=b,O=R?.error||((A=R[0])===null||A===void 0?void 0:A.error);if(O){Y(Tn,`RPC '${e}' stream ${i} received error:`,O);let V=O.status,B=function(D){let T=qt[D];if(T!==void 0)return CP(T)}(V),x=O.message;B===void 0&&(B=j.INTERNAL,x="Unknown error status: "+V+" with message "+O.message),p=!0,m.Uo(new Q(B,x)),f.close()}else Y(Tn,`RPC '${e}' stream ${i} received:`,b),m.Ko(b)}}),y(a,UE.STAT_EVENT,_=>{_.stat===_m.PROXY?Y(Tn,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===_m.NOPROXY&&Y(Tn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.$o()},0),m}};function GE(){return typeof document<"u"?document:null}function fv(n){return new xI(n,!0)}var Gm=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();let t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var wO="PersistentStream",Wm=class{constructor(e,t,r,i,o,s,a,c){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Gm(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}stop(){return I(this,null,function*(){this.u_()&&(yield this.close(0))})}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}T_(){return I(this,null,function*(){if(this.c_())return this.close(0)})}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}close(e,t){return I(this,null,function*(){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(mo(t.toString()),mo("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Lo(t)})}A_(){}auth(){this.state=1;let e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{let i=new Q(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){let r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(()=>I(this,null,function*(){this.state=0,this.start()}))}m_(e){return Y(wO,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(Y(wO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},oC=class extends Wm{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();let t=_W(this.serializer,e),r=function(o){if(!("targetChange"in o))return we.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?we.min():s.readTime?ki(s.readTime):we.min()}(e);return this.listener.p_(t,r)}y_(e){let t={};t.database=TI(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=pI(c)?{documents:IW(o,c)}:{query:CW(o,c).ht},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=AP(o,s.resumeToken);let u=DI(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(we.min())>0){a.readTime=Bm(o,s.snapshotVersion.toTimestamp());let u=DI(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=xW(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){let t={};t.database=TI(this.serializer),t.removeTarget=e,this.I_(t)}},sC=class extends Wm{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();let t=EW(e.writeResults,e.commitTime),r=ki(e.commitTime);return this.listener.v_(r,t)}C_(){let e={};e.database=TI(this.serializer),this.I_(e)}b_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>wW(this.serializer,r))};this.I_(t)}};var aC=class{},cC=class extends aC{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Q(j.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,bI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(j.UNKNOWN,o.toString())})}Co(e,t,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,bI(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(j.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}},uC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(mo(t),this.N_=!1):Y("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}};var ba="RemoteStore",lC=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{r.enqueueAndForget(()=>I(this,null,function*(){Ra(this)&&(Y(ba,"Restarting streams for network reachability change."),yield function(c){return I(this,null,function*(){let u=ve(c);u.W_.add(4),yield cf(u),u.j_.set("Unknown"),u.W_.delete(4),yield hv(u)})}(this))}))}),this.j_=new uC(r,i)}};function hv(n){return I(this,null,function*(){if(Ra(n))for(let e of n.G_)yield e(!0)})}function cf(n){return I(this,null,function*(){for(let e of n.G_)yield e(!1)})}function PP(n,e){let t=ve(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),$C(t)?HC(t):Du(t).c_()&&zC(t,e))}function jC(n,e){let t=ve(n),r=Du(t);t.K_.delete(e),r.c_()&&kP(t,e),t.K_.size===0&&(r.c_()?r.P_():Ra(t)&&t.j_.set("Unknown"))}function zC(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Du(n).y_(e)}function kP(n,e){n.H_.Ne(e),Du(n).w_(e)}function HC(n){n.H_=new AI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Du(n).start(),n.j_.B_()}function $C(n){return Ra(n)&&!Du(n).u_()&&n.K_.size>0}function Ra(n){return ve(n).W_.size===0}function FP(n){n.H_=void 0}function zW(n){return I(this,null,function*(){n.j_.set("Online")})}function HW(n){return I(this,null,function*(){n.K_.forEach((e,t)=>{zC(n,e)})})}function $W(n,e){return I(this,null,function*(){FP(n),$C(n)?(n.j_.q_(e),HC(n)):n.j_.set("Unknown")})}function GW(n,e,t){return I(this,null,function*(){if(n.j_.set("Online"),e instanceof Lm&&e.state===2&&e.cause)try{yield function(i,o){return I(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.K_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.K_.delete(a),i.H_.removeTarget(a))})}(n,e)}catch(r){Y(ba,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qm(n,r)}else if(e instanceof cu?n.H_.We(e):e instanceof Fm?n.H_.Ze(e):n.H_.je(e),!t.isEqual(we.min()))try{let r=yield OP(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.H_.ot(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=o.K_.get(u);l&&o.K_.set(u,l.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let l=o.K_.get(c);if(!l)return;o.K_.set(c,l.withResumeToken(Rn.EMPTY_BYTE_STRING,l.snapshotVersion)),kP(o,c);let f=new Xd(l.target,c,u,l.sequenceNumber);zC(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Y(ba,"Failed to raise snapshot:",r),yield qm(n,r)}})}function qm(n,e,t){return I(this,null,function*(){if(!xu(e))throw e;n.W_.add(1),yield cf(n),n.j_.set("Offline"),t||(t=()=>OP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>I(this,null,function*(){Y(ba,"Retrying IndexedDB access"),yield t(),n.W_.delete(1),yield hv(n)}))})}function LP(n,e){return e().catch(t=>qm(n,t,e))}function pv(n){return I(this,null,function*(){let e=ve(n),t=hs(e),r=e.U_.length>0?e.U_[e.U_.length-1].batchId:MC;for(;WW(e);)try{let i=yield VW(e.localStore,r);if(i===null){e.U_.length===0&&t.P_();break}r=i.batchId,qW(e,i)}catch(i){yield qm(e,i)}VP(e)&&BP(e)})}function WW(n){return Ra(n)&&n.U_.length<10}function qW(n,e){n.U_.push(e);let t=hs(n);t.c_()&&t.S_&&t.b_(e.mutations)}function VP(n){return Ra(n)&&!hs(n).u_()&&n.U_.length>0}function BP(n){hs(n).start()}function KW(n){return I(this,null,function*(){hs(n).C_()})}function ZW(n){return I(this,null,function*(){let e=hs(n);for(let t of n.U_)e.b_(t.mutations)})}function XW(n,e,t){return I(this,null,function*(){let r=n.U_.shift(),i=wI.from(r,e,t);yield LP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield pv(n)})}function YW(n,e){return I(this,null,function*(){e&&hs(n).S_&&(yield function(r,i){return I(this,null,function*(){if(function(s){return fW(s)&&s!==j.ABORTED}(i.code)){let o=r.U_.shift();hs(r).h_(),yield LP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield pv(r)}})}(n,e)),VP(n)&&BP(n)})}function EO(n,e){return I(this,null,function*(){let t=ve(n);t.asyncQueue.verifyOperationInProgress(),Y(ba,"RemoteStore received new credentials");let r=Ra(t);t.W_.add(3),yield cf(t),r&&t.j_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),yield hv(t)})}function QW(n,e){return I(this,null,function*(){let t=ve(n);e?(t.W_.delete(2),yield hv(t)):e||(t.W_.add(2),yield cf(t),t.j_.set("Unknown"))})}function Du(n){return n.J_||(n.J_=function(t,r,i){let o=ve(t);return o.M_(),new oC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:zW.bind(null,n),No:HW.bind(null,n),Lo:$W.bind(null,n),p_:GW.bind(null,n)}),n.G_.push(e=>I(this,null,function*(){e?(n.J_.h_(),$C(n)?HC(n):n.j_.set("Unknown")):(yield n.J_.stop(),FP(n))}))),n.J_}function hs(n){return n.Y_||(n.Y_=function(t,r,i){let o=ve(t);return o.M_(),new sC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:KW.bind(null,n),Lo:YW.bind(null,n),D_:ZW.bind(null,n),v_:XW.bind(null,n)}),n.G_.push(e=>I(this,null,function*(){e?(n.Y_.h_(),yield pv(n)):(yield n.Y_.stop(),n.U_.length>0&&(Y(ba,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))}))),n.Y_}var dC=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function GC(n,e){if(mo("AsyncQueue",`${e}: ${n}`),xu(n))return new Q(j.UNAVAILABLE,`${e}: ${n}`);throw n}var Km=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||oe.comparator(t.key,r.key):(t,r)=>oe.comparator(t.key,r.key),this.keyedMap=Bd(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Zm=class{constructor(){this.Z_=new Pt(oe.comparator)}track(e){let t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ue():this.Z_=this.Z_.insert(t,e)}X_(){let e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}},Eu=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Km.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var fC=class{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}},hC=class{constructor(){this.queries=IO(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){let i=ve(t),o=i.queries;i.queries=IO(),o.forEach((s,a)=>{for(let c of a.ta)c.onError(r)})})(this,new Q(j.ABORTED,"Firestore shutting down"))}};function IO(){return new _o(n=>dP(n),lv)}function WC(n,e){return I(this,null,function*(){let t=ve(n),r=3,i=e.query,o=t.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new fC,r=e.ra()?0:1);try{switch(r){case 0:o.ea=yield t.onListen(i,!0);break;case 1:o.ea=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=GC(s,`Initialization of query '${iu(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&KC(t)})}function qC(n,e){return I(this,null,function*(){let t=ve(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ta.indexOf(e);s>=0&&(o.ta.splice(s,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function JW(n,e){let t=ve(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.ta)a.oa(i)&&(r=!0);s.ea=i}}r&&KC(t)}function eq(n,e,t){let r=ve(n),i=r.queries.get(e);if(i)for(let o of i.ta)o.onError(t);r.queries.delete(e)}function KC(n){n.ia.forEach(e=>{e.next()})}var pC,CO;(CO=pC||(pC={}))._a="default",CO.Cache="cache";var Jd=class{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Eu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;let r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;let t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Eu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==pC.Cache}};var Xm=class{constructor(e){this.key=e}},Ym=class{constructor(e){this.key=e}},gC=class{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Le(),this.mutatedKeys=Le(),this.ya=fP(e),this.wa=new Km(this.ya)}get Sa(){return this.fa}ba(e,t){let r=t?t.Da:new Zm,i=t?t.wa:this.wa,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,f)=>{let h=i.get(l),p=dv(this.query,f)?f:null,m=!!h&&this.mutatedKeys.has(h.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),_=!1;h&&p?h.data.isEqual(p.data)?m!==y&&(r.track({type:3,doc:p}),_=!0):this.va(h,p)||(r.track({type:2,doc:p}),_=!0,(c&&this.ya(p,c)>0||u&&this.ya(p,u)<0)&&(a=!0)):!h&&p?(r.track({type:0,doc:p}),_=!0):h&&!p&&(r.track({type:1,doc:h}),_=!0,(c||u)&&(a=!0)),_&&(p?(s=s.add(p),o=y?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{wa:s,Da:r,ls:a,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;let s=e.Da.X_();s.sort((l,f)=>function(p,m){let y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return y(p)-y(m)}(l.type,f.type)||this.ya(l.doc,f.doc)),this.Ca(r),i=i!=null&&i;let a=t&&!i?this.Fa():[],c=this.pa.size===0&&this.current&&!i?1:0,u=c!==this.ga;return this.ga=c,s.length!==0||u?{snapshot:new Eu(this.query,e.wa,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Zm,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];let e=this.pa;this.pa=Le(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});let t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new Ym(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new Xm(r))}),t}Oa(e){this.fa=e.gs,this.pa=Le();let t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Eu.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}},ZC="SyncEngine",mC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},vC=class{constructor(e){this.key=e,this.Ba=!1}},yC=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new _o(a=>dP(a),lv),this.qa=new Map,this.Qa=new Set,this.$a=new Pt(oe.comparator),this.Ua=new Map,this.Ka=new Qd,this.Wa={},this.Ga=new Map,this.za=Yd.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}};function tq(n,e,t=!0){return I(this,null,function*(){let r=GP(n),i,o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=yield UP(r,e,t,!0),i})}function nq(n,e){return I(this,null,function*(){let t=GP(n);yield UP(t,e,!0,!1)})}function UP(n,e,t,r){return I(this,null,function*(){let i=yield BW(n.localStore,Pi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield rq(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&PP(n.remoteStore,i),a})}function rq(n,e,t,r,i){return I(this,null,function*(){n.Ha=(f,h,p)=>function(y,_,A,b){return I(this,null,function*(){let R=_.view.ba(A);R.ls&&(R=yield yO(y.localStore,_.query,!1).then(({documents:x})=>_.view.ba(x,R)));let O=b&&b.targetChanges.get(_.targetId),V=b&&b.targetMismatches.get(_.targetId)!=null,B=_.view.applyChanges(R,y.isPrimaryClient,O,V);return xO(y,_.targetId,B.Ma),B.snapshot})}(n,f,h,p);let o=yield yO(n.localStore,e,!0),s=new gC(e,o.gs),a=s.ba(o.documents),c=Zd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);xO(n,t,u.Ma);let l=new mC(e,t,s);return n.ka.set(e,l),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),u.snapshot})}function iq(n,e,t){return I(this,null,function*(){let r=ve(n),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(s=>!lv(s,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield QI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&jC(r.remoteStore,i.targetId),_C(r,i.targetId)}).catch(Au))):(_C(r,i.targetId),yield QI(r.localStore,i.targetId,!0))})}function oq(n,e){return I(this,null,function*(){let t=ve(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),jC(t.remoteStore,r.targetId))})}function sq(n,e,t){return I(this,null,function*(){let r=hq(n);try{let i=yield function(s,a){let c=ve(s),u=vn.now(),l=a.reduce((p,m)=>p.add(m.key),Le()),f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=wo(),y=Le();return c.ds.getEntries(p,l).next(_=>{m=_,m.forEach((A,b)=>{b.isValidDocument()||(y=y.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,m)).next(_=>{f=_;let A=[];for(let b of a){let R=dW(b,f.get(b.key).overlayedDocument);R!=null&&A.push(new Eo(b.key,R,iP(R.value.mapValue),go.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,A,a)}).next(_=>{h=_;let A=_.applyToLocalDocumentSet(f,y);return c.documentOverlayCache.saveOverlays(p,_.batchId,A)})}).then(()=>({batchId:h.batchId,changes:pP(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Wa[s.currentUser.toKey()];u||(u=new Pt(Oe)),u=u.insert(a,c),s.Wa[s.currentUser.toKey()]=u}(r,i.batchId,t),yield uf(r,i.changes),yield pv(r.remoteStore)}catch(i){let o=GC(i,"Failed to persist write");t.reject(o)}})}function jP(n,e){return I(this,null,function*(){let t=ve(n);try{let r=yield FW(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Ua.get(o);s&&(Ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ba=!0:i.modifiedDocuments.size>0?Ye(s.Ba):i.removedDocuments.size>0&&(Ye(s.Ba),s.Ba=!1))}),yield uf(t,r,e)}catch(r){yield Au(r)}})}function AO(n,e,t){let r=ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ka.forEach((o,s)=>{let a=s.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=ve(s);c.onlineState=a;let u=!1;c.queries.forEach((l,f)=>{for(let h of f.ta)h.sa(a)&&(u=!0)}),u&&KC(c)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function aq(n,e,t){return I(this,null,function*(){let r=ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Ua.get(e),o=i&&i.key;if(o){let s=new Pt(oe.comparator);s=s.insert(o,si.newNoDocument(o,we.min()));let a=Le().add(o),c=new km(we.min(),new Map,new Pt(Oe),s,a);yield jP(r,c),r.$a=r.$a.remove(o),r.Ua.delete(e),XC(r)}else yield QI(r.localStore,e,!1).then(()=>_C(r,e,t)).catch(Au)})}function cq(n,e){return I(this,null,function*(){let t=ve(n),r=e.batch.batchId;try{let i=yield kW(t.localStore,e);HP(t,r,null),zP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield uf(t,i)}catch(i){yield Au(i)}})}function uq(n,e,t){return I(this,null,function*(){let r=ve(n);try{let i=yield function(s,a){let c=ve(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Ye(f!==null),l=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);HP(r,e,t),zP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield uf(r,i)}catch(i){yield Au(i)}})}function zP(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function HP(n,e,t){let r=ve(n),i=r.Wa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function _C(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||$P(n,r)})}function $P(n,e){n.Qa.delete(e.path.canonicalString());let t=n.$a.get(e);t!==null&&(jC(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),XC(n))}function xO(n,e,t){for(let r of t)r instanceof Xm?(n.Ka.addReference(r.key,e),lq(n,r)):r instanceof Ym?(Y(ZC,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||$P(n,r.key)):ue()}function lq(n,e){let t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(Y(ZC,"New document in limbo: "+t),n.Qa.add(r),XC(n))}function XC(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){let e=n.Qa.values().next().value;n.Qa.delete(e);let t=new oe(Dt.fromString(e)),r=n.za.next();n.Ua.set(r,new vC(t)),n.$a=n.$a.insert(t,r),PP(n.remoteStore,new Xd(Pi(uv(t.path)),r,"TargetPurposeLimboResolution",RC.ae))}}function uf(n,e,t){return I(this,null,function*(){let r=ve(n),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach((a,c)=>{s.push(r.Ha(c,e,t).then(u=>{var l;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(l=t?.targetChanges.get(c.targetId))===null||l===void 0?void 0:l.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=KI.Yi(c.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.La.p_(i),yield function(c,u){return I(this,null,function*(){let l=ve(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(u,h=>H.forEach(h.Hi,p=>l.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>H.forEach(h.Ji,p=>l.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!xu(f))throw f;Y(UC,"Failed to update sequence numbers: "+f)}for(let f of u){let h=f.targetId;if(!f.fromCache){let p=l.Ts.get(h),m=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(m);l.Ts=l.Ts.insert(h,y)}}})}(r.localStore,o))})}function dq(n,e){return I(this,null,function*(){let t=ve(n);if(!t.currentUser.isEqual(e)){Y(ZC,"User change. New user:",e.toKey());let r=yield NP(t.localStore,e);t.currentUser=e,function(o,s){o.Ga.forEach(a=>{a.forEach(c=>{c.reject(new Q(j.CANCELLED,s))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield uf(t,r.Rs)}})}function fq(n,e){let t=ve(n),r=t.Ua.get(e);if(r&&r.Ba)return Le().add(r.key);{let i=Le(),o=t.qa.get(e);if(!o)return i;for(let s of o){let a=t.ka.get(s);i=i.unionWith(a.view.Sa)}return i}}function GP(n){let e=ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aq.bind(null,e),e.La.p_=JW.bind(null,e.eventManager),e.La.Ja=eq.bind(null,e.eventManager),e}function hq(n){let e=ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uq.bind(null,e),e}var WP=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return I(this,null,function*(){this.serializer=fv(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),yield this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)})}tu(t,r){return null}nu(t,r){return null}eu(t){return PW(this.persistence,new XI,t.initialUser,this.serializer)}Xa(t){return new jm(qI.ri,this.serializer)}Za(t){return new JI}terminate(){return I(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),wC=class extends WP{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ye(this.persistence.referenceDelegate instanceof zm);let r=this.persistence.referenceDelegate.garbageCollector;return new PI(r,e.asyncQueue,t)}Xa(e){let t=this.cacheSizeBytes!==void 0?Pr.withCacheSize(this.cacheSizeBytes):Pr.DEFAULT;return new jm(r=>zm.ri(r,t),this.serializer)}};var pq=(()=>{class n{initialize(t,r){return I(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>AO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dq.bind(null,this.syncEngine),yield QW(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new hC}()}createDatastore(t){let r=fv(t.databaseInfo.databaseId),i=function(s){return new iC(s)}(t.databaseInfo);return function(s,a,c,u){return new cC(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new lC(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>AO(this.syncEngine,r,0),function(){return $m.D()?new $m:new eC}())}createSyncEngine(t,r){return function(o,s,a,c,u,l,f){let h=new yC(o,s,a,c,u,l);return f&&(h.ja=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return I(this,null,function*(){var t,r;yield function(o){return I(this,null,function*(){let s=ve(o);Y(ba,"RemoteStore shutting down."),s.W_.add(5),yield cf(s),s.z_.shutdown(),s.j_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var ef=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):mo("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ps="FirestoreClient",EC=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=cn.UNAUTHENTICATED,this.clientId=Sm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>I(this,null,function*(){Y(ps,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(Y(ps,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>I(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=GC(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function WE(n,e){return I(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Y(ps,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>I(this,null,function*(){r.isEqual(i)||(yield NP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function DO(n,e){return I(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield gq(n);Y(ps,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>EO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>EO(e.remoteStore,i)),n._onlineComponents=e})}function gq(n){return I(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Y(ps,"Using user provided OfflineComponentProvider");try{yield WE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;lu("Error using user provided cache. Falling back to memory cache: "+t),yield WE(n,new WP)}}else Y(ps,"Using default OfflineComponentProvider"),yield WE(n,new wC(void 0));return n._offlineComponents})}function qP(n){return I(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Y(ps,"Using user provided OnlineComponentProvider"),yield DO(n,n._uninitializedComponentsProvider._online)):(Y(ps,"Using default OnlineComponentProvider"),yield DO(n,new pq))),n._onlineComponents})}function mq(n){return qP(n).then(e=>e.syncEngine)}function Qm(n){return I(this,null,function*(){let e=yield qP(n),t=e.eventManager;return t.onListen=tq.bind(null,e.syncEngine),t.onUnlisten=iq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oq.bind(null,e.syncEngine),t})}function vq(n,e,t={}){let r=new oi;return n.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return function(o,s,a,c,u){let l=new ef({next:h=>{l.su(),s.enqueueAndForget(()=>qC(o,f));let p=h.docs.has(a);!p&&h.fromCache?u.reject(new Q(j.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&c&&c.source==="server"?u.reject(new Q(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new Jd(uv(a.path),l,{includeMetadataChanges:!0,Ta:!0});return WC(o,f)}(yield Qm(n),n.asyncQueue,e,t,r)})),r.promise}function yq(n,e,t={}){let r=new oi;return n.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return function(o,s,a,c,u){let l=new ef({next:h=>{l.su(),s.enqueueAndForget(()=>qC(o,f)),h.fromCache&&c.source==="server"?u.reject(new Q(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new Jd(a,l,{includeMetadataChanges:!0,Ta:!0});return WC(o,f)}(yield Qm(n),n.asyncQueue,e,t,r)})),r.promise}function KP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var bO=new Map;function ZP(n,e,t){if(!t)throw new Q(j.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _q(n,e,t,r){if(e===!0&&r===!0)throw new Q(j.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SO(n){if(!oe.isDocumentKey(n))throw new Q(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TO(n){if(oe.isDocumentKey(n))throw new Q(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ue()}function kr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=gv(n);throw new Q(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var XP="firestore.googleapis.com",RO=!0,Jm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XP,this.ssl=RO}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:RO;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MW)throw new Q(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_q("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Iu=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qE;switch(r.type){case"firstParty":return new YE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return I(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=bO.get(t);r&&(Y("ComponentProvider","Removing Datastore"),bO.delete(t),r.terminate())}(this),Promise.resolve()}};function YP(n,e,t,r={}){var i;let o=(n=kr(n,Iu))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;o.host!==XP&&o.host!==a&&lu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=Object.assign(Object.assign({},o),{host:a,ssl:!1,emulatorOptions:r});if(!bi(c,s)&&(n._setSettings(c),r.mockUserToken)){let u,l;if(typeof r.mockUserToken=="string")u=r.mockUserToken,l=cn.MOCK_USER;else{u=VR(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Q(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new cn(f)}n._authCredentials=new KE(new Dm(u,l))}}var Sa=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Hn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ds=class n extends Sa{constructor(e,t,r){super(e,t,uv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new oe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function QP(n,e,...t){if(n=mt(n),ZP("collection","path",e),n instanceof Iu){let r=Dt.fromString(e,...t);return TO(r),new ds(n,null,r)}{if(!(n instanceof Hn||n instanceof ds))throw new Q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Dt.fromString(e,...t));return TO(r),new ds(n.firestore,null,r)}}function YC(n,e,...t){if(n=mt(n),arguments.length===1&&(e=Sm.newId()),ZP("doc","path",e),n instanceof Iu){let r=Dt.fromString(e,...t);return SO(r),new Hn(n,null,new oe(r))}{if(!(n instanceof Hn||n instanceof ds))throw new Q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Dt.fromString(e,...t));return SO(r),new Hn(n.firestore,n instanceof ds?n.converter:null,new oe(r))}}var MO="AsyncQueue",ev=class{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Gm(this,"async_queue_retry"),this.Su=()=>{let r=GE();r&&Y(MO,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;let t=GE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;let t=GE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});let t=new oi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}Cu(){return I(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!xu(e))throw e;Y(MO,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(e){let t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw mo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);let i=dC.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&ue()}verifyOperationInProgress(){}Mu(){return I(this,null,function*(){let e;do e=this.bu,yield e;while(e!==this.bu)})}xu(e){for(let t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){let t=this.fu.indexOf(e);this.fu.splice(t,1)}};function NO(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Li=class extends Iu{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ev,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return I(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ev(e),this._firestoreClient=void 0,yield e}})}};function JP(n,e){let t=typeof n=="object"?n:Rr(),r=typeof n=="string"?n:e||Nm,i=vr(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Rg("firestore");o&&YP(i,...o)}return i}function mv(n){if(n._terminated)throw new Q(j.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||wq(n),n._firestoreClient}function wq(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,l){return new nI(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,KP(l.experimentalLongPollingOptions),l.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new EC(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var tf=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Rn.fromBase64String(e))}catch(t){throw new Q(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var nf=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Q(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _r(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var tv=class{constructor(e){this._methodName=e}};var rf=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}};var of=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var Eq=/^__.*__$/,IC=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Eo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Da(e,this.data,t,this.fieldTransforms)}};function ek(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}var CC=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return nv(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(ek(this.Lu)&&Eq.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}},AC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||fv(e)}ju(e,t,r,i=!1){return new CC({Lu:e,methodName:t,zu:r,path:_r.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function QC(n){let e=n._freezeSettings(),t=fv(n._databaseId);return new AC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tk(n,e,t,r,i,o={}){let s=n.ju(o.merge||o.mergeFields?2:0,e,t,i);ik("Data must be an object, but it was:",s,r);let a=nk(r,s),c,u;if(o.merge)c=new Ni(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let f of o.mergeFields){let h=Cq(e,f,t);if(!s.contains(h))throw new Q(j.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);xq(l,h)||l.push(h)}c=new Ni(l),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new IC(new ii(a),c,u)}function Iq(n,e,t,r=!1){return JC(t,n.ju(r?4:3,e))}function JC(n,e){if(rk(n=mt(n)))return ik("Unsupported field value:",e,n),nk(n,e);if(n instanceof tv)return function(r,i){if(!ek(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=JC(a,i.Ku(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sW(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=vn.fromDate(r);return{timestampValue:Bm(i.serializer,o)}}if(r instanceof vn){let o=new vn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bm(i.serializer,o)}}if(r instanceof rf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof tf)return{bytesValue:AP(i.serializer,r._byteString)};if(r instanceof Hn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:BC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof of)return function(s,a){return{mapValue:{fields:{[OC]:{stringValue:PC},[fu]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Wu("VectorValues must only contain numeric values.");return VC(a.serializer,u)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${gv(r)}`)}(n,e)}function nk(n,e){let t={};return XO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ta(n,(r,i)=>{let o=JC(i,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function rk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vn||n instanceof rf||n instanceof tf||n instanceof Hn||n instanceof tv||n instanceof of)}function ik(n,e,t){if(!rk(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=gv(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function Cq(n,e,t){if((e=mt(e))instanceof nf)return e._internalPath;if(typeof e=="string")return ok(n,e);throw nv("Field path arguments must be of type string or ",n,!1,void 0,t)}var Aq=new RegExp("[~\\*/\\[\\]]");function ok(n,e,t){if(e.search(Aq)>=0)throw nv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nf(...e.split("."))._internalPath}catch{throw nv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function nv(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Q(j.INVALID_ARGUMENT,a+n+c)}function xq(n,e){return n.some(t=>t.isEqual(e))}var rv=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new xC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(eA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},xC=class extends rv{data(){return super.data()}};function eA(n,e){return typeof e=="string"?ok(n,e):e instanceof nf?e._internalPath:e._delegate._internalPath}function sk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Q(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sf=class{},DC=class extends sf{};function ak(n,e,...t){let r=[];e instanceof sf&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof bC).length,a=o.filter(c=>c instanceof iv).length;if(s>1||s>0&&a>0)throw new Q(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var iv=class n extends DC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return uk(e._query,t),new Sa(e.firestore,e.converter,gI(e._query,t))}_parse(e){let t=QC(e.firestore);return function(o,s,a,c,u,l,f){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new Q(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){PO(f,l);let m=[];for(let y of f)m.push(OO(c,o,y));h={arrayValue:{values:m}}}else h=OO(c,o,f)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||PO(f,l),h=Iq(a,s,f,l==="in"||l==="not-in");return Zt.create(u,l,h)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function ck(n,e,t){let r=e,i=eA("where",n);return iv._create(i,r,t)}var bC=class n extends sf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ai.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)uk(s,c),s=gI(s,c)}(e._query,t),new Sa(e.firestore,e.converter,gI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function OO(n,e,t){if(typeof(t=mt(t))=="string"){if(t==="")throw new Q(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lP(e)&&t.indexOf("/")!==-1)throw new Q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Dt.fromString(t));if(!oe.isDocumentKey(r))throw new Q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return JN(n,new oe(r))}if(t instanceof Hn)return JN(n,t._key);throw new Q(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gv(t)}.`)}function PO(n,e){if(!Array.isArray(n)||n.length===0)throw new Q(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uk(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Q(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var SC=class{convertValue(e,t="none"){switch(fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ue()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ta(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[fu].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>It(s.doubleValue));return new of(o)}convertGeoPoint(e){return new rf(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=cv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wd(e));default:return null}}convertTimestamp(e){let t=vo(e);return new vn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Dt.fromString(e);Ye(RP(r));let i=new Om(r.get(1),r.get(3)),o=new oe(r.popFirst(5));return i.isEqual(t)||mo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function lk(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var wa=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ov=class extends rv{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(eA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},uu=class extends ov{data(e={}){return super.data(e)}},sv=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new wa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new uu(this._firestore,this._userDataWriter,r.key,r,new wa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Q(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new uu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new uu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:Dq(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Dq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}function dk(n){n=kr(n,Hn);let e=kr(n.firestore,Li);return vq(mv(e),n._key).then(t=>mk(e,n,t))}var af=class extends SC{constructor(e){super(),this.firestore=e}convertBytes(e){return new tf(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}};function fk(n){n=kr(n,Sa);let e=kr(n.firestore,Li),t=mv(e),r=new af(e);return sk(n._query),yq(t,n._query).then(i=>new sv(e,r,n,i))}function hk(n,e,t){n=kr(n,Hn);let r=kr(n.firestore,Li),i=lk(n.converter,e,t);return nA(r,[tk(QC(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,go.none())])}function pk(n){return nA(kr(n.firestore,Li),[new Kd(n._key,go.none())])}function gk(n,e){let t=kr(n.firestore,Li),r=YC(n),i=lk(n.converter,e);return nA(t,[tk(QC(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,go.exists(!1))]).then(()=>r)}function tA(n,...e){var t,r,i;n=mt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||NO(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(NO(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,l;if(n instanceof Hn)u=kr(n.firestore,Li),l=uv(n._key.path),c={next:f=>{e[s]&&e[s](mk(u,n,f))},error:e[s+1],complete:e[s+2]};else{let f=kr(n,Sa);u=kr(f.firestore,Li),l=f._query;let h=new af(u);c={next:p=>{e[s]&&e[s](new sv(u,h,f,p))},error:e[s+1],complete:e[s+2]},sk(n._query)}return function(h,p,m,y){let _=new ef(y),A=new Jd(p,_,m);return h.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return WC(yield Qm(h),A)})),()=>{_.su(),h.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return qC(yield Qm(h),A)}))}}(mv(u),l,a,c)}function nA(n,e){return function(r,i){let o=new oi;return r.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return sq(yield mq(r),i,o)})),o.promise}(mv(n),e)}function mk(n,e,t){let r=t.docs.get(e._key),i=new af(n);return new ov(n,i,e._key,r,new wa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Cu=i})(es),en(new xt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Li(new ZE(r.getProvider("auth-internal")),new QE(s,r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Q(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Om(u.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ve(HN,$N,e),Ve(HN,$N,"esm2017")})();var vv=function(){return vv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},vv.apply(this,arguments)};var Tq={includeMetadataChanges:!1};function vk(n,e){return e===void 0&&(e=Tq),new fe(function(t){var r=tA(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function yk(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:vv(vv({},r),(t={},t[e.idField]=n.id,t))}function _k(n){return vk(n,{includeMetadataChanges:!0}).pipe(se(function(e){return e.docs}))}function wk(n,e){return e===void 0&&(e={}),_k(n).pipe(se(function(t){return t.map(function(r){return yk(r,e)})}))}var $n=class{constructor(e){return e}},Ek="firestore",rA=class{constructor(){return Ti(Ek)}};var iA=new X("angularfire2.firestore-instances");function Rq(n,e){let t=ao(Ek,n,e);return t&&new $n(t)}function Mq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new $n(r)}}var Nq={provide:rA,deps:[[new Ut,iA]]},Oq={provide:$n,useFactory:Rq,deps:[[new Ut,iA],yr]};function Ik(n,...e){return Ve("angularfire",Mr.full,"fst"),xn([Oq,Nq,{provide:iA,useFactory:Mq(n),multi:!0,deps:[Me,At,Nr,ti,[new Ut,ma],[new Ut,ns],...e]}])}var yv=ct(wk,!0);var Ck=ct(gk,!0,2);var Io=ct(QP,!0,2);var _v=ct(pk,!0,2);var Fr=ct(YC,!0,2);var Ak=ct(dk,!0);var xk=ct(fk,!0);var Dk=ct(JP,!0);var wv=ct(ak,!0,2);var gs=ct(hk,!0,2);var Ev=ct(ck,!0,2);var Iv=class n{email="";password="";isLoginMode=!0;firestore=U($n);auth=U(tn);router=U(mr);onSubmit(){this.isLoginMode?this.onLogin():this.onRegister()}onLogin(){vN(this.auth,this.email,this.password).then(e=>{console.log("Zalogowano pomy\u015Blnie:",e),this.router.navigate(["/list"])}).catch(e=>{console.error("B\u0142\u0105d logowania:",e.message)})}onRegister(){gN(this.auth,this.email,this.password).then(e=>I(this,null,function*(){console.log("Zarejestrowano pomy\u015Blnie:",e);let t=e.user,r=Fr(this.firestore,"users",t.uid);yield gs(r,{uid:t.uid,email:t.email,createdAt:new Date}),this.router.navigate(["/list"])})).catch(e=>{console.error("B\u0142\u0105d rejestracji:",e.message)})}loginWithGoogle(){let e=new mE;yN(this.auth,e).then(t=>{console.log("Zalogowano przez Google:",t),this.router.navigate(["/list"])}).catch(t=>{console.error("B\u0142\u0105d logowania przez Google:",t.message)})}toggleMode(){this.isLoginMode=!this.isLoginMode}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-login"]],decls:20,vars:6,consts:[[1,"container","mt-4",2,"max-width","400px"],[1,"text-center","mb-4"],[3,"ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","w-100"],[1,"text-center","mt-3"],[1,"btn","btn-link",3,"click"],[1,"text-center"],[1,"btn","btn-outline-danger","mt-2",3,"click"]],template:function(t,r){t&1&&(te(0,"div",0)(1,"h2",1),xe(2),ne(),te(3,"form",2),je("ngSubmit",function(){return r.onSubmit()}),te(4,"div",3)(5,"label",4),xe(6,"Email"),ne(),te(7,"input",5),Ii("ngModelChange",function(o){return no(r.email,o)||(r.email=o),o}),ne()(),te(8,"div",3)(9,"label",6),xe(10,"Password"),ne(),te(11,"input",7),Ii("ngModelChange",function(o){return no(r.password,o)||(r.password=o),o}),ne()(),te(12,"button",8),xe(13),ne()(),te(14,"div",9)(15,"button",10),je("click",function(){return r.toggleMode()}),xe(16),ne()(),te(17,"div",11)(18,"button",12),je("click",function(){return r.loginWithGoogle()}),xe(19),ne()()()),t&2&&(be(2),Qs(r.isLoginMode?"Login":"Register"),be(5),Ei("ngModel",r.email),be(4),Ei("ngModel",r.password),be(2),wi(" ",r.isLoginMode?"Login":"Register"," "),be(3),wi(" ",r.isLoginMode?"Switch to Register":"Switch to Login"," "),be(3),wi(" ",r.isLoginMode?"Login with Google":"Register with Google"," "))},dependencies:[Mi,vm,ls,tu,gm,Ld,va,Fd],encapsulation:2})};var Pq=["*"],Cv=class{_ngZone;_pending=[];_listeners=[];_targetStream=new Lt(void 0);_clearListeners(){for(let e of this._listeners)e.remove();this._listeners=[]}constructor(e){this._ngZone=e}getLazyEmitter(e){return this._targetStream.pipe(Gt(t=>{let r=new fe(i=>{if(!t){this._pending.push({observable:r,observer:i});return}let o=t.addListener(e,s=>{this._ngZone.run(()=>i.next(s))});if(!o){i.complete();return}return this._listeners.push(o),()=>o.remove()});return r}))}setTarget(e){let t=this._targetStream.value;e!==t&&(t&&(this._clearListeners(),this._pending=[]),this._targetStream.next(e),this._pending.forEach(r=>r.observable.subscribe(r.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},lf={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},bk="500px",Sk="500px",df=(()=>{class n{_elementRef=U(Ar);_ngZone=U(Me);_eventManager=new Cv(U(Me));_mapEl;_existingAuthFailureCallback;googleMap;_isBrowser;height=bk;width=Sk;mapId;mapTypeId;set center(t){this._center=t}_center;set zoom(t){this._zoom=t}_zoom;set options(t){this._options=t||lf}_options=lf;mapInitialized=new Ce;authFailure=new Ce;boundsChanged=this._eventManager.getLazyEmitter("bounds_changed");centerChanged=this._eventManager.getLazyEmitter("center_changed");mapClick=this._eventManager.getLazyEmitter("click");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");mapDragstart=this._eventManager.getLazyEmitter("dragstart");headingChanged=this._eventManager.getLazyEmitter("heading_changed");idle=this._eventManager.getLazyEmitter("idle");maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed");mapMousemove=this._eventManager.getLazyEmitter("mousemove");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");projectionChanged=this._eventManager.getLazyEmitter("projection_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");tilesloaded=this._eventManager.getLazyEmitter("tilesloaded");tiltChanged=this._eventManager.getLazyEmitter("tilt_changed");zoomChanged=this._eventManager.getLazyEmitter("zoom_changed");constructor(){let t=U(xr);if(this._isBrowser=N_(t),this._isBrowser){let r=window;r.google,this._existingAuthFailureCallback=r.gm_authFailure,r.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(t){(t.height||t.width)&&this._setSize();let r=this.googleMap;r&&(t.options&&r.setOptions(this._combineOptions()),t.center&&this._center&&r.setCenter(this._center),t.zoom&&this._zoom!=null&&r.setZoom(this._zoom),t.mapTypeId&&this.mapTypeId&&r.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(t=>this._initialize(t.Map))}))}_initialize(t){this._ngZone.runOutsideAngular(()=>{this.googleMap=new t(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let t=window;t.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(t,r){this._assertInitialized(),this.googleMap.fitBounds(t,r)}panBy(t,r){this._assertInitialized(),this.googleMap.panBy(t,r)}panTo(t){this._assertInitialized(),this.googleMap.panTo(t)}panToBounds(t,r){this._assertInitialized(),this.googleMap.panToBounds(t,r)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(Vt(1)).toPromise()}_setSize(){if(this._mapEl){let t=this._mapEl.style;t.height=this.height===null?"":Tk(this.height)||bk,t.width=this.width===null?"":Tk(this.width)||Sk}}_combineOptions(){let t=this._options||{};return ae(W({},t),{center:this._center||t.center||lf.center,zoom:this._zoom??t.zoom??lf.zoom,mapTypeId:this.mapTypeId||t.mapTypeId||lf.mapTypeId,mapId:this.mapId||t.mapId})}_assertInitialized(){this.googleMap}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Et({type:n,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[Gr],ngContentSelectors:Pq,decls:2,vars:0,consts:[[1,"map-container"]],template:function(r,i){r&1&&(JT(),ir(0,"div",0),e2(1))},encapsulation:2,changeDetection:0})}return n})(),kq=/([A-Za-z%]+)$/;function Tk(n){return n==null?"":kq.test(n)?n:`${n}px`}var Fq=new X("MAP_MARKER"),Lq={position:{lat:37.421995,lng:-122.084092}},Av=(()=>{class n{_googleMap=U(df);_ngZone=U(Me);_eventManager=new Cv(U(Me));set title(t){this._title=t}_title;set position(t){this._position=t}_position;set label(t){this._label=t}_label;set clickable(t){this._clickable=t}_clickable;set options(t){this._options=t}_options;set icon(t){this._icon=t}_icon;set visible(t){this._visible=t}_visible;animationChanged=this._eventManager.getLazyEmitter("animation_changed");mapClick=this._eventManager.getLazyEmitter("click");clickableChanged=this._eventManager.getLazyEmitter("clickable_changed");cursorChanged=this._eventManager.getLazyEmitter("cursor_changed");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");draggableChanged=this._eventManager.getLazyEmitter("draggable_changed");mapDragstart=this._eventManager.getLazyEmitter("dragstart");flatChanged=this._eventManager.getLazyEmitter("flat_changed");iconChanged=this._eventManager.getLazyEmitter("icon_changed");mapMousedown=this._eventManager.getLazyEmitter("mousedown");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");mapMouseup=this._eventManager.getLazyEmitter("mouseup");positionChanged=this._eventManager.getLazyEmitter("position_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");shapeChanged=this._eventManager.getLazyEmitter("shape_changed");titleChanged=this._eventManager.getLazyEmitter("title_changed");visibleChanged=this._eventManager.getLazyEmitter("visible_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");markerInitialized=new Ce;marker;constructor(){}ngOnInit(){this._googleMap._isBrowser&&(google.maps.Marker&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.Marker):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([t,r])=>{this._initialize(t,r.Marker)})}))}_initialize(t,r){this._ngZone.runOutsideAngular(()=>{this.marker=new r(this._combineOptions()),this._assertInitialized(),this.marker.setMap(t),this._eventManager.setTarget(this.marker),this.markerInitialized.next(this.marker)})}ngOnChanges(t){let{marker:r,_title:i,_position:o,_label:s,_clickable:a,_icon:c,_visible:u}=this;r&&(t.options&&r.setOptions(this._combineOptions()),t.title&&i!==void 0&&r.setTitle(i),t.position&&o&&r.setPosition(o),t.label&&s!==void 0&&r.setLabel(s),t.clickable&&a!==void 0&&r.setClickable(a),t.icon&&c&&r.setIcon(c),t.visible&&u!==void 0&&r.setVisible(u))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.marker?.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_resolveMarker(){return this.marker?Promise.resolve(this.marker):this.markerInitialized.pipe(Vt(1)).toPromise()}_combineOptions(){let t=this._options||Lq;return ae(W({},t),{title:this._title||t.title,position:this._position||t.position,label:this._label||t.label,clickable:this._clickable??t.clickable,map:this._googleMap.googleMap,icon:this._icon||t.icon,visible:this._visible??t.visible})}_assertInitialized(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Nt({type:n,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged",markerInitialized:"markerInitialized"},exportAs:["mapMarker"],features:[Zr([{provide:Fq,useExisting:n}]),Gr]})}return n})();var xv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=hr({type:n});static \u0275inj=fr({})}return n})();function Vq(n,e){if(n&1&&ir(0,"map-marker",2),n&2){let t=on();at("position",t.markerPosition)("label","Selected Location")}}var Dv=class n{locationSelected=new Ce;center={lat:50.06143,lng:19.93658};markerPosition=null;zoom=14;mapReady=!1;ngOnInit(){return I(this,null,function*(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{this.center={lat:e.coords.latitude,lng:e.coords.longitude}},e=>{console.warn("Geolocation permission denied or unavailable.",e)})})}onMapClick(e){if(e.latLng){let t=e.latLng.lat(),r=e.latLng.lng();this.markerPosition={lat:t,lng:r},this.locationSelected.emit({lat:t,lng:r})}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-shop-map"]],outputs:{locationSelected:"locationSelected"},decls:2,vars:3,consts:[["height","100%","width","100%",3,"mapClick","center","zoom"],[3,"position","label",4,"ngIf"],[3,"position","label"]],template:function(t,r){t&1&&(te(0,"google-map",0),je("mapClick",function(o){return r.onMapClick(o)}),gn(1,Vq,1,2,"map-marker",1),ne()),t&2&&(at("center",r.center)("zoom",r.zoom),be(),at("ngIf",r.markerPosition))},dependencies:[sr,Yr,xv,df,Av],encapsulation:2})};function Bq(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function Uq(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var jq=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mk=function(n){jq(e,n);function e(t,r){var i=this.constructor,o=n.call(this,t,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),Bq(o,i.prototype),Uq(o),o}return e}(Error);var zq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hq=function(n){zq(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(Mk),et=Hq;var $q=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gq=function(n){$q(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(et),wt=Gq;var Wq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qq=function(n){Wq(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(et),$=qq;var Kq=function(){function n(e){if(this.binarizer=e,e===null)throw new $("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var o=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(o))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),ff=Kq;var Zq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xq=function(n){Zq(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(et),He=Xq;var Yq=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),oA=Yq;var Qq=function(){function n(){}return n.arraycopy=function(e,t,r,i,o){for(;o--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),Ee=Qq;var Jq=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),eK=function(n){Jq(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(et),bu=eK;var tK=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),nK=function(n){tK(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(bu),sA=nK;var rK=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iK=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var o=t;o<r;o++)e[o]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new $("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new sA(t);if(r>e)throw new sA(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var o=rK(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=31*i+a}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,o=new Int32Array(i);return Ee.arraycopy(e,t,o,0,i),o},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,a=r(t,e[s]);if(a>0)i=s+1;else if(a<0)o=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),qe=iK;var oK=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),ie=oK;var sK=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Ee.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=r[i]}var a=i*32+ie.numberOfTrailingZeros(o);return a>t?t:a},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=~r[i]}var a=i*32+ie.numberOfTrailingZeros(o);return a>t?t:a},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new $;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=r;s<=i;s++){var a=s>r?0:e&31,c=s<i?31:t&31,u=(2<<c)-(1<<a);o[s]|=u}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new $;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),s=this.bits,a=i;a<=o;a++){var c=a>i?0:e&31,u=a<o?31:t&31,l=(2<<u)-(1<<c)&4294967295;if((s[a]&l)!==(r?l:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new $("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new $("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var o=0;o<i;o++){for(var s=0,a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;t[r+o]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-o]=s}if(this.size!==r*32){for(var a=r*32-this.size,c=e[0]>>>a,o=1;o<r;o++){var u=e[o];c|=u<<32-a,e[o-1]=c,c=u>>>a}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&qe.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+qe.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),ut=sK;var Nk=function(n){return n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS",n}(Nk||{}),le=Nk;var aK=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cK=function(n){aK(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(et),z=cK;var uK=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nt=function(n){return n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR",n}(nt||{}),lK=function(){function n(e,t,r){for(var i,o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,u=0,l=c.length;u!==l;u++){var f=c[u];n.VALUES_TO_ECI.set(f,this)}try{for(var h=uK(s),p=h.next();!p.done;p=h.next()){var m=p.value;n.NAME_TO_ECI.set(m,this)}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new z("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new z("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new z("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(nt.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(nt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(nt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(nt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(nt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(nt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(nt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(nt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(nt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(nt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(nt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(nt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(nt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(nt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(nt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(nt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(nt.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(nt.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(nt.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(nt.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(nt.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(nt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(nt.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(nt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(nt.Big5,28,"Big5"),n.GB18030=new n(nt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(nt.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),lt=lK;var dK=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fK=function(n){dK(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(et),Ma=fK;var hK=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof lt?e:lt.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var a=e[o].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(r.equals(lt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ma("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(lt.UTF8)||e.equals(lt.ISO8859_1)||e.equals(lt.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},n}(),nn=hK;var pK=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return nn.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(le.CHARACTER_SET)!==void 0)return t.get(le.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,a=0,c=0,u=0,l=0,f=0,h=0,p=0,m=0,y=0,_=0,A=0,b=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,R=0;R<r&&(i||o||s);R++){var O=e[R]&255;s&&(a>0?(O&128)===0?s=!1:a--:(O&128)!==0&&((O&64)===0?s=!1:(a++,(O&32)===0?c++:(a++,(O&16)===0?u++:(a++,(O&8)===0?l++:s=!1))))),i&&(O>127&&O<160?i=!1:O>159&&(O<192||O===215||O===247)&&A++),o&&(f>0?O<64||O===127||O>252?o=!1:f--:O===128||O===160||O>239?o=!1:O>160&&O<224?(h++,m=0,p++,p>y&&(y=p)):O>127?(f++,p=0,m++,m>_&&(_=m)):(p=0,m=0))}return s&&a>0&&(s=!1),o&&f>0&&(o=!1),s&&(b||c+u+l>0)?n.UTF8:o&&(n.ASSUME_SHIFT_JIS||y>=3||_>=3)?n.SHIFT_JIS:i&&o?y===2&&h===2||A*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:o?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function o(a,c,u,l,f,h){if(a==="%%")return"%";if(t[++i]!==void 0){a=l?parseInt(l.substr(1)):void 0;var p=f?parseInt(f.substr(1)):void 0,m;switch(h){case"s":m=t[i];break;case"c":m=t[i][0];break;case"f":m=parseFloat(t[i]).toFixed(a);break;case"p":m=parseFloat(t[i]).toPrecision(a);break;case"e":m=parseFloat(t[i]).toExponential(a);break;case"x":m=parseInt(t[i]).toString(p||16);break;case"d":m=parseFloat(parseInt(t[i],p||10).toPrecision(a)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(p);for(var y=parseInt(u),_=u&&u[0]+""=="0"?"0":" ";m.length<y;)m=c!==void 0?m+_:_+m;return m}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},n.getBytes=function(e,t){return nn.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=lt.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=lt.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=lt.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),de=pK;var gK=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=de.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),J=gK;var mK=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new $("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),o=0;o<t;o++)for(var s=e[o],a=0;a<r;a++)s[a]&&i.set(a,o);return i},n.parseFromString=function(e,t,r){if(e===null)throw new $("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,a=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new $("row lengths do not match");s=o,c++}u++}else if(e.substring(u,u+t.length)===t)u+=t.length,i[o]=!0,o++;else if(e.substring(u,u+r.length)===r)u+=r.length,i[o]=!1,o++;else throw new $("illegal character encountered: "+e.substring(u));if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new $("row lengths do not match");c++}for(var l=new n(a,c),f=0;f<o;f++)i[f]&&l.set(Math.floor(f%a),Math.floor(f/a));return l},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new $("input matrix dimensions do not match");for(var t=new ut(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var a=o*r,c=e.getRow(o,t).getBitArray(),u=0;u<r;u++)i[a+u]^=c[u]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new $("Left and top must be nonnegative");if(i<1||r<1)throw new $("Height and width must be at least 1");var o=e+r,s=t+i;if(s>this.height||o>this.width)throw new $("The region must fit inside the matrix");for(var a=this.rowSize,c=this.bits,u=t;u<s;u++)for(var l=u*a,f=e;f<o;f++)c[l+Math.floor(f/32)]|=1<<(f&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new ut(this.width):t.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)t.setBulk(s*32,i[o+s]);return t},n.prototype.setRow=function(e,t){Ee.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new ut(e),i=new ut(e),o=0,s=Math.floor((t+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(t-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,o=e,s=t,a=-1,c=-1,u=0;u<t;u++)for(var l=0;l<r;l++){var f=i[u*r+l];if(f!==0){if(u<s&&(s=u),u>c&&(c=u),l*32<o){for(var h=0;(f<<31-h&4294967295)===0;)h++;l*32+h<o&&(o=l*32+h)}if(l*32+31>a){for(var h=31;!(f>>>h);)h--;l*32+h>a&&(a=l*32+h)}}}return a<o||c<s?null:Int32Array.from([o,s,a-o+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,o=r%e*32,s=t[r],a=0;(s<<31-a&4294967295)===0;)a++;return o+=a,Int32Array.from([o,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,s=t[r],a=31;!(s>>>a);)a--;return o+=a,Int32Array.from([o,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&qe.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+qe.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new J,o=0,s=this.height;o<s;o++){for(var a=0,c=this.width;a<c;a++)i.append(this.get(a,o)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),dt=mK;var vK=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yK=function(n){vK(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(et),P=yK;var _K=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wK=function(n){_K(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new ut(o):r.clear(),this.initArrays(o);for(var s=i.getRow(t,this.luminances),a=this.buckets,c=0;c<o;c++)a[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(a);if(o<3)for(var c=0;c<o;c++)(s[c]&255)<u&&r.set(c);else for(var l=s[0]&255,f=s[1]&255,c=1;c<o-1;c++){var h=s[c+1]&255;(f*4-l-h)/2<u&&r.set(c),l=f,f=h}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),o=new dt(r,i);this.initArrays(r);for(var s=this.buckets,a=1;a<5;a++)for(var c=Math.floor(i*a/5),u=t.getRow(c,this.luminances),l=Math.floor(r*4/5),f=Math.floor(r/5);f<l;f++){var h=u[f]&255;s[h>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(s),m=t.getMatrix(),a=0;a<i;a++)for(var y=a*r,f=0;f<r;f++){var h=m[y+f]&255;h<p&&o.set(f,a)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,o=0,s=0,a=0;a<r;a++)t[a]>s&&(o=a,s=t[a]),t[a]>i&&(i=t[a]);for(var c=0,u=0,a=0;a<r;a++){var l=a-o,f=t[a]*l*l;f>u&&(c=a,u=f)}if(o>c){var h=o;o=c,c=h}if(c-o<=r/16)throw new P;for(var p=c-1,m=-1,a=c-1;a>o;a--){var y=a-o,f=y*y*(c-a)*(i-t[a]);f>m&&(p=a,m=f)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(oA),aA=wK;var EK=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),IK=function(n){EK(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var a=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&a++;var c=e.calculateBlackPoints(o,s,a,r,i),u=new dt(r,i);e.calculateThresholdForBlock(o,s,a,r,i,c,u),this.matrix=u}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,o,s,a,c){for(var u=s-e.BLOCK_SIZE,l=o-e.BLOCK_SIZE,f=0;f<i;f++){var h=f<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var p=e.cap(f,2,i-3),m=0;m<r;m++){var y=m<<e.BLOCK_SIZE_POWER;y>l&&(y=l);for(var _=e.cap(m,2,r-3),A=0,b=-2;b<=2;b++){var R=a[p+b];A+=R[_-2]+R[_-1]+R[_]+R[_+1]+R[_+2]}var O=A/25;e.thresholdBlock(t,y,h,O,o,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,o,s,a){for(var c=0,u=i*s+r;c<e.BLOCK_SIZE;c++,u+=s)for(var l=0;l<e.BLOCK_SIZE;l++)(t[u+l]&255)<=o&&a.set(r+l,i+c)},e.calculateBlackPoints=function(t,r,i,o,s){for(var a=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,u=new Array(i),l=0;l<i;l++){u[l]=new Int32Array(r);var f=l<<e.BLOCK_SIZE_POWER;f>a&&(f=a);for(var h=0;h<r;h++){var p=h<<e.BLOCK_SIZE_POWER;p>c&&(p=c);for(var m=0,y=255,_=0,A=0,b=f*o+p;A<e.BLOCK_SIZE;A++,b+=o){for(var R=0;R<e.BLOCK_SIZE;R++){var O=t[b+R]&255;m+=O,O<y&&(y=O),O>_&&(_=O)}if(_-y>e.MIN_DYNAMIC_RANGE)for(A++,b+=o;A<e.BLOCK_SIZE;A++,b+=o)for(var R=0;R<e.BLOCK_SIZE;R++)m+=t[b+R]&255}var V=m>>e.BLOCK_SIZE_POWER*2;if(_-y<=e.MIN_DYNAMIC_RANGE&&(V=y/2,l>0&&h>0)){var B=(u[l-1][h]+2*u[l][h-1]+u[l-1][h-1])/4;y<B&&(V=B)}u[l][h]=V}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(aA),hf=IK;var CK=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new Ma("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new Ma("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new Ma("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new J,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=i[o]&255,a=void 0;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",t.append(a)}t.append(`
`)}return t.toString()},n}(),ci=CK;var AK=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xK=function(n){AK(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(t[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,o){return new e(this.delegate.crop(t,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(ci),Co=xK;var DK=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ok=function(n){DK(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,o){o===void 0&&(o=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var a=0,c=0,u=t.length;a<u;a+=4,c++){var l=void 0,f=t[a+3];if(f===0)l=255;else{var h=t[a],p=t[a+1],m=t[a+2];l=306*h+601*p+117*m+512>>10}s[c]=l}else for(var a=0,c=0,y=t.length;a<y;a+=4,c++){var l=void 0,f=t[a+3];if(f===0)l=255;else{var h=t[a],p=t[a+1],m=t[a+2];l=306*h+601*p+117*m+512>>10}s[c]=255-l}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new $("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*a),u=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*a);return r.width=c,r.height=u,i.translate(c/2,u/2),i.rotate(o),i.drawImage(this.canvas,s/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Co(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(ci);var Pk=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}();var Gn=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})},Wn=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(l){u=[6,l],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},bK=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lr=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Gn(this,void 0,void 0,function(){var e,t,r,i,o,s,a,c,u,l,f,h;return Wn(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),t=[];try{for(r=bK(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device "+(t.length+1),u=o.groupId,l={deviceId:a,label:c,kind:s,groupId:u},t.push(l))}catch(m){f={error:m}}finally{try{i&&!i.done&&(h=r.return)&&h.call(r)}finally{if(f)throw f.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Gn(this,void 0,void 0,function(){var e;return Wn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new Pk(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Gn(this,void 0,void 0,function(){var t;return Wn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Gn(this,void 0,void 0,function(){return Wn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Gn(this,void 0,void 0,function(){var r,i;return Wn(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Gn(this,void 0,void 0,function(){var r;return Wn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Gn(this,void 0,void 0,function(){var r,i;return Wn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Gn(this,void 0,void 0,function(){return Wn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Gn(this,void 0,void 0,function(){var i,o;return Wn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Gn(this,void 0,void 0,function(){var i;return Wn(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,o.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Gn(this,void 0,void 0,function(){var i;return Wn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Gn(this,void 0,void 0,function(){var r;return Wn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Gn(this,void 0,void 0,function(){var t;return Wn(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new wt("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new wt("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new wt("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new wt("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new wt("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new wt("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new wt("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new wt("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new wt("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new wt("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Gn(this,void 0,void 0,function(){return Wn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Gn(this,void 0,void 0,function(){return Wn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,a){if(i._stopAsyncDecode){a(new P("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(h){var u=t&&h instanceof P,l=h instanceof He||h instanceof z,f=l&&r;if(u||f)return setTimeout(o,i._timeBetweenDecodingAttempts,s,a);a(h)}};return new Promise(function(s,a){return o(s,a)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);t(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof He||c instanceof z,a=c instanceof P;(s||a)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){var t=this.getCaptureCanvasContext(e),r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var i=this.getCaptureCanvas(e),o=new Ok(i,r),s=new hf(o);return new ff(s)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}();var SK=function(){function n(e,t,r,i,o,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=Ee.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=Ee.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Ee.arraycopy(t,0,r,0,t.length),Ee.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),Ge=SK;var kk=function(n){return n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",n}(kk||{}),G=kk;var Fk=function(n){return n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",n}(Fk||{}),vt=Fk;var TK=function(){function n(e,t,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Ao=TK;var RK=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new $;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),Na=RK;var MK=function(){function n(e,t){if(t.length===0)throw new $;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Ee.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,o=t.length;i!==o;i++){var s=t[i];r=Na.addOrSubtract(r,s)}return r}r=t[0];for(var a=t.length,c=this.field,i=1;i<a;i++)r=Na.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new $("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;Ee.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=Na.addOrSubtract(t[a-s],r[a]);return new n(this.field,o)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new $("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=this.field,c=0;c<r;c++)for(var u=t[c],l=0;l<o;l++)s[c+l]=Na.addOrSubtract(s[c+l],a.multiply(u,i[l]));return new n(a,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),o=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(o[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new $;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,a=0;a<i;a++)o[a]=s.multiply(r[a],t);return new n(s,o)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new $("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new $("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),u=e.multiplyByMonomial(a,c),l=t.buildMonomial(a,c);r=r.addOrSubtract(l),i=i.addOrSubtract(u)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),Vr=MK;var NK=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),OK=function(n){NK(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(et),pf=OK;var PK=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kK=function(n){PK(e,n);function e(t,r,i){var o=n.call(this)||this;o.primitive=t,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),a=1,c=0;c<r;c++)s[c]=a,a*=2,a>=r&&(a^=t,a&=r-1);o.expTable=s;for(var u=new Int32Array(r),c=0;c<r-1;c++)u[s[c]]=c;return o.logTable=u,o.zero=new Vr(o,Int32Array.from([0])),o.one=new Vr(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new $;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Vr(this,i)},e.prototype.inverse=function(t){if(t===0)throw new pf;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+ie.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Na),kt=kK;var FK=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LK=function(n){FK(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(et),Su=LK;var VK=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BK=function(n){VK(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(et),zt=BK;var UK=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new Vr(r,e),o=new Int32Array(t),s=!0,a=0;a<t;a++){var c=i.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=c,c!==0&&(s=!1)}if(!s)for(var u=new Vr(r,o),l=this.runEuclideanAlgorithm(r.buildMonomial(t,1),u,t),f=l[0],h=l[1],p=this.findErrorLocations(f),m=this.findErrorMagnitudes(h,p),a=0;a<p.length;a++){var y=e.length-1-r.log(p[a]);if(y<0)throw new Su("Bad error location");e[y]=kt.addOrSubtract(e[y],m[a])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,s=e,a=t,c=o.getZero(),u=o.getOne();a.getDegree()>=(r/2|0);){var l=s,f=c;if(s=a,c=u,s.isZero())throw new Su("r_{i-1} was zero");a=l;for(var h=o.getZero(),p=s.getCoefficient(s.getDegree()),m=o.inverse(p);a.getDegree()>=s.getDegree()&&!a.isZero();){var y=a.getDegree()-s.getDegree(),_=o.multiply(a.getCoefficient(a.getDegree()),m);h=h.addOrSubtract(o.buildMonomial(y,_)),a=a.addOrSubtract(s.multiplyByMonomial(y,_))}if(u=h.multiply(c).addOrSubtract(f),a.getDegree()>=s.getDegree())throw new zt("Division algorithm failed to reduce polynomial?")}var A=u.getCoefficient(0);if(A===0)throw new Su("sigmaTilde(0) was zero");var b=o.inverse(A),R=u.multiplyScalar(b),O=a.multiplyScalar(b);return[R,O]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,o=this.field,s=1;s<o.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==t)throw new Su("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var a=o.inverse(t[s]),c=1,u=0;u<r;u++)if(s!==u){var l=o.multiply(t[u],a),f=(l&1)===0?l|1:l&-2;c=o.multiply(c,f)}i[s]=o.multiply(e.evaluateAt(a),o.inverse(c)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],a))}return i},n}(),xo=UK;var Mn=function(n){return n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY",n}(Mn||{}),jK=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),o=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),a=new Ao(o,s,null,null);return a.setNumBits(i.length),a},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=Mn.UPPER,i=Mn.UPPER,o="",s=0;s<t;)if(i===Mn.BINARY){if(t-s<5)break;var a=n.readCode(e,s,5);if(s+=5,a===0){if(t-s<11)break;a=n.readCode(e,s,11)+31,s+=11}for(var c=0;c<a;c++){if(t-s<8){s=t;break}var u=n.readCode(e,s,8);o+=de.castAsNonUtf8Char(u),s+=8}i=r}else{var l=i===Mn.DIGIT?4:5;if(t-s<l)break;var u=n.readCode(e,s,l);s+=l;var f=n.getCharacter(i,u);f.startsWith("CTRL_")?(r=i,i=n.getTable(f.charAt(5)),f.charAt(6)==="L"&&(r=i)):(o+=f,i=r)}return o},n.getTable=function(e){switch(e){case"L":return Mn.LOWER;case"P":return Mn.PUNCT;case"M":return Mn.MIXED;case"D":return Mn.DIGIT;case"B":return Mn.BINARY;case"U":default:return Mn.UPPER}},n.getCharacter=function(e,t){switch(e){case Mn.UPPER:return n.UPPER_TABLE[t];case Mn.LOWER:return n.LOWER_TABLE[t];case Mn.MIXED:return n.MIXED_TABLE[t];case Mn.PUNCT:return n.PUNCT_TABLE[t];case Mn.DIGIT:return n.DIGIT_TABLE[t];default:throw new zt("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=kt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=kt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=kt.AZTEC_DATA_10):(r=12,t=kt.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new z;for(var s=e.length%r,a=new Int32Array(o),c=0;c<o;c++,s+=r)a[c]=n.readCode(e,s,r);try{var u=new xo(t);u.decode(a,o-i)}catch(_){throw new z(_)}for(var l=(1<<r)-1,f=0,c=0;c<i;c++){var h=a[c];if(h===0||h===l)throw new z;(h===1||h===l-1)&&f++}for(var p=new Array(i*r-f),m=0,c=0;c<i;c++){var h=a[c];if(h===1||h===l-1)p.fill(h>1,m,m+r-1),m+=r-1;else for(var y=r-1;y>=0;--y)p[m++]=(h&1<<y)!==0}return p},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var a=0;a<o.length;a++)o[a]=a;else for(var c=i+1+2*ie.truncDivision(ie.truncDivision(i,2)-1,15),u=i/2,l=ie.truncDivision(c,2),a=0;a<u;a++){var f=a+ie.truncDivision(a,15);o[u-a-1]=l-f-1,o[u+a]=l+f+1}for(var a=0,h=0;a<r;a++){for(var p=(r-a)*4+(t?9:12),m=a*2,y=i-1-m,_=0;_<p;_++)for(var A=_*2,b=0;b<2;b++)s[h+A+b]=e.get(o[m+b],o[m+_]),s[h+2*p+A+b]=e.get(o[m+_],o[y-b]),s[h+4*p+A+b]=e.get(o[y-b],o[y-_]),s[h+6*p+A+b]=e.get(o[y-_],o[m+b]);h+=p*8}return s},n.readCode=function(e,t,r){for(var i=0,o=t;o<t+r;o++)i<<=1,e[o]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),bv=jK;var zK=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var o=e-r,s=t-i;return Math.sqrt(o*o+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var o=e[r];t+=o}return t},n}(),Ie=zK;var HK=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),gf=HK;var $K=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*gf.floatToIntBits(this.x)+gf.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,a;if(r>=t&&r>=i?(s=e[0],o=e[1],a=e[2]):i>=r&&i>=t?(s=e[1],o=e[0],a=e[2]):(s=e[2],o=e[0],a=e[1]),this.crossProductZ(o,s,a)<0){var c=o;o=a,a=c}e[0]=o,e[1]=s,e[2]=a},n.distance=function(e,t){return Ie.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,o=t.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},n}(),q=$K;var GK=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),Oa=GK;var WK=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qK=function(n){WK(e,n);function e(t,r,i,o,s){var a=n.call(this,t,r)||this;return a.compact=i,a.nbDatablocks=o,a.nbLayers=s,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(Oa),cA=qK;var KK=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new P}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,c=!1,u=!1,l=!1,f=!1,h=this.width,p=this.height;s;){s=!1;for(var m=!0;(m||!c)&&t<h;)m=this.containsBlackPoint(r,i,t,!1),m?(t++,s=!0,c=!0):c||t++;if(t>=h){o=!0;break}for(var y=!0;(y||!u)&&i<p;)y=this.containsBlackPoint(e,t,i,!0),y?(i++,s=!0,u=!0):u||i++;if(i>=p){o=!0;break}for(var _=!0;(_||!l)&&e>=0;)_=this.containsBlackPoint(r,i,e,!1),_?(e--,s=!0,l=!0):l||e--;if(e<0){o=!0;break}for(var A=!0;(A||!f)&&r>=0;)A=this.containsBlackPoint(e,t,r,!0),A?(r--,s=!0,f=!0):f||r--;if(r<0){o=!0;break}s&&(a=!0)}if(!o&&a){for(var b=t-e,R=null,O=1;R===null&&O<b;O++)R=this.getBlackPointOnSegment(e,i-O,e+O,i);if(R==null)throw new P;for(var V=null,O=1;V===null&&O<b;O++)V=this.getBlackPointOnSegment(e,r+O,e+O,r);if(V==null)throw new P;for(var B=null,O=1;B===null&&O<b;O++)B=this.getBlackPointOnSegment(t,r+O,t-O,r);if(B==null)throw new P;for(var x=null,O=1;x===null&&O<b;O++)x=this.getBlackPointOnSegment(t,i-O,t-O,i);if(x==null)throw new P;return this.centerEdges(x,R,B,V)}else throw new P},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var o=Ie.round(Ie.distance(e,t,r,i)),s=(r-e)/o,a=(i-t)/o,c=this.image,u=0;u<o;u++){var l=Ie.round(e+u*s),f=Ie.round(t+u*a);if(c.get(l,f))return new q(l,f)}return null},n.prototype.centerEdges=function(e,t,r,i){var o=e.getX(),s=e.getY(),a=t.getX(),c=t.getY(),u=r.getX(),l=r.getY(),f=i.getX(),h=i.getY(),p=n.CORR;return o<this.width/2?[new q(f-p,h+p),new q(a+p,c+p),new q(u-p,l-p),new q(o+p,s-p)]:[new q(f+p,h+p),new q(a+p,c-p),new q(u-p,l+p),new q(o-p,s-p)]},n.prototype.containsBlackPoint=function(e,t,r,i){var o=this.image;if(i){for(var s=e;s<=t;s++)if(o.get(s,r))return!0}else for(var a=e;a<=t;a++)if(o.get(r,a))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),Tu=KK;var ZK=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<t.length&&o;s+=2){var a=Math.floor(t[s]),c=Math.floor(t[s+1]);if(a<-1||a>r||c<-1||c>i)throw new P;o=!1,a===-1?(t[s]=0,o=!0):a===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}o=!0;for(var s=t.length-2;s>=0&&o;s-=2){var a=Math.floor(t[s]),c=Math.floor(t[s+1]);if(a<-1||a>r||c<-1||c>i)throw new P;o=!1,a===-1?(t[s]=0,o=!0):a===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}},n}(),Sv=ZK;var XK=function(){function n(e,t,r,i,o,s,a,c,u){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=a,this.a23=c,this.a33=u}return n.quadrilateralToQuadrilateral=function(e,t,r,i,o,s,a,c,u,l,f,h,p,m,y,_){var A=n.quadrilateralToSquare(e,t,r,i,o,s,a,c),b=n.squareToQuadrilateral(u,l,f,h,p,m,y,_);return b.times(A)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,u=this.a31,l=this.a32,f=this.a33,h=0;h<t;h+=2){var p=e[h],m=e[h+1],y=o*p+c*m+f;e[h]=(r*p+s*m+u)/y,e[h+1]=(i*p+a*m+l)/y}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,u=this.a31,l=this.a32,f=this.a33,h=e.length,p=0;p<h;p++){var m=e[p],y=t[p],_=o*m+c*y+f;e[p]=(r*m+s*y+u)/_,t[p]=(i*m+a*y+l)/_}},n.squareToQuadrilateral=function(e,t,r,i,o,s,a,c){var u=e-r+o-a,l=t-i+s-c;if(u===0&&l===0)return new n(r-e,o-r,e,i-t,s-i,t,0,0,1);var f=r-o,h=a-o,p=i-s,m=c-s,y=f*m-h*p,_=(u*m-h*l)/y,A=(f*l-u*p)/y;return new n(r-e+_*r,a-e+A*a,e,i-t+_*i,c-t+A*c,t,_,A,1)},n.quadrilateralToSquare=function(e,t,r,i,o,s,a,c){return n.squareToQuadrilateral(e,t,r,i,o,s,a,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),mf=XK;var YK=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),QK=function(n){YK(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,o,s,a,c,u,l,f,h,p,m,y,_,A,b,R,O){var V=mf.quadrilateralToQuadrilateral(o,s,a,c,u,l,f,h,p,m,y,_,A,b,R,O);return this.sampleGridWithTransform(t,r,i,V)},e.prototype.sampleGridWithTransform=function(t,r,i,o){if(r<=0||i<=0)throw new P;for(var s=new dt(r,i),a=new Float32Array(2*r),c=0;c<i;c++){for(var u=a.length,l=c+.5,f=0;f<u;f+=2)a[f]=f/2+.5,a[f+1]=l;o.transformPoints(a),Sv.checkAndNudgePoints(t,a);try{for(var f=0;f<u;f+=2)t.get(Math.floor(a[f]),Math.floor(a[f+1]))&&s.set(f/2,c)}catch{throw new P}}return s},e}(Sv),uA=QK;var JK=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new uA,n}(),Pa=JK;var qn=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new q(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}();var eZ=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new cA(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new P;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(o,s,a){var c=(o>>t-2<<1)+(o&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(ie.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new P},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),a=r-1;a>=0;--a)s[a]=e&15,e>>=4;try{var c=new xo(kt.AZTEC_PARAM);c.decode(s,o)}catch{throw new P}for(var u=0,a=0;a<i;a++)u=(u<<4)+s[a];return u},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(r,s,1,1),u=this.getFirstDifferent(i,s,-1,1),l=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(l,a)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(a,c,u,l))break}t=a,r=c,i=u,o=l,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new P;this.compact=this.nbCenterLayers===5;var h=new q(t.getX()+.5,t.getY()-.5),p=new q(r.getX()+.5,r.getY()+.5),m=new q(i.getX()-.5,i.getY()+.5),y=new q(o.getX()-.5,o.getY()-.5);return this.expandSquare([h,p,m,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var o=new Tu(this.image).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new qn(s+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new qn(s+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new qn(s-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new qn(s-7,a-7),!1,-1,-1).toResultPoint()}var c=Ie.round((e.getX()+i.getX()+t.getX()+r.getX())/4),u=Ie.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var o=new Tu(this.image,15,c,u).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new qn(c+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new qn(c+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new qn(c-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new qn(c-7,u-7),!1,-1,-1).toResultPoint()}return c=Ie.round((e.getX()+i.getX()+t.getX()+r.getX())/4),u=Ie.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new qn(c,u)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,o){var s=Pa.getInstance(),a=this.getDimension(),c=a/2-this.nbCenterLayers,u=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,c,c,u,c,u,u,c,u,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,o=this.distanceResultPoint(e,t),s=o/r,a=e.getX(),c=e.getY(),u=s*(t.getX()-e.getX())/o,l=s*(t.getY()-e.getY())/o,f=0;f<r;f++)this.image.get(Ie.round(a+f*u),Ie.round(c+f*l))&&(i|=1<<r-f-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var o=3;e=new qn(e.getX()-o,e.getY()+o),t=new qn(t.getX()-o,t.getY()-o),r=new qn(r.getX()+o,r.getY()-o),i=new qn(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var a=this.getColor(e,t);return a!==s||(a=this.getColor(t,r),a!==s)?!1:(a=this.getColor(r,i),a===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,o=(t.getY()-e.getY())/r,s=0,a=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),l=Math.ceil(r),f=0;f<l;f++)a+=i,c+=o,this.image.get(Ie.round(a),Ie.round(c))!==u&&s++;var h=s/r;return h>.1&&h<.9?0:h<=.1===u?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===t;)s+=i;return s-=i,new qn(o,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new q(a+i*o,c+i*s),l=new q(a-i*o,c-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var f=new q(a+i*o,c+i*s),h=new q(a-i*o,c-i*s),p=[u,f,l,h];return p},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=Ie.round(e.getX()),r=Ie.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return Ie.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return Ie.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ie.truncDivision(this.nbLayers-4,8)+1)+15},n}(),lA=eZ;var tZ=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new lA(e.getBlackMatrix()),o=null,s=null;try{var a=i.detectMirror(!1);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new bv().decode(a)}catch(f){r=f}if(s==null)try{var a=i.detectMirror(!0);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new bv().decode(a)}catch(f){throw r??f}var c=new Ge(s.getText(),s.getRawBytes(),s.getNumBits(),o,G.AZTEC,Ee.currentTimeMillis()),u=s.getByteSegments();u!=null&&c.putMetadata(vt.BYTE_SEGMENTS,u);var l=s.getECLevel();return l!=null&&c.putMetadata(vt.ERROR_CORRECTION_LEVEL,l),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(le.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),ms=tZ;var nZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),W0e=function(n){nZ(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new ms,t)||this}return e}(Lr);var rZ=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(le.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),s=o.getResultMetadata(),a=270;s!==null&&s.get(vt.ORIENTATION)===!0&&(a=a+s.get(vt.ORIENTATION)%360),o.putMetadata(vt.ORIENTATION,a);var c=o.getResultPoints();if(c!==null)for(var u=i.getHeight(),l=0;l<c.length;l++)c[l]=new q(u-c[l].getY()-1,c[l].getX());return o}else throw new P}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),o=new ut(r),s=t&&t.get(le.TRY_HARDER)===!0,a=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var u=Math.trunc(i/2),l=0;l<c;l++){var f=Math.trunc((l+1)/2),h=(l&1)===0,p=u+a*(h?f:-f);if(p<0||p>=i)break;try{o=e.getBlackRow(p,o)}catch{continue}for(var m=function(b){if(b===1&&(o.reverse(),t&&t.get(le.NEED_RESULT_POINT_CALLBACK)===!0)){var R=new Map;t.forEach(function(B,x){return R.set(x,B)}),R.delete(le.NEED_RESULT_POINT_CALLBACK),t=R}try{var O=y.decodeRow(p,o,t);if(b===1){O.putMetadata(vt.ORIENTATION,180);var V=O.getResultPoints();V!==null&&(V[0]=new q(r-V[0].getX()-1,V[0].getY()),V[1]=new q(r-V[1].getX()-1,V[1].getY()))}return{value:O}}catch{}},y=this,_=0;_<2;_++){var A=m(_);if(typeof A=="object")return A.value}}throw new P},n.recordPattern=function(e,t,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(t>=s)throw new P;for(var a=!e.get(t),c=0,u=t;u<s;){if(e.get(u)!==a)r[c]++;else{if(++c===i)break;r[c]=1,a=!a}u++}if(!(c===i||c===i-1&&u===s))throw new P},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new P;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return Number.POSITIVE_INFINITY;var c=o/s;r*=c;for(var u=0,l=0;l<i;l++){var f=e[l],h=t[l]*c,p=f>h?f-h:h-f;if(p>r)return Number.POSITIVE_INFINITY;u+=p}return u/o},n}(),Qe=rZ;var iZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oZ=function(n){iZ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),a=i,c=!1,u=6,l=i;l<r;l++)if(t.get(l)!==c)s[o]++;else{if(o===u-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var m=Qe.patternMatchVariance(s,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,h=p)}if(h>=0&&t.isRange(Math.max(0,a-(l-a)/2),a,!1))return Int32Array.from([a,l,h]);a+=s[0]+s[1],s=s.slice(2,s.length),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,c=!c}throw new P},e.decodeCode=function(t,r,i){Qe.recordPattern(t,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,a=0;a<e.CODE_PATTERNS.length;a++){var c=e.CODE_PATTERNS[a],u=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);u<o&&(o=u,s=a)}if(s>=0)return s;throw new P},e.prototype.decodeRow=function(t,r,i){var o=i&&i.get(le.ASSUME_GS1)===!0,s=e.findStartPattern(r),a=s[2],c=0,u=new Uint8Array(20);u[c++]=a;var l;switch(a){case e.CODE_START_A:l=e.CODE_CODE_A;break;case e.CODE_START_B:l=e.CODE_CODE_B;break;case e.CODE_START_C:l=e.CODE_CODE_C;break;default:throw new z}for(var f=!1,h=!1,p="",m=s[0],y=s[1],_=Int32Array.from([0,0,0,0,0,0]),A=0,b=0,R=a,O=0,V=!0,B=!1,x=!1;!f;){var E=h;switch(h=!1,A=b,b=e.decodeCode(r,_,y),u[c++]=b,b!==e.CODE_STOP&&(V=!0),b!==e.CODE_STOP&&(O++,R+=O*b),m=y,y+=_.reduce(function(Ui,ji){return Ui+ji},0),b){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new z}switch(l){case e.CODE_CODE_A:if(b<64)x===B?p+=String.fromCharCode(32+b):p+=String.fromCharCode(32+b+128),x=!1;else if(b<96)x===B?p+=String.fromCharCode(b-64):p+=String.fromCharCode(b+64),x=!1;else switch(b!==e.CODE_STOP&&(V=!1),b){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!B&&x?(B=!0,x=!1):B&&x?(B=!1,x=!1):x=!0;break;case e.CODE_SHIFT:h=!0,l=e.CODE_CODE_B;break;case e.CODE_CODE_B:l=e.CODE_CODE_B;break;case e.CODE_CODE_C:l=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(b<96)x===B?p+=String.fromCharCode(32+b):p+=String.fromCharCode(32+b+128),x=!1;else switch(b!==e.CODE_STOP&&(V=!1),b){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!B&&x?(B=!0,x=!1):B&&x?(B=!1,x=!1):x=!0;break;case e.CODE_SHIFT:h=!0,l=e.CODE_CODE_A;break;case e.CODE_CODE_A:l=e.CODE_CODE_A;break;case e.CODE_CODE_C:l=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(b<100)b<10&&(p+="0"),p+=b;else switch(b!==e.CODE_STOP&&(V=!1),b){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:l=e.CODE_CODE_A;break;case e.CODE_CODE_B:l=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}E&&(l=l===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var D=y-m;if(y=r.getNextUnset(y),!r.isRange(y,Math.min(r.getSize(),y+(y-m)/2),!1))throw new P;if(R-=O*A,R%103!==A)throw new He;var T=p.length;if(T===0)throw new P;T>0&&V&&(l===e.CODE_CODE_C?p=p.substring(0,T-2):p=p.substring(0,T-1));for(var M=(s[1]+s[0])/2,N=m+D/2,S=u.length,Rt=new Uint8Array(S),Xn=0;Xn<S;Xn++)Rt[Xn]=u[Xn];var qu=[new q(M,t),new q(N,t)];return new Ge(p,Rt,0,qu,G.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Qe),Tv=oZ;var sZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aZ=function(n){sZ(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,u=this.counters;u.fill(0),this.decodeRowResult="";var l=e.findAsteriskPattern(r,u),f=r.getNextSet(l[1]),h=r.getSize(),p,m;do{e.recordPattern(r,f,u);var y=e.toNarrowWidePattern(u);if(y<0)throw new P;p=e.patternToChar(y),this.decodeRowResult+=p,m=f;try{for(var _=(o=void 0,dA(u)),A=_.next();!A.done;A=_.next()){var b=A.value;f+=b}}catch(S){o={error:S}}finally{try{A&&!A.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}f=r.getNextSet(f)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var O=dA(u),V=O.next();!V.done;V=O.next()){var b=V.value;R+=b}}catch(S){a={error:S}}finally{try{V&&!V.done&&(c=O.return)&&c.call(O)}finally{if(a)throw a.error}}var B=f-m-R;if(f!==h&&B*2<R)throw new P;if(this.usingCheckDigit){for(var x=this.decodeRowResult.length-1,E=0,D=0;D<x;D++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(D));if(this.decodeRowResult.charAt(x)!==e.ALPHABET_STRING.charAt(E%43))throw new He;this.decodeRowResult=this.decodeRowResult.substring(0,x)}if(this.decodeRowResult.length===0)throw new P;var T;this.extendedMode?T=e.decodeExtended(this.decodeRowResult):T=this.decodeRowResult;var M=(l[1]+l[0])/2,N=m+R/2;return new Ge(T,null,0,[new q(M,t),new q(N,t)],G.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),o=t.getNextSet(0),s=0,a=o,c=!1,u=r.length,l=o;l<i;l++)if(t.get(l)!==c)r[s]++;else{if(s===u-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,a-Math.floor((l-a)/2)),a,!1))return[a,l];a+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new P},e.toNarrowWidePattern=function(t){var r,i,o=t.length,s=0,a;do{var c=2147483647;try{for(var u=(r=void 0,dA(t)),l=u.next();!l.done;l=u.next()){var f=l.value;f<c&&f>s&&(c=f)}}catch(y){r={error:y}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}s=c,a=0;for(var h=0,p=0,m=0;m<o;m++){var f=t[m];f>s&&(p|=1<<o-1-m,a++,h+=f)}if(a===3){for(var m=0;m<o&&a>0;m++){var f=t[m];if(f>s&&(a--,f*2>=h))return-1}return p}}while(a>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new P},e.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var a=t.charAt(o+1),c="\0";switch(s){case"+":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new z;break;case"$":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new z;break;case"%":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a==="X"||a==="Y"||a==="Z")c="\x7F";else throw new z;break;case"/":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new z;break}i+=c,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Qe),Rv=aZ;var cZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uZ=function(n){cZ(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,u=this.findAsteriskPattern(r),l=r.getNextSet(u[1]),f=r.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var p,m;do{e.recordPattern(r,l,h);var y=this.toPattern(h);if(y<0)throw new P;p=this.patternToChar(y),this.decodeRowResult+=p,m=l;try{for(var _=(o=void 0,fA(h)),A=_.next();!A.done;A=_.next()){var b=A.value;l+=b}}catch(D){o={error:D}}finally{try{A&&!A.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}l=r.getNextSet(l)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var O=fA(h),V=O.next();!V.done;V=O.next()){var b=V.value;R+=b}}catch(D){a={error:D}}finally{try{V&&!V.done&&(c=O.return)&&c.call(O)}finally{if(a)throw a.error}}if(l===f||!r.get(l))throw new P;if(this.decodeRowResult.length<2)throw new P;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var B=this.decodeExtended(this.decodeRowResult),x=(u[1]+u[0])/2,E=m+R/2;return new Ge(B,null,0,[new q(x,t),new q(E,t)],G.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,a=!1,c=o.length,u=0,l=i;l<r;l++)if(t.get(l)!==a)o[u]++;else{if(u===c-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,l]);s+=o[0]+o[1],o.copyWithin(0,2,2+u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,a=!a}throw new P},e.prototype.toPattern=function(t){var r,i,o=0;try{for(var s=fA(t),a=s.next();!a.done;a=s.next()){var c=a.value;o+=c}}catch(m){r={error:m}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var u=0,l=t.length,f=0;f<l;f++){var h=Math.round(t[f]*9/o);if(h<1||h>4)return-1;if((f&1)===0)for(var p=0;p<h;p++)u=u<<1|1;else u<<=h}return u},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new P},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new z;var a=t.charAt(o+1),c="\0";switch(s){case"d":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new z;break;case"a":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new z;break;case"b":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a>="X"&&a<="Z")c="\x7F";else throw new z;break;case"c":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new z;break}i+=c,o++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var o=1,s=0,a=r-1;a>=0;a--)s+=o*e.ALPHABET_STRING.indexOf(t.charAt(a)),++o>i&&(o=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new He},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Qe),Mv=uZ;var lZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dZ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fZ=function(n){lZ(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var o,s,a=this.decodeStart(r),c=this.decodeEnd(r),u=new J;e.decodeMiddle(r,a[1],c[0],u);var l=u.toString(),f=null;i!=null&&(f=i.get(le.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=l.length,p=!1,m=0;try{for(var y=dZ(f),_=y.next();!_.done;_=y.next()){var A=_.value;if(h===A){p=!0;break}A>m&&(m=A)}}catch(O){o={error:O}}finally{try{_&&!_.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}if(!p&&h>m&&(p=!0),!p)throw new z;var b=[new q(a[1],t),new q(c[0],t)],R=new Ge(l,null,0,b,G.ITF,new Date().getTime());return R},e.decodeMiddle=function(t,r,i,o){var s=new Int32Array(10),a=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),a.fill(0),c.fill(0);r<i;){Qe.recordPattern(t,r,s);for(var u=0;u<5;u++){var l=2*u;a[u]=s[l],c[u]=s[l+1]}var f=e.decodeDigit(a);o.append(f.toString()),f=this.decodeDigit(c),o.append(f.toString()),s.forEach(function(h){r+=h})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new P},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new P;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof P&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var o=i.length,s=new Int32Array(o),a=t.getSize(),c=!1,u=0,l=r;s.fill(0);for(var f=r;f<a;f++)if(t.get(f)!==c)s[u]++;else{if(u===o-1){if(Qe.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[l,f];l+=s[0]+s[1],Ee.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,c=!c}throw new P},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var a=e.PATTERNS[s],c=Qe.patternMatchVariance(t,a,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new P},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Qe),Nv=fZ;var hZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pZ=function(n){hZ(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,o=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,s);var a=i[0];o=i[1];var c=a-(o-a);c>=0&&(r=t.isRange(c,a,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new z;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new z;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,o){return this.findGuardPattern(t,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,r,i,o,s){var a=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,u=r,l=o.length,f=i,h=r;h<a;h++)if(t.get(h)!==f)s[c]++;else{if(c===l-1){if(Qe.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=s[0]+s[1];for(var p=s.slice(2,s.length),m=0;m<c-1;m++)s[m]=p[m];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,f=!f}throw new P},e.decodeDigit=function(t,r,i,o){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,a=-1,c=o.length,u=0;u<c;u++){var l=o[u],f=Qe.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);f<s&&(s=f,a=u)}if(a>=0)return a;throw new P},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Qe),Vi=pZ;var gZ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mZ=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),a=n.parseExtensionString(s),c=[new q((r[0]+r[1])/2,e),new q(o,e)],u=new Ge(s,null,0,c,G.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=t[1],u=0,l=0;l<5&&c<a;l++){var f=Vi.decodeDigit(e,s,c,Vi.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var h=(i=void 0,gZ(s)),p=h.next();!p.done;p=h.next()){var m=p.value;c+=m}}catch(_){i={error:_}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}f>=10&&(u|=1<<4-l),l!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new P;var y=this.determineCheckDigit(u);if(n.extensionChecksum(r.toString())!==y)throw new P;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new P},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[vt.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="\xA3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,s=o<10?"0"+o:o.toString();return t+i+"."+s},n}(),Lk=mZ;var vZ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yZ=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),a=n.parseExtensionString(s),c=[new q((r[0]+r[1])/2,e),new q(o,e)],u=new Ge(s,null,0,c,G.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=t[1],u=0,l=0;l<2&&c<a;l++){var f=Vi.decodeDigit(e,s,c,Vi.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var h=(i=void 0,vZ(s)),p=h.next();!p.done;p=h.next()){var m=p.value;c+=m}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}f>=10&&(u|=1<<1-l),l!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new P;if(parseInt(r.toString())%4!==u)throw new P;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[vt.ISSUE_NUMBER,parseInt(e)]])},n}(),Vk=yZ;var _Z=function(){function n(){}return n.decodeRow=function(e,t,r){var i=Vi.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new Lk;return o.decodeRow(e,t,i)}catch{var s=new Vk;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),Bk=_Z;var wZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EZ=function(n){wZ(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return t}return e.prototype.decodeRow=function(t,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(le.NEED_RESULT_POINT_CALLBACK);if(s!=null){var a=new q((o[0]+o[1])/2,t);s.foundPossibleResultPoint(a)}var c=this.decodeMiddle(r,o,this.decodeRowStringBuffer),u=c.rowOffset,l=c.resultString;if(s!=null){var f=new q(u,t);s.foundPossibleResultPoint(f)}var h=e.decodeEnd(r,u);if(s!=null){var p=new q((h[0]+h[1])/2,t);s.foundPossibleResultPoint(p)}var m=h[1],y=m+(m-h[0]);if(y>=r.getSize()||!r.isRange(m,y,!1))throw new P;var _=l.toString();if(_.length<8)throw new z;if(!e.checkChecksum(_))throw new He;var A=(o[1]+o[0])/2,b=(h[1]+h[0])/2,R=this.getBarcodeFormat(),O=[new q(A,t),new q(b,t)],V=new Ge(_,null,0,O,R,new Date().getTime()),B=0;try{var x=Bk.decodeRow(t,r,h[1]);V.putMetadata(vt.UPC_EAN_EXTENSION,x.getText()),V.putAllMetadata(x.getResultMetadata()),V.addResultPoints(x.getResultPoints()),B=x.getText().length}catch{}var E=i==null?null:i.get(le.ALLOWED_EAN_EXTENSIONS);if(E!=null){var D=!1;for(var T in E)if(B.toString()===T){D=!0;break}if(!D)throw new P}return R===G.EAN_13||G.UPC_A,V},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new z;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new z;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Vi),bt=EZ;var IZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Uk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CZ=function(n){IZ(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=t.getSize(),f=r[1],h=0,p=0;p<6&&f<l;p++){var m=bt.decodeDigit(t,u,f,bt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var y=(o=void 0,Uk(u)),_=y.next();!_.done;_=y.next()){var A=_.value;f+=A}}catch(V){o={error:V}}finally{try{_&&!_.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}m>=10&&(h|=1<<5-p)}i=e.determineFirstDigit(i,h);var b=bt.findGuardPattern(t,f,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0));f=b[1];for(var p=0;p<6&&f<l;p++){var m=bt.decodeDigit(t,u,f,bt.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var R=(a=void 0,Uk(u)),O=R.next();!O.done;O=R.next()){var A=O.value;f+=A}}catch(x){a={error:x}}finally{try{O&&!O.done&&(c=R.return)&&c.call(R)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return G.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new P},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(bt),Ru=CZ;var AZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xZ=function(n){AZ(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=t.getSize(),f=r[1],h=0;h<4&&f<l;h++){var p=bt.decodeDigit(t,u,f,bt.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var m=(o=void 0,jk(u)),y=m.next();!y.done;y=m.next()){var _=y.value;f+=_}}catch(O){o={error:O}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}}var A=bt.findGuardPattern(t,f,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0));f=A[1];for(var h=0;h<4&&f<l;h++){var p=bt.decodeDigit(t,u,f,bt.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var b=(a=void 0,jk(u)),R=b.next();!R.done;R=b.next()){var _=R.value;f+=_}}catch(B){a={error:B}}finally{try{R&&!R.done&&(c=b.return)&&c.call(b)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return G.EAN_8},e}(bt),hA=xZ;var DZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bZ=function(n){DZ(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new Ru,t}return e.prototype.getBarcodeFormat=function(){return G.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Ge(r.substring(1),null,null,t.getResultPoints(),G.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new P},e.prototype.reset=function(){this.ean13Reader.reset()},e}(bt),pA=bZ;var SZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),TZ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RZ=function(n){SZ(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a=this.decodeMiddleCounters.map(function(_){return _});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var c=t.getSize(),u=r[1],l=0,f=0;f<6&&u<c;f++){var h=e.decodeDigit(t,a,u,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+h%10);try{for(var p=(o=void 0,TZ(a)),m=p.next();!m.done;m=p.next()){var y=m.value;u+=y}}catch(_){o={error:_}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}h>=10&&(l|=1<<5-f)}return e.determineNumSysAndCheckDigit(new J(i),l),u},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return bt.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){t.insert(0,"0"+i),t.append("0"+o);return}throw P.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return G.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new J;i.append(t.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(bt),gA=RZ;var MZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NZ=function(n){MZ(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(le.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(G.EAN_13)>-1&&o.push(new Ru),i.indexOf(G.UPC_A)>-1&&o.push(new pA),i.indexOf(G.EAN_8)>-1&&o.push(new hA),i.indexOf(G.UPC_E)>-1&&o.push(new gA)),o.length===0&&(o.push(new Ru),o.push(new pA),o.push(new hA),o.push(new gA)),r.readers=o,r}return e.prototype.decodeRow=function(t,r,i){var o,s;try{for(var a=zk(this.readers),c=a.next();!c.done;c=a.next()){var u=c.value;try{var l=u.decodeRow(t,r,i),f=l.getBarcodeFormat()===G.EAN_13&&l.getText().charAt(0)==="0",h=i==null?null:i.get(le.POSSIBLE_FORMATS),p=h==null||h.includes(G.UPC_A);if(f&&p){var m=l.getRawBytes(),y=new Ge(l.getText().substring(1),m,m?m.length:null,l.getResultPoints(),G.UPC_A);return y.putAllMetadata(l.getResultMetadata()),y}return l}catch{}}}catch(_){o={error:_}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}throw new P},e.prototype.reset=function(){var t,r;try{for(var i=zk(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(Qe),Ov=NZ;var OZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PZ=function(n){OZ(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var o=this.getValidRowData(r);if(!o)throw new P;var s=this.codaBarDecodeRow(o.row);if(!s)throw new P;return new Ge(s,null,0,[new q(o.left,t),new q(o.right,t)],G.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var s=[],a=r[0],c=1,u=1;u<r.length;u++)r[u]===a?c++:(a=r[u],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,u){return(c+u)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),s=o.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var a=r.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(Qe),mA=PZ;var kZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),FZ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LZ=function(n){kZ(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(Qe.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new P},e.count=function(t){return Ie.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]>o&&(o=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]<o&&(o=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,o=t[0]+t[1],s=o+t[2]+t[3],a=o/s;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var l=FZ(t),f=l.next();!f.done;f=l.next()){var h=f.value;h>u&&(u=h),h<c&&(c=h)}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Qe),Do=LZ;var VZ=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),ka=VZ;var BZ=function(){function n(e,t,r,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new q(r,o)),this.resultPoints.push(new q(i,o))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),Pv=BZ;var UZ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jZ=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,o,s=0;try{for(var a=UZ(e),c=a.next();!c.done;c=a.next()){var u=c.value;s+=u}}catch(b){i={error:b}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}for(var l=0,f=0,h=e.length,p=0;p<h-1;p++){var m=void 0;for(m=1,f|=1<<p;m<e[p];m++,f&=~(1<<p)){var y=n.combins(s-m-1,h-p-2);if(r&&f===0&&s-m-(h-p-1)>=h-p-1&&(y-=n.combins(s-m-(h-p),h-p-2)),h-p-1>1){for(var _=0,A=s-m-(h-p-2);A>t;A--)_+=n.combins(s-m-A-1,h-p-3);y-=_*(h-1-p)}else s-m>t&&y--;l+=y}s-=m}return l},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var o=1,s=1,a=e;a>r;a--)o*=a,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},n}(),vs=jZ;var zZ=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new ut(r),o=0,s=e[0],a=s.getRightChar().getValue(),c=11;c>=0;--c)(a&1<<c)!==0&&i.set(o),o++;for(var c=1;c<e.length;++c){for(var u=e[c],l=u.getLeftChar().getValue(),f=11;f>=0;--f)(l&1<<f)!==0&&i.set(o),o++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),f=11;f>=0;--f)(h&1<<f)!==0&&i.set(o),o++}return i},n}(),Hk=zZ;var HZ=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),ys=HZ;var $Z=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),Mu=$Z;var GZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),WZ=function(n){GZ(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Mu),Br=WZ;var qZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),KZ=function(n){qZ(e,n);function e(t,r,i){var o=n.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Mu),_s=KZ;var ZZ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),XZ=function(n){ZZ(e,n);function e(t,r,i){var o=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new z;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Mu),Fa=XZ;var kv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YZ=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,o,s,a,c,u;if(!e)return null;if(e.length<2)throw new P;var l=e.substring(0,2);try{for(var f=kv(n.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var p=h.value;if(p[0]===l)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,p[2],e):n.processFixedAI(2,p[1],e)}}catch(B){t={error:B}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}if(e.length<3)throw new P;var m=e.substring(0,3);try{for(var y=kv(n.THREE_DIGIT_DATA_LENGTH),_=y.next();!_.done;_=y.next()){var p=_.value;if(p[0]===m)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,p[2],e):n.processFixedAI(3,p[1],e)}}catch(B){i={error:B}}finally{try{_&&!_.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}try{for(var A=kv(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),b=A.next();!b.done;b=A.next()){var p=b.value;if(p[0]===m)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,p[2],e):n.processFixedAI(4,p[1],e)}}catch(B){s={error:B}}finally{try{b&&!b.done&&(a=A.return)&&a.call(A)}finally{if(s)throw s.error}}if(e.length<4)throw new P;var R=e.substring(0,4);try{for(var O=kv(n.FOUR_DIGIT_DATA_LENGTH),V=O.next();!V.done;V=O.next()){var p=V.value;if(p[0]===R)return p[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,p[2],e):n.processFixedAI(4,p[1],e)}}catch(B){c={error:B}}finally{try{V&&!V.done&&(u=O.return)&&u.call(O)}finally{if(c)throw c.error}}throw new P},n.processFixedAI=function(e,t,r){if(r.length<e)throw new P;var i=r.substring(0,e);if(r.length<e+t)throw new P;var o=r.substring(e,e+t),s=r.substring(e+t),a="("+i+")"+o,c=n.parseFieldsInGeneralPurpose(s);return c==null?a:a+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),o;r.length<e+t?o=r.length:o=e+t;var s=r.substring(e,o),a=r.substring(o),c="("+i+")"+s,u=n.parseFieldsInGeneralPurpose(a);return u==null?c:c+u},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),$k=YZ;var QZ=function(){function n(e){this.buffer=new J,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var o=this.decodeGeneralPurposeField(r,i),s=$k.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Fa(this.information.getSize(),Fa.FNC1,Fa.FNC1):new Fa(this.information.getSize(),t-1,Fa.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new Fa(e+7,i,o)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,o=0;o<r;++o)e.get(t+o)&&(i|=1<<r-o-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new _s(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new _s(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new _s(this.current.getPosition(),this.buffer.toString()):t=new _s(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ys(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new _s(this.current.getPosition(),this.buffer.toString());return new ys(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ys(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new _s(this.current.getPosition(),this.buffer.toString());return new ys(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ys(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new _s(this.current.getPosition(),this.buffer.toString());return new ys(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ys(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Br(e+5,Br.FNC1);if(t>=5&&t<15)return new Br(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Br(e+7,""+(r+1));if(r>=90&&r<116)return new Br(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new z}return new Br(e+8,o)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Br(e+5,Br.FNC1);if(t>=5&&t<15)return new Br(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Br(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new zt("Decoding invalid alphanumeric value: "+r)}return new Br(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),Nu=QZ;var JZ=function(){function n(e){this.information=e,this.generalDecoder=new Nu(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),vf=JZ;var eX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tX=function(n){eX(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,o=0;o<13;o++){var s=t.charAt(o+r).charCodeAt(0)-48;i+=(o&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(vf),Kn=tX;var nX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rX=function(n){nX(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new J;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Kn),Gk=rX;var iX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),oX=function(n){iX(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new J;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(vf),Wk=oX;var sX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aX=function(n){sX(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,o);for(var s=this.checkWeight(o),a=1e5,c=0;c<5;++c)s/a===0&&t.append("0"),a/=10;t.append(s)},e}(Kn),Ou=aX;var cX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),uX=function(n){cX(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Ou.GTIN_SIZE+e.WEIGHT_SIZE)throw new P;var t=new J;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Ou.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Ou),Fv=uX;var lX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dX=function(n){lX(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(Fv),qk=dX;var fX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hX=function(n){fX(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(Fv),Kk=hX;var pX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gX=function(n){pX(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Kn.GTIN_SIZE)throw new P;var t=new J;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Kn.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Kn.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Kn),Zk=gX;var mX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vX=function(n){mX(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Kn.GTIN_SIZE)throw new P;var t=new J;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Kn.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Kn.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Kn.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Kn),Xk=vX;var yX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_X=function(n){yX(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new P;var t=new J;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var a=i;a/10===0&&t.append("0"),t.append(a),s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Ou),bo=_X;function vA(n){try{if(n.get(1))return new Gk(n);if(!n.get(2))return new Wk(n);var e=Nu.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new qk(n);case 5:return new Kk(n)}var t=Nu.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new Zk(n);case 13:return new Xk(n)}var r=Nu.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new bo(n,"310","11");case 57:return new bo(n,"320","11");case 58:return new bo(n,"310","13");case 59:return new bo(n,"320","13");case 60:return new bo(n,"310","15");case 61:return new bo(n,"320","15");case 62:return new bo(n,"310","17");case 63:return new bo(n,"320","17")}}catch(i){throw console.log(i),new zt("unknown decoder: "+n)}}var wX=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),yA=wX;var EX=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,o){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),Yk=EX;var IX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ws=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CX=function(n){IX(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(a){if(a instanceof P){if(!this.pairs.length)throw new P;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new P},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,o,s=r;s<this.rows.length;s++){var a=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,ws(t)),u=c.next();!u.done;u=c.next()){var l=u.value;this.pairs.push(l.getPairs())}}catch(h){i={error:h}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(t);f.push(a);try{return this.checkRows(f,s+1)}catch(h){console.log(h)}}}throw new P},e.isValidSequence=function(t){var r,i;try{for(var o=ws(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var a=s.value;if(!(t.length>a.length)){for(var c=!0,u=0;u<t.length;u++)if(t[u].getFinderPattern().getValue()!==a[u]){c=!1;break}if(c)return!0}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>t){s=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Yk(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,o,s,a,c,u;try{for(var l=ws(r),f=l.next();!f.done;f=l.next()){var h=f.value;if(h.getPairs().length!==t.length){var p=!0;try{for(var m=(s=void 0,ws(h.getPairs())),y=m.next();!y.done;y=m.next()){var _=y.value,A=!1;try{for(var b=(c=void 0,ws(t)),R=b.next();!R.done;R=b.next()){var O=R.value;if(yA.equals(_,O)){A=!0;break}}}catch(V){c={error:V}}finally{try{R&&!R.done&&(u=b.return)&&u.call(b)}finally{if(c)throw c.error}}A||(p=!1)}}catch(V){s={error:V}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(s)throw s.error}}}}}catch(V){i={error:V}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,o,s,a,c,u;try{for(var l=ws(r),f=l.next();!f.done;f=l.next()){var h=f.value,p=!0;try{for(var m=(s=void 0,ws(t)),y=m.next();!y.done;y=m.next()){var _=y.value,A=!1;try{for(var b=(c=void 0,ws(h.getPairs())),R=b.next();!R.done;R=b.next()){var O=R.value;if(_.equals(O)){A=!0;break}}}catch(V){c={error:V}}finally{try{R&&!R.done&&(u=b.return)&&u.call(b)}finally{if(c)throw c.error}}if(!A){p=!1;break}}}catch(V){s={error:V}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(s)throw s.error}}if(p)return!0}}catch(V){i={error:V}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=Hk.buildBitArray(t),i=vA(r),o=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),a=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],a[0],a[1]];return new Ge(o,null,null,c,G.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,a=1;a<this.pairs.size();++a){var c=this.pairs.get(a);o+=c.getLeftChar().getChecksumPortion(),s++;var u=c.getRightChar();u!=null&&(o+=u.getChecksumPortion(),s++)}o%=211;var l=211*(s-4)+o;return l===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var s,a=!0,c=-1;do this.findNextPair(t,r,c),s=this.parseFoundFinderPattern(t,i,o),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):a=!1;while(a);var u=this.decodeDataCharacter(t,s,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new P;var l;try{l=this.decodeDataCharacter(t,s,o,!1)}catch(f){l=null,console.log(f)}return new yA(u,l,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=t.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(r))a=0;else{var c=r[r.length-1];a=c.getFinderPattern().getStartEnd()[1]}var u=r.length%2!==0;this.startFromEven&&(u=!u);for(var l=!1;a<s&&(l=!t.get(a),!!l);)a++;for(var f=0,h=a,p=a;p<s;p++)if(t.get(p)!==l)o[f]++;else{if(f===3){if(u&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=h,this.startEnd[1]=p;return}u&&e.reverseCounters(o),h+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,l=!l}throw new P},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var o=t[i];t[i]=t[r-i-1],t[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,r,i){var o,s,a;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,o=this.startEnd[0]-c,s=c,a=this.startEnd[1]}else s=this.startEnd[0],a=t.getNextUnset(this.startEnd[1]+1),o=a-this.startEnd[1];var u=this.getDecodeFinderCounters();Ee.arraycopy(u,0,u,1,u.length-1),u[0]=o;var l;try{l=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new Pv(l,[s,a],s,a,r)},e.prototype.decodeDataCharacter=function(t,r,i,o){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var c=0,u=s.length-1;c<u;c++,u--){var l=s[c];s[c]=s[u],s[u]=l}}var f=17,h=Ie.sum(new Int32Array(s))/f,p=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new P;for(var m=this.getOddCounts(),y=this.getEvenCounts(),_=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var b=1*s[c]/h,R=b+.5;if(R<1){if(b<.3)throw new P;R=1}else if(R>8){if(b>8.7)throw new P;R=8}var O=c/2;(c&1)===0?(m[O]=R,_[O]=b-R):(y[O]=R,A[O]=b-R)}this.adjustOddEvenCounts(f);for(var V=4*r.getValue()+(i?0:2)+(o?0:1)-1,B=0,x=0,c=m.length-1;c>=0;c--){if(e.isNotA1left(r,i,o)){var E=e.WEIGHTS[V][2*c];x+=m[c]*E}B+=m[c]}for(var D=0,c=y.length-1;c>=0;c--)if(e.isNotA1left(r,i,o)){var E=e.WEIGHTS[V][2*c+1];D+=y[c]*E}var T=x+D;if((B&1)!==0||B>13||B<4)throw new P;var M=(13-B)/2,N=e.SYMBOL_WIDEST[M],S=9-N,Rt=vs.getRSSvalue(m,N,!0),Xn=vs.getRSSvalue(y,S,!1),qu=e.EVEN_TOTAL_SUBSET[M],Ui=e.GSUM[M],ji=Rt*qu+Xn+Ui;return new ka(ji,T)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=Ie.sum(new Int32Array(this.getOddCounts())),i=Ie.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var a=!1,c=!1;i>13?c=!0:i<4&&(a=!0);var u=r+i-t,l=(r&1)===1,f=(i&1)===0;if(u===1)if(l){if(f)throw new P;s=!0}else{if(!f)throw new P;c=!0}else if(u===-1)if(l){if(f)throw new P;o=!0}else{if(!f)throw new P;a=!0}else if(u===0){if(l){if(!f)throw new P;r<i?(o=!0,c=!0):(s=!0,a=!0)}else if(f)throw new P}else throw new P;if(o){if(s)throw new P;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(c)throw new P;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Do),_A=CX;var AX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xX=function(n){AX(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(ka),Qk=xX;var DX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bX=function(n){DX(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,u=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,u),r.reverse();var l=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,l),r.reverse();try{for(var f=wA(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var p=h.value;if(p.getCount()>1)try{for(var m=(a=void 0,wA(this.possibleRightPairs)),y=m.next();!y.done;y=m.next()){var _=y.value;if(_.getCount()>1&&e.checkChecksum(p,_))return e.constructResult(p,_)}}catch(A){a={error:A}}finally{try{y&&!y.done&&(c=m.return)&&c.call(m)}finally{if(a)throw a.error}}}}catch(A){o={error:A}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}throw new P},e.addOrTally=function(t,r){var i,o;if(r!=null){var s=!1;try{for(var a=wA(t),c=a.next();!c.done;c=a.next()){var u=c.value;if(u.getValue()===r.getValue()){u.incrementCount(),s=!0;break}}}catch(l){i={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),o=new String(i).toString(),s=new J,a=13-o.length;a>0;a--)s.append("0");s.append(o);for(var c=0,a=0;a<13;a++){var u=s.charAt(a).charCodeAt(0)-48;c+=(a&1)===0?3*u:u}c=10-c%10,c===10&&(c=0),s.append(c.toString());var l=t.getFinderPattern().getResultPoints(),f=r.getFinderPattern().getResultPoints();return new Ge(s.toString(),null,0,[l[0],l[1],f[0],f[1]],G.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,r,i,o){try{var s=this.findFinderPattern(t,r),a=this.parseFoundFinderPattern(t,i,r,s),c=o==null?null:o.get(le.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(s[0]+s[1])/2;r&&(u=t.getSize()-1-u),c.foundPossibleResultPoint(new q(u,i))}var l=this.decodeDataCharacter(t,a,!0),f=this.decodeDataCharacter(t,a,!1);return new Qk(1597*l.getValue()+f.getValue(),l.getChecksumPortion()+4*f.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)Qe.recordPatternInReverse(t,r.getStartEnd()[0],o);else{Qe.recordPattern(t,r.getStartEnd()[1]+1,o);for(var a=0,c=o.length-1;a<c;a++,c--){var u=o[a];o[a]=o[c],o[c]=u}}for(var l=i?16:15,f=Ie.sum(new Int32Array(o))/l,h=this.getOddCounts(),p=this.getEvenCounts(),m=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),a=0;a<o.length;a++){var _=o[a]/f,A=Math.floor(_+.5);A<1?A=1:A>8&&(A=8);var b=Math.floor(a/2);(a&1)===0?(h[b]=A,m[b]=_-A):(p[b]=A,y[b]=_-A)}this.adjustOddEvenCounts(i,l);for(var R=0,O=0,a=h.length-1;a>=0;a--)O*=9,O+=h[a],R+=h[a];for(var V=0,B=0,a=p.length-1;a>=0;a--)V*=9,V+=p[a],B+=p[a];var x=O+3*V;if(i){if((R&1)!==0||R>12||R<4)throw new P;var E=(12-R)/2,D=e.OUTSIDE_ODD_WIDEST[E],T=9-D,M=vs.getRSSvalue(h,D,!1),N=vs.getRSSvalue(p,T,!0),S=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],Rt=e.OUTSIDE_GSUM[E];return new ka(M*S+N+Rt,x)}else{if((B&1)!==0||B>10||B<4)throw new P;var E=(10-B)/2,D=e.INSIDE_ODD_WIDEST[E],T=9-D,M=vs.getRSSvalue(h,D,!0),N=vs.getRSSvalue(p,T,!1),Xn=e.INSIDE_ODD_TOTAL_SUBSET[E],Rt=e.INSIDE_GSUM[E];return new ka(N*Xn+M+Rt,x)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),s=!1,a=0;a<o&&(s=!t.get(a),r!==s);)a++;for(var c=0,u=a,l=a;l<o;l++)if(t.get(l)!==s)i[c]++;else{if(c===3){if(Do.isFinderPattern(i))return[u,l];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new P},e.prototype.parseFoundFinderPattern=function(t,r,i,o){for(var s=t.get(o[0]),a=o[0]-1;a>=0&&s!==t.get(a);)a--;a++;var c=o[0]-a,u=this.getDecodeFinderCounters(),l=new Int32Array(u.length);Ee.arraycopy(u,0,l,1,u.length-1),l[0]=c;var f=this.parseFinderValue(l,e.FINDER_PATTERNS),h=a,p=o[1];return i&&(h=t.getSize()-1-h,p=t.getSize()-1-p),new Pv(f,[a,o[1]],h,p,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=Ie.sum(new Int32Array(this.getOddCounts())),o=Ie.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,c=!1,u=!1;t?(i>12?a=!0:i<4&&(s=!0),o>12?u=!0:o<4&&(c=!0)):(i>11?a=!0:i<5&&(s=!0),o>10?u=!0:o<4&&(c=!0));var l=i+o-r,f=(i&1)===(t?1:0),h=(o&1)===1;if(l===1)if(f){if(h)throw new P;a=!0}else{if(!h)throw new P;u=!0}else if(l===-1)if(f){if(h)throw new P;s=!0}else{if(!h)throw new P;c=!0}else if(l===0){if(f){if(!h)throw new P;i<o?(s=!0,u=!0):(a=!0,c=!0)}else if(h)throw new P}else throw new P;if(s){if(a)throw new P;Do.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Do.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new P;Do.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Do.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Do),Lv=bX;var SX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),TX=function(n){SX(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(le.POSSIBLE_FORMATS):null,o=t&&t.get(le.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(le.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(G.EAN_13)||i.includes(G.UPC_A)||i.includes(G.EAN_8)||i.includes(G.UPC_E))&&r.readers.push(new Ov(t)),i.includes(G.CODE_39)&&r.readers.push(new Rv(o,s)),i.includes(G.CODE_93)&&r.readers.push(new Mv),i.includes(G.CODE_128)&&r.readers.push(new Tv),i.includes(G.ITF)&&r.readers.push(new Nv),i.includes(G.CODABAR)&&r.readers.push(new mA),i.includes(G.RSS_14)&&r.readers.push(new Lv),i.includes(G.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new _A))),r.readers.length===0&&(r.readers.push(new Ov(t)),r.readers.push(new Rv),r.readers.push(new Mv),r.readers.push(new Ov(t)),r.readers.push(new Tv),r.readers.push(new Nv),r.readers.push(new Lv)),r}return e.prototype.decodeRow=function(t,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,i)}catch{}throw new P},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(Qe),Bi=TX;var RX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sEe=function(n){RX(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new Bi(r),t,r)||this}return e}(Lr);var Jk=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Je=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}();var Ze=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}();var MX=function(){function n(e,t,r,i,o,s){var a,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var u=0,l=s.getECCodewords(),f=s.getECBlocks();try{for(var h=Jk(f),p=h.next();!p.done;p=h.next()){var m=p.value;u+=m.getCount()*(m.getDataCodewords()+l)}}catch(y){a={error:y}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(a)throw a.error}}this.totalCodewords=u}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new z;try{for(var o=Jk(n.VERSIONS),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===t)return a}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new z},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Je(5,new Ze(1,3))),new n(2,12,12,10,10,new Je(7,new Ze(1,5))),new n(3,14,14,12,12,new Je(10,new Ze(1,8))),new n(4,16,16,14,14,new Je(12,new Ze(1,12))),new n(5,18,18,16,16,new Je(14,new Ze(1,18))),new n(6,20,20,18,18,new Je(18,new Ze(1,22))),new n(7,22,22,20,20,new Je(20,new Ze(1,30))),new n(8,24,24,22,22,new Je(24,new Ze(1,36))),new n(9,26,26,24,24,new Je(28,new Ze(1,44))),new n(10,32,32,14,14,new Je(36,new Ze(1,62))),new n(11,36,36,16,16,new Je(42,new Ze(1,86))),new n(12,40,40,18,18,new Je(48,new Ze(1,114))),new n(13,44,44,20,20,new Je(56,new Ze(1,144))),new n(14,48,48,22,22,new Je(68,new Ze(1,174))),new n(15,52,52,24,24,new Je(42,new Ze(2,102))),new n(16,64,64,14,14,new Je(56,new Ze(2,140))),new n(17,72,72,16,16,new Je(36,new Ze(4,92))),new n(18,80,80,18,18,new Je(48,new Ze(4,114))),new n(19,88,88,20,20,new Je(56,new Ze(4,144))),new n(20,96,96,22,22,new Je(68,new Ze(4,174))),new n(21,104,104,24,24,new Je(56,new Ze(6,136))),new n(22,120,120,18,18,new Je(68,new Ze(6,175))),new n(23,132,132,20,20,new Je(62,new Ze(8,163))),new n(24,144,144,22,22,new Je(62,new Ze(8,156),new Ze(2,155))),new n(25,8,18,6,16,new Je(7,new Ze(1,5))),new n(26,8,32,6,14,new Je(11,new Ze(1,10))),new n(27,12,26,10,24,new Je(14,new Ze(1,16))),new n(28,12,36,10,16,new Je(18,new Ze(1,22))),new n(29,16,36,14,16,new Je(24,new Ze(1,32))),new n(30,16,48,14,22,new Je(28,new Ze(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),eF=MX;var NX=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new z;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new dt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return eF.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,c=!1,u=!1,l=!1;do if(r===o&&i===0&&!a)e[t++]=this.readCorner1(o,s)&255,r-=2,i+=2,a=!0;else if(r===o-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(o,s)&255,r-=2,i+=2,c=!0;else if(r===o+4&&i===2&&(s&7)===0&&!u)e[t++]=this.readCorner3(o,s)&255,r-=2,i+=2,u=!0;else if(r===o-2&&i===0&&(s&7)===4&&!l)e[t++]=this.readCorner4(o,s)&255,r-=2,i+=2,l=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<s);if(t!==this.version.getTotalCodewords())throw new z;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var o=0;return this.readModule(e-2,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t,r,i)&&(o|=1),o<<=1,this.readModule(e,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e,t,r,i)&&(o|=1),o},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new $("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=t/i|0,a=r/o|0,c=s*i,u=a*o,l=new dt(u,c),f=0;f<s;++f)for(var h=f*i,p=0;p<a;++p)for(var m=p*o,y=0;y<i;++y)for(var _=f*(i+2)+1+y,A=h+y,b=0;b<o;++b){var R=p*(o+2)+1+b;if(e.get(R,_)){var O=m+b;l.set(O,A)}}return l},n}(),tF=NX;var nF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OX=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,o,s,a=t.getECBlocks(),c=0,u=a.getECBlocks();try{for(var l=nF(u),f=l.next();!f.done;f=l.next()){var h=f.value;c+=h.getCount()}}catch(Rt){r={error:Rt}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}var p=new Array(c),m=0;try{for(var y=nF(u),_=y.next();!_.done;_=y.next())for(var h=_.value,A=0;A<h.getCount();A++){var b=h.getDataCodewords(),R=a.getECCodewords()+b;p[m++]=new n(b,new Uint8Array(R))}}catch(Rt){o={error:Rt}}finally{try{_&&!_.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}for(var O=p[0].codewords.length,V=O-a.getECCodewords(),B=V-1,x=0,A=0;A<B;A++)for(var E=0;E<m;E++)p[E].codewords[A]=e[x++];for(var D=t.getVersionNumber()===24,T=D?8:m,E=0;E<T;E++)p[E].codewords[V-1]=e[x++];for(var M=p[0].codewords.length,A=V;A<M;A++)for(var E=0;E<m;E++){var N=D?(E+8)%m:E,S=D&&N>7?A-1:A;p[N].codewords[S]=e[x++]}if(x!==e.length)throw new $;return p},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),rF=OX;var PX=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new $(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,a=e<s?e:s,c=s-a,u=255>>8-a<<c;t=(o[i]&u)>>c,e-=a,r+=a,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;t=t<<e|(o[i]&u)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),yf=PX;var ln=function(n){return n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE",n}(ln||{}),kX=function(){function n(){}return n.decode=function(e){var t=new yf(e),r=new J,i=new J,o=new Array,s=ln.ASCII_ENCODE;do if(s===ln.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case ln.C40_ENCODE:this.decodeC40Segment(t,r);break;case ln.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case ln.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case ln.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case ln.BASE256_ENCODE:this.decodeBase256Segment(t,r,o);break;default:throw new z}s=ln.ASCII_ENCODE}while(s!==ln.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Ao(e,r.toString(),o.length===0?null:o,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new z;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),ln.ASCII_ENCODE;if(o===129)return ln.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&t.append("0"),t.append(""+s)}else switch(o){case 230:return ln.C40_ENCODE;case 231:return ln.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return ln.ANSIX12_ENCODE;case 239:return ln.TEXT_ENCODE;case 240:return ln.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new z;break}}while(e.available()>0);return ln.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else throw new z;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new z}o=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),o=0;break;default:throw new z}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else throw new z;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new z}o=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u),o=0}else throw new z;break;default:throw new z}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new z;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new z;for(var a=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new z;a[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(a);try{t.append(nn.decode(a,de.ISO88591))}catch(u){throw new zt("Platform does not support required encoding: "+u.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"],n}(),EA=kX;var FX=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LX=function(){function n(){this.rsDecoder=new xo(kt.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new tF(e),o=i.getVersion(),s=i.readCodewords(),a=rF.getDataBlocks(s,o),c=0;try{for(var u=FX(a),l=u.next();!l.done;l=u.next()){var f=l.value;c+=f.getNumDataCodewords()}}catch(R){t={error:R}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}for(var h=new Uint8Array(c),p=a.length,m=0;m<p;m++){var y=a[m],_=y.getCodewords(),A=y.getNumDataCodewords();this.correctErrors(_,A);for(var b=0;b<A;b++)h[b*p+m]=_[b]}return EA.decode(h)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new He}for(var i=0;i<t;i++)e[i]=r[i]},n}(),iF=LX;var VX=function(){function n(e){this.image=e,this.rectangleDetector=new Tu(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new P;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],o=t[2],s=t[3],a=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(o,s)+1;(a&1)===1&&(a+=1),(c&1)===1&&(c+=1),4*a<7*c&&4*c<7*a&&(a=c=Math.max(a,c));var u=n.sampleGrid(this.image,r,i,o,s,a,c);return new Oa(u,[r,i,o,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),o=(t.getY()-e.getY())/(r+1);return new q(e.getX()+i,e.getY()+o)},n.moveAway=function(e,t,r){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<r?o-=1:o+=1,new q(i,o)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(t,r),a=this.transitionsBetween(r,i),c=this.transitionsBetween(i,o),u=this.transitionsBetween(o,t),l=s,f=[o,t,r,i];return l>a&&(l=a,f[0]=t,f[1]=r,f[2]=i,f[3]=o),l>c&&(l=c,f[0]=r,f[1]=i,f[2]=o,f[3]=t),l>u&&(f[0]=i,f[1]=o,f[2]=t,f[3]=r),f},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),u=this.transitionsBetween(a,t),l=this.transitionsBetween(c,o);return u<l?(e[0]=t,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=this.transitionsBetween(r,o),c=n.shiftPoint(t,r,(a+1)*4),u=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,o),a=this.transitionsBetween(u,o);var l=new q(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),f=new q(o.getX()+(t.getX()-r.getX())/(a+1),o.getY()+(t.getY()-r.getY())/(a+1));if(!this.isValid(l))return this.isValid(f)?f:null;if(!this.isValid(f))return l;var h=this.transitionsBetween(c,l)+this.transitionsBetween(u,l),p=this.transitionsBetween(c,f)+this.transitionsBetween(u,f);return h>p?l:f},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o)+1,a=this.transitionsBetween(i,o)+1,c=n.shiftPoint(t,r,a*4),u=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,o)+1,a=this.transitionsBetween(u,o)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);var l=(t.getX()+r.getX()+i.getX()+o.getX())/4,f=(t.getY()+r.getY()+i.getY()+o.getY())/4;t=n.moveAway(t,l,f),r=n.moveAway(r,l,f),i=n.moveAway(i,l,f),o=n.moveAway(o,l,f);var h,p;return c=n.shiftPoint(t,r,a*4),c=n.shiftPoint(c,o,s*4),h=n.shiftPoint(r,t,a*4),h=n.shiftPoint(h,i,s*4),u=n.shiftPoint(i,o,a*4),u=n.shiftPoint(u,r,s*4),p=n.shiftPoint(o,i,a*4),p=n.shiftPoint(p,t,s*4),[c,h,u,p]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,o,s,a){var c=Pa.getInstance();return c.sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),s=Math.trunc(t.getY()),a=Math.abs(s-i)>Math.abs(o-r);if(a){var c=r;r=i,i=c,c=o,o=s,s=c}for(var u=Math.abs(o-r),l=Math.abs(s-i),f=-u/2,h=i<s?1:-1,p=r<o?1:-1,m=0,y=this.image.get(a?i:r,a?r:i),_=r,A=i;_!==o;_+=p){var b=this.image.get(a?A:_,a?_:A);if(b!==y&&(m++,y=b),f+=l,f>0){if(A===s)break;A+=h,f-=u}}return m},n}(),oF=VX;var BX=function(){function n(){this.decoder=new iF}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(le.PURE_BARCODE)){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=n.NO_POINTS}else{var s=new oF(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var a=r.getRawBytes(),c=new Ge(r.getText(),a,8*a.length,i,G.DATA_MATRIX,Ee.currentTimeMillis()),u=r.getByteSegments();u!=null&&c.putMetadata(vt.BYTE_SEGMENTS,u);var l=r.getECLevel();return l!=null&&c.putMetadata(vt.ERROR_CORRECTION_LEVEL,l),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new P;var i=this.moduleSize(t,e),o=t[1],s=r[1],a=t[0],c=r[0],u=(c-a+1)/i,l=(s-o+1)/i;if(u<=0||l<=0)throw new P;var f=i/2;o+=f,a+=f;for(var h=new dt(u,l),p=0;p<l;p++)for(var m=o+p*i,y=0;y<u;y++)e.get(a+y*i,m)&&h.set(y,p);return h},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],o=e[1];i<r&&t.get(i,o);)i++;if(i===r)throw new P;var s=i-e[0];if(s===0)throw new P;return s},n.NO_POINTS=[],n}(),Es=BX;var UX=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),QEe=function(n){UX(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Es,t)||this}return e}(Lr);var _f=function(n){return n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H",n}(_f||{}),jX=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new wt(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new $;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(_f.L,"L",1),n.M=new n(_f.M,"M",0),n.Q=new n(_f.Q,"Q",3),n.H=new n(_f.H,"H",2),n}(),Zn=jX;var zX=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HX=function(){function n(e){this.errorCorrectionLevel=Zn.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return ie.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=zX(n.FORMAT_INFO_DECODE_LOOKUP),c=a.next();!c.done;c=a.next()){var u=c.value,l=u[0];if(l===e||l===t)return new n(u[1]);var f=n.numBitsDiffering(e,l);f<o&&(s=u[1],o=f),e!==t&&(f=n.numBitsDiffering(t,l),f<o&&(s=u[1],o=f))}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),wf=HX;var $X=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GX=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var o=$X(i),s=o.next();!s.done;s=o.next()){var a=s.value;r+=a.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),F=GX;var WX=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),C=WX;var qX=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KX=function(){function n(e,t){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var a=0,c=o[0].getECCodewordsPerBlock(),u=o[0].getECBlocks();try{for(var l=qX(u),f=l.next();!f.done;f=l.next()){var h=f.value;a+=h.getCount()*(h.getDataCodewords()+c)}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}this.totalCodewords=a}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new z;try{return this.getVersionForNumber((e-17)/4)}catch{throw new z}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new $;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var o=n.VERSION_DECODE_INFO[i];if(o===e)return n.getVersionForNumber(i+7);var s=wf.numBitsDiffering(e,o);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new dt(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new F(7,new C(1,19)),new F(10,new C(1,16)),new F(13,new C(1,13)),new F(17,new C(1,9))),new n(2,Int32Array.from([6,18]),new F(10,new C(1,34)),new F(16,new C(1,28)),new F(22,new C(1,22)),new F(28,new C(1,16))),new n(3,Int32Array.from([6,22]),new F(15,new C(1,55)),new F(26,new C(1,44)),new F(18,new C(2,17)),new F(22,new C(2,13))),new n(4,Int32Array.from([6,26]),new F(20,new C(1,80)),new F(18,new C(2,32)),new F(26,new C(2,24)),new F(16,new C(4,9))),new n(5,Int32Array.from([6,30]),new F(26,new C(1,108)),new F(24,new C(2,43)),new F(18,new C(2,15),new C(2,16)),new F(22,new C(2,11),new C(2,12))),new n(6,Int32Array.from([6,34]),new F(18,new C(2,68)),new F(16,new C(4,27)),new F(24,new C(4,19)),new F(28,new C(4,15))),new n(7,Int32Array.from([6,22,38]),new F(20,new C(2,78)),new F(18,new C(4,31)),new F(18,new C(2,14),new C(4,15)),new F(26,new C(4,13),new C(1,14))),new n(8,Int32Array.from([6,24,42]),new F(24,new C(2,97)),new F(22,new C(2,38),new C(2,39)),new F(22,new C(4,18),new C(2,19)),new F(26,new C(4,14),new C(2,15))),new n(9,Int32Array.from([6,26,46]),new F(30,new C(2,116)),new F(22,new C(3,36),new C(2,37)),new F(20,new C(4,16),new C(4,17)),new F(24,new C(4,12),new C(4,13))),new n(10,Int32Array.from([6,28,50]),new F(18,new C(2,68),new C(2,69)),new F(26,new C(4,43),new C(1,44)),new F(24,new C(6,19),new C(2,20)),new F(28,new C(6,15),new C(2,16))),new n(11,Int32Array.from([6,30,54]),new F(20,new C(4,81)),new F(30,new C(1,50),new C(4,51)),new F(28,new C(4,22),new C(4,23)),new F(24,new C(3,12),new C(8,13))),new n(12,Int32Array.from([6,32,58]),new F(24,new C(2,92),new C(2,93)),new F(22,new C(6,36),new C(2,37)),new F(26,new C(4,20),new C(6,21)),new F(28,new C(7,14),new C(4,15))),new n(13,Int32Array.from([6,34,62]),new F(26,new C(4,107)),new F(22,new C(8,37),new C(1,38)),new F(24,new C(8,20),new C(4,21)),new F(22,new C(12,11),new C(4,12))),new n(14,Int32Array.from([6,26,46,66]),new F(30,new C(3,115),new C(1,116)),new F(24,new C(4,40),new C(5,41)),new F(20,new C(11,16),new C(5,17)),new F(24,new C(11,12),new C(5,13))),new n(15,Int32Array.from([6,26,48,70]),new F(22,new C(5,87),new C(1,88)),new F(24,new C(5,41),new C(5,42)),new F(30,new C(5,24),new C(7,25)),new F(24,new C(11,12),new C(7,13))),new n(16,Int32Array.from([6,26,50,74]),new F(24,new C(5,98),new C(1,99)),new F(28,new C(7,45),new C(3,46)),new F(24,new C(15,19),new C(2,20)),new F(30,new C(3,15),new C(13,16))),new n(17,Int32Array.from([6,30,54,78]),new F(28,new C(1,107),new C(5,108)),new F(28,new C(10,46),new C(1,47)),new F(28,new C(1,22),new C(15,23)),new F(28,new C(2,14),new C(17,15))),new n(18,Int32Array.from([6,30,56,82]),new F(30,new C(5,120),new C(1,121)),new F(26,new C(9,43),new C(4,44)),new F(28,new C(17,22),new C(1,23)),new F(28,new C(2,14),new C(19,15))),new n(19,Int32Array.from([6,30,58,86]),new F(28,new C(3,113),new C(4,114)),new F(26,new C(3,44),new C(11,45)),new F(26,new C(17,21),new C(4,22)),new F(26,new C(9,13),new C(16,14))),new n(20,Int32Array.from([6,34,62,90]),new F(28,new C(3,107),new C(5,108)),new F(26,new C(3,41),new C(13,42)),new F(30,new C(15,24),new C(5,25)),new F(28,new C(15,15),new C(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new F(28,new C(4,116),new C(4,117)),new F(26,new C(17,42)),new F(28,new C(17,22),new C(6,23)),new F(30,new C(19,16),new C(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new F(28,new C(2,111),new C(7,112)),new F(28,new C(17,46)),new F(30,new C(7,24),new C(16,25)),new F(24,new C(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new F(30,new C(4,121),new C(5,122)),new F(28,new C(4,47),new C(14,48)),new F(30,new C(11,24),new C(14,25)),new F(30,new C(16,15),new C(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new F(30,new C(6,117),new C(4,118)),new F(28,new C(6,45),new C(14,46)),new F(30,new C(11,24),new C(16,25)),new F(30,new C(30,16),new C(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new F(26,new C(8,106),new C(4,107)),new F(28,new C(8,47),new C(13,48)),new F(30,new C(7,24),new C(22,25)),new F(30,new C(22,15),new C(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new F(28,new C(10,114),new C(2,115)),new F(28,new C(19,46),new C(4,47)),new F(28,new C(28,22),new C(6,23)),new F(30,new C(33,16),new C(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new F(30,new C(8,122),new C(4,123)),new F(28,new C(22,45),new C(3,46)),new F(30,new C(8,23),new C(26,24)),new F(30,new C(12,15),new C(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new F(30,new C(3,117),new C(10,118)),new F(28,new C(3,45),new C(23,46)),new F(30,new C(4,24),new C(31,25)),new F(30,new C(11,15),new C(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new F(30,new C(7,116),new C(7,117)),new F(28,new C(21,45),new C(7,46)),new F(30,new C(1,23),new C(37,24)),new F(30,new C(19,15),new C(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new F(30,new C(5,115),new C(10,116)),new F(28,new C(19,47),new C(10,48)),new F(30,new C(15,24),new C(25,25)),new F(30,new C(23,15),new C(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new F(30,new C(13,115),new C(3,116)),new F(28,new C(2,46),new C(29,47)),new F(30,new C(42,24),new C(1,25)),new F(30,new C(23,15),new C(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new F(30,new C(17,115)),new F(28,new C(10,46),new C(23,47)),new F(30,new C(10,24),new C(35,25)),new F(30,new C(19,15),new C(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new F(30,new C(17,115),new C(1,116)),new F(28,new C(14,46),new C(21,47)),new F(30,new C(29,24),new C(19,25)),new F(30,new C(11,15),new C(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new F(30,new C(13,115),new C(6,116)),new F(28,new C(14,46),new C(23,47)),new F(30,new C(44,24),new C(7,25)),new F(30,new C(59,16),new C(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new F(30,new C(12,121),new C(7,122)),new F(28,new C(12,47),new C(26,48)),new F(30,new C(39,24),new C(14,25)),new F(30,new C(22,15),new C(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new F(30,new C(6,121),new C(14,122)),new F(28,new C(6,47),new C(34,48)),new F(30,new C(46,24),new C(10,25)),new F(30,new C(2,15),new C(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new F(30,new C(17,122),new C(4,123)),new F(28,new C(29,46),new C(14,47)),new F(30,new C(49,24),new C(10,25)),new F(30,new C(24,15),new C(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new F(30,new C(4,122),new C(18,123)),new F(28,new C(13,46),new C(32,47)),new F(30,new C(48,24),new C(14,25)),new F(30,new C(42,15),new C(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new F(30,new C(20,117),new C(4,118)),new F(28,new C(40,47),new C(7,48)),new F(30,new C(43,24),new C(22,25)),new F(30,new C(10,15),new C(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new F(30,new C(19,118),new C(6,119)),new F(28,new C(18,47),new C(31,48)),new F(30,new C(34,24),new C(34,25)),new F(30,new C(20,15),new C(61,16)))],n}(),ui=KX;var yn=function(n){return n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111",n}(yn||{}),ZX=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[yn.DATA_MASK_000,new n(yn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[yn.DATA_MASK_001,new n(yn.DATA_MASK_001,function(e,t){return(e&1)===0})],[yn.DATA_MASK_010,new n(yn.DATA_MASK_010,function(e,t){return t%3===0})],[yn.DATA_MASK_011,new n(yn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[yn.DATA_MASK_100,new n(yn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[yn.DATA_MASK_101,new n(yn.DATA_MASK_101,function(e,t){return e*t%6===0})],[yn.DATA_MASK_110,new n(yn.DATA_MASK_110,function(e,t){return e*t%6<3})],[yn.DATA_MASK_111,new n(yn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),Vv=ZX;var XX=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new z;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(var t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=wf.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new z},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return ui.getVersionForNumber(t);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var a=ui.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if(a=ui.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new z},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=Vv.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),s=!0,a=new Uint8Array(t.getTotalCodewords()),c=0,u=0,l=0,f=i-1;f>0;f-=2){f===6&&f--;for(var h=0;h<i;h++)for(var p=s?i-1-h:h,m=0;m<2;m++)o.get(f-m,p)||(l++,u<<=1,this.bitMatrix.get(f-m,p)&&(u|=1),l===8&&(a[c++]=u,l=0,u=0));s=!s}if(c!==t.getTotalCodewords())throw new z;return a},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Vv.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),sF=XX;var aF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YX=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,o,s,a;if(e.length!==t.getTotalCodewords())throw new $;var c=t.getECBlocksForLevel(r),u=0,l=c.getECBlocks();try{for(var f=aF(l),h=f.next();!h.done;h=f.next()){var p=h.value;u+=p.getCount()}}catch(S){i={error:S}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}var m=new Array(u),y=0;try{for(var _=aF(l),A=_.next();!A.done;A=_.next())for(var p=A.value,b=0;b<p.getCount();b++){var R=p.getDataCodewords(),O=c.getECCodewordsPerBlock()+R;m[y++]=new n(R,new Uint8Array(O))}}catch(S){s={error:S}}finally{try{A&&!A.done&&(a=_.return)&&a.call(_)}finally{if(s)throw s.error}}for(var V=m[0].codewords.length,B=m.length-1;B>=0;){var x=m[B].codewords.length;if(x===V)break;B--}B++;for(var E=V-c.getECCodewordsPerBlock(),D=0,b=0;b<E;b++)for(var T=0;T<y;T++)m[T].codewords[b]=e[D++];for(var T=B;T<y;T++)m[T].codewords[E]=e[D++];for(var M=m[0].codewords.length,b=E;b<M;b++)for(var T=0;T<y;T++){var N=T<B?b:b+1;m[T].codewords[N]=e[D++]}return m},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),cF=YX;var li=function(n){return n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI",n}(li||{}),QX=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new $;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(li.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(li.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(li.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(li.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(li.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(li.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(li.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(li.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(li.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(li.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),rt=QX;var JX=function(){function n(){}return n.decode=function(e,t,r,i){var o=new yf(e),s=new J,a=new Array,c=-1,u=-1;try{var l=null,f=!1,h=void 0;do{if(o.available()<4)h=rt.TERMINATOR;else{var p=o.readBits(4);h=rt.forBits(p)}switch(h){case rt.TERMINATOR:break;case rt.FNC1_FIRST_POSITION:case rt.FNC1_SECOND_POSITION:f=!0;break;case rt.STRUCTURED_APPEND:if(o.available()<16)throw new z;c=o.readBits(8),u=o.readBits(8);break;case rt.ECI:var m=n.parseECIValue(o);if(l=lt.getCharacterSetECIByValue(m),l===null)throw new z;break;case rt.HANZI:var y=o.readBits(4),_=o.readBits(h.getCharacterCountBits(t));y===n.GB2312_SUBSET&&n.decodeHanziSegment(o,s,_);break;default:var A=o.readBits(h.getCharacterCountBits(t));switch(h){case rt.NUMERIC:n.decodeNumericSegment(o,s,A);break;case rt.ALPHANUMERIC:n.decodeAlphanumericSegment(o,s,A,f);break;case rt.BYTE:n.decodeByteSegment(o,s,A,l,a,i);break;case rt.KANJI:n.decodeKanjiSegment(o,s,A);break;default:throw new z}break}}while(h!==rt.TERMINATOR)}catch{throw new z}return new Ao(e,s.toString(),a.length===0?null:a,r===null?null:r.toString(),c,u)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new z;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,i[o]=a>>8&255,i[o+1]=a&255,o+=2,r--}try{t.append(nn.decode(i,de.GB2312))}catch(c){throw new z(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new z;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,i[o]=a>>8,i[o+1]=a,o+=2,r--}try{t.append(nn.decode(i,de.SHIFT_JIS))}catch(c){throw new z(c)}},n.decodeByteSegment=function(e,t,r,i,o,s){if(8*r>e.available())throw new z;for(var a=new Uint8Array(r),c=0;c<r;c++)a[c]=e.readBits(8);var u;i===null?u=de.guessEncoding(a,s):u=i.getName();try{t.append(nn.decode(a,u))}catch(l){throw new z(l)}o.push(a)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new z;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var o=t.length();r>1;){if(e.available()<11)throw new z;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new z;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=o;a<t.length();a++)t.charAt(a)==="%"&&(a<t.length()-1&&t.charAt(a+1)==="%"?t.deleteCharAt(a+1):t.setCharAt(a,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new z;var i=e.readBits(10);if(i>=1e3)throw new z;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new z;var o=e.readBits(7);if(o>=100)throw new z;t.append(n.toAlphaNumericChar(Math.floor(o/10))),t.append(n.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new z;var s=e.readBits(4);if(s>=10)throw new z;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new z},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),IA=JX;var eY=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),Bv=eY;var uF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tY=function(){function n(){this.rsDecoder=new xo(kt.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(dt.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new sF(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,t);return o.setOther(new Bv(!0)),o}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,o,s,a=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),l=cF.getDataBlocks(u,a,c),f=0;try{for(var h=uF(l),p=h.next();!p.done;p=h.next()){var m=p.value;f+=m.getNumDataCodewords()}}catch(B){r={error:B}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}var y=new Uint8Array(f),_=0;try{for(var A=uF(l),b=A.next();!b.done;b=A.next()){var m=b.value,R=m.getCodewords(),O=m.getNumDataCodewords();this.correctErrors(R,O);for(var V=0;V<O;V++)y[_++]=R[V]}}catch(B){o={error:B}}finally{try{b&&!b.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}return IA.decode(y,a,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new He}for(var i=0;i<t;i++)e[i]=r[i]},n}(),lF=tY;var nY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rY=function(n){nY(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=(this.getX()+r)/2,s=(this.getY()+t)/2,a=(this.estimatedModuleSize+i)/2;return new e(o,s,a)},e}(q),dF=rY;var iY=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oY=function(){function n(e,t,r,i,o,s,a){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,o=this.startY+t/2,s=new Int32Array(3),a=this.image,c=0;c<t;c++){var u=o+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var l=e;l<i&&!a.get(l,u);)l++;for(var f=0;l<i;){if(a.get(l,u))if(f===1)s[1]++;else if(f===2){if(this.foundPatternCross(s)){var h=this.handlePossibleCenter(s,u,l);if(h!==null)return h}s[0]=s[2],s[1]=1,s[2]=0,f=1}else s[++f]++;else f===1&&f++,s[f]++;l++}if(this.foundPatternCross(s)){var h=this.handlePossibleCenter(s,u,i);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new P},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var o=this.image,s=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var c=e;c>=0&&o.get(t,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&!o.get(t,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c)&&a[1]<=r;)a[1]++,c++;if(c===s||a[1]>r)return NaN;for(;c<s&&!o.get(t,c)&&a[2]<=r;)a[2]++,c++;if(a[2]>r)return NaN;var u=a[0]+a[1]+a[2];return 5*Math.abs(u-i)>=2*i?NaN:this.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,o,s=e[0]+e[1]+e[2],a=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,a,2*e[1],s);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var l=iY(this.possibleCenters),f=l.next();!f.done;f=l.next()){var h=f.value;if(h.aboutEquals(u,c,a))return h.combineEstimate(c,a,u)}}catch(m){i={error:m}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}var p=new dF(a,c,u);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},n}(),fF=oY;var sY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),aY=function(n){sY(e,n);function e(t,r,i,o){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=this.count+1,s=(this.count*this.getX()+r)/o,a=(this.count*this.getY()+t)/o,c=(this.count*this.estimatedModuleSize+i)/o;return new e(s,a,c,o)},e}(q),hF=aY;var cY=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),pF=cY;var Ef=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uY=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(le.TRY_HARDER)!==void 0,r=e!=null&&e.get(le.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*n.MAX_MODULES));(a<n.MIN_SKIP||t)&&(a=n.MIN_SKIP);for(var c=!1,u=new Int32Array(5),l=a-1;l<o&&!c;l+=a){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,h=0;h<s;h++)if(i.get(h,l))(f&1)===1&&f++,u[f]++;else if((f&1)===0)if(f===4)if(n.foundPatternCross(u)){var p=this.handlePossibleCenter(u,l,h,r);if(p===!0)if(a=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(l+=m-u[2]-a,h=s-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;else u[f]++;if(n.foundPatternCross(u)){var p=this.handlePossibleCenter(u,l,s,r);p===!0&&(a=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var y=this.selectBestPatterns();return q.orderBestPatterns(y),new pF(y)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var o=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&t>=s&&a.get(t-s,e-s);)o[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!a.get(t-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||t<s||o[1]>r)return!1;for(;e>=s&&t>=s&&a.get(t-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var c=a.getHeight(),u=a.getWidth();for(s=1;e+s<c&&t+s<u&&a.get(t+s,e+s);)o[2]++,s++;if(e+s>=c||t+s>=u)return!1;for(;e+s<c&&t+s<u&&!a.get(t+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=c||t+s>=u||o[3]>=r)return!1;for(;e+s<c&&t+s<u&&a.get(t+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var l=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(l-i)<2*i&&n.foundPatternCross(o)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(t,c);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(t,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(t,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(t,c)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(t,c)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=2*i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(c,t);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(c,t)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(c,t)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(c,t);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(c,t)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(c,t)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),a=this.crossCheckVertical(t,Math.floor(s),e[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],o)))){for(var c=o/7,u=!1,l=this.possibleCenters,f=0,h=l.length;f<h;f++){var p=l[f];if(p.aboutEquals(c,a,s)){l[f]=p.combineEstimate(a,s,c),u=!0;break}}if(!u){var m=new hF(s,a,c);l.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=Ef(this.possibleCenters),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.getCount()>=n.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,o=0,s=0,a=this.possibleCenters.length;try{for(var c=Ef(this.possibleCenters),u=c.next();!u.done;u=c.next()){var l=u.value;l.getCount()>=n.CENTER_QUORUM&&(o++,s+=l.getEstimatedModuleSize())}}catch(y){e={error:y}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(o<3)return!1;var f=s/a,h=0;try{for(var p=Ef(this.possibleCenters),m=p.next();!m.done;m=p.next()){var l=m.value;h+=Math.abs(l.getEstimatedModuleSize()-f)}}catch(y){r={error:y}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return h<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,o=this.possibleCenters.length;if(o<3)throw new P;var s=this.possibleCenters,a;if(o>3){var c=0,u=0;try{for(var l=Ef(this.possibleCenters),f=l.next();!f.done;f=l.next()){var h=f.value,p=h.getEstimatedModuleSize();c+=p,u+=p*p}}catch(V){e={error:V}}finally{try{f&&!f.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}a=c/o;var m=Math.sqrt(u/o-a*a);s.sort(function(V,B){var x=Math.abs(B.getEstimatedModuleSize()-a),E=Math.abs(V.getEstimatedModuleSize()-a);return x<E?-1:x>E?1:0});for(var y=Math.max(.2*a,m),_=0;_<s.length&&s.length>3;_++){var A=s[_];Math.abs(A.getEstimatedModuleSize()-a)>y&&(s.splice(_,1),_--)}}if(s.length>3){var c=0;try{for(var b=Ef(s),R=b.next();!R.done;R=b.next()){var O=R.value;c+=O.getEstimatedModuleSize()}}catch(B){r={error:B}}finally{try{R&&!R.done&&(i=b.return)&&i.call(b)}finally{if(r)throw r.error}}a=c/s.length,s.sort(function(B,x){if(x.getCount()===B.getCount()){var E=Math.abs(x.getEstimatedModuleSize()-a),D=Math.abs(B.getEstimatedModuleSize()-a);return E<D?1:E>D?-1:0}else return x.getCount()-B.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),gF=uY;var lY=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(le.NEED_RESULT_POINT_CALLBACK);var t=new gF(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,r,i);if(o<1)throw new P("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,o),a=ui.getProvisionalVersionForDimension(s),c=a.getDimensionForVersion()-7,u=null;if(a.getAlignmentPatternCenters().length>0)for(var l=r.getX()-t.getX()+i.getX(),f=r.getY()-t.getY()+i.getY(),h=1-3/c,p=Math.floor(t.getX()+h*(l-t.getX())),m=Math.floor(t.getY()+h*(f-t.getY())),y=4;y<=16;y<<=1)try{u=this.findAlignmentInRegion(o,p,m,y);break}catch(R){if(!(R instanceof P))throw R}var _=n.createTransform(t,r,i,u,s),A=n.sampleGrid(this.image,_,s),b;return u===null?b=[i,t,r]:b=[i,t,r,u],new Oa(A,b)},n.createTransform=function(e,t,r,i,o){var s=o-3.5,a,c,u,l;return i!==null?(a=i.getX(),c=i.getY(),u=s-3,l=u):(a=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),u=s,l=s),mf.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,u,l,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),a,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Pa.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var o=Ie.round(q.distance(e,t)/i),s=Ie.round(q.distance(e,r)/i),a=Math.floor((o+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new P("Dimensions could be not found.")}return a},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,a=e-(r-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,t,a,c),o-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var o=Math.abs(i-t)>Math.abs(r-e);if(o){var s=e;e=t,t=s,s=r,r=i,i=s}for(var a=Math.abs(r-e),c=Math.abs(i-t),u=-a/2,l=e<r?1:-1,f=t<i?1:-1,h=0,p=r+l,m=e,y=t;m!==p;m+=l){var _=o?y:m,A=o?m:y;if(h===1===this.image.get(_,A)){if(h===2)return Ie.distance(m,y,e,t);h++}if(u+=c,u>0){if(y===i)break;y+=f,u-=a}}return h===2?Ie.distance(r+l,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var o=Math.floor(i*e),s=Math.max(0,t-o),a=Math.min(this.image.getWidth()-1,t+o);if(a-s<e*3)throw new P("Alignment top exceeds estimated module size.");var c=Math.max(0,r-o),u=Math.min(this.image.getHeight()-1,r+o);if(u-c<e*3)throw new P("Alignment bottom exceeds estimated module size.");var l=new fF(this.image,s,c,a-s,u-c,e,this.resultPointCallback);return l.find()},n}(),mF=lY;var dY=function(){function n(){this.decoder=new lF}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(le.PURE_BARCODE)!==void 0){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,t),i=n.NO_POINTS}else{var s=new mF(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof Bv&&r.getOther().applyMirroredCorrection(i);var a=new Ge(r.getText(),r.getRawBytes(),void 0,i,G.QR_CODE,void 0),c=r.getByteSegments();c!==null&&a.putMetadata(vt.BYTE_SEGMENTS,c);var u=r.getECLevel();return u!==null&&a.putMetadata(vt.ERROR_CORRECTION_LEVEL,u),r.hasStructuredAppend()&&(a.putMetadata(vt.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(vt.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new P;var i=this.moduleSize(t,e),o=t[1],s=r[1],a=t[0],c=r[0];if(a>=c||o>=s)throw new P;if(s-o!==c-a&&(c=a+(s-o),c>=e.getWidth()))throw new P;var u=Math.round((c-a+1)/i),l=Math.round((s-o+1)/i);if(u<=0||l<=0)throw new P;if(l!==u)throw new P;var f=Math.floor(i/2);o+=f,a+=f;var h=a+Math.floor((u-1)*i)-c;if(h>0){if(h>f)throw new P;a-=h}var p=o+Math.floor((l-1)*i)-s;if(p>0){if(p>f)throw new P;o-=p}for(var m=new dt(u,l),y=0;y<l;y++)for(var _=o+Math.floor(y*i),A=0;A<u;A++)e.get(a+Math.floor(A*i),_)&&m.set(A,y);return m},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),o=e[0],s=e[1],a=!0,c=0;o<i&&s<r;){if(a!==t.get(o,s)){if(++c===5)break;a=!a}o++,s++}if(o===i||s===r)throw new P;return(o-e[0])/7},n.NO_POINTS=new Array,n}(),Is=dY;var fY=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hY=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return Ie.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=fY(e),a=s.next();!a.done;a=s.next()){var c=a.value;i[o++]=c}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=qe.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),Se=hY;var pY=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),vF=pY;var gY=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mY=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),o=n.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=n.detect(r,i)),new vF(i,o)},n.detect=function(e,t){for(var r,i,o=new Array,s=0,a=0,c=!1;s<t.getHeight();){var u=n.findVertices(t,s,a);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,a=0;try{for(var l=(r=void 0,gY(o)),f=l.next();!f.done;f=l.next()){var h=f.value;h[1]!=null&&(s=Math.trunc(Math.max(s,h[1].getY()))),h[3]!=null&&(s=Math.max(s,Math.trunc(h[3].getY())))}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,o.push(u),!e)break;u[2]!=null?(a=Math.trunc(u[2].getX()),s=Math.trunc(u[2].getY())):(a=Math.trunc(u[4].getX()),s=Math.trunc(u[4].getY()))}return o},n.findVertices=function(e,t,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,o,s){for(var a=new Array(4),c=!1,u=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var l=n.findGuardPattern(e,o,i,r,!1,s,u);if(l!=null){for(;i>0;){var f=n.findGuardPattern(e,o,--i,r,!1,s,u);if(f!=null)l=f;else{i++;break}}a[0]=new q(l[0],i),a[1]=new q(l[1],i),c=!0;break}}var h=i+1;if(c){for(var p=0,f=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);h<t;h++){var l=n.findGuardPattern(e,f[0],h,r,!1,s,u);if(l!=null&&Math.abs(f[0]-l[0])<n.MAX_PATTERN_DRIFT&&Math.abs(f[1]-l[1])<n.MAX_PATTERN_DRIFT)f=l,p=0;else{if(p>n.SKIPPED_ROW_COUNT_MAX)break;p++}}h-=p+1,a[2]=new q(f[0],h),a[3]=new q(f[1],h)}return h-i<n.BARCODE_MIN_HEIGHT&&qe.fill(a,null),a},n.findGuardPattern=function(e,t,r,i,o,s,a){qe.fillWithin(a,0,a.length,0);for(var c=t,u=0;e.get(c,r)&&c>0&&u++<n.MAX_PIXEL_DRIFT;)c--;for(var l=c,f=0,h=s.length,p=o;l<i;l++){var m=e.get(l,r);if(m!==p)a[f]++;else{if(f===h-1){if(n.patternMatchVariance(a,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,l]);c+=a[0]+a[1],Ee.arraycopy(a,2,a,0,f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,p=!p}}return f===h-1&&n.patternMatchVariance(a,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,l-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return 1/0;var c=o/s;r*=c;for(var u=0,l=0;l<i;l++){var f=e[l],h=t[l]*c,p=f>h?f-h:h-f;if(p>r)return 1/0;u+=p}return u/o},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),yF=mY;var vY=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yY=function(){function n(e,t){if(t.length===0)throw new $;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Ee.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=vY(this.coefficients),s=o.next();!s.done;s=o.next()){var a=s.value;i=this.field.add(i,a)}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],u=this.coefficients.length,l=1;l<u;l++)c=this.field.add(this.field.multiply(e,c),this.coefficients[l]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new $("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;Ee.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=this.field.add(t[a-s],r[a]);return new n(this.field,o)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new $("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new $("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=0;a<r;a++)for(var c=t[a],u=0;u<o;u++)s[a+u]=this.field.add(s[a+u],this.field.multiply(c,i[u]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new $;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new J,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),So=yY;var _Y=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new $;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new pf;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),_F=_Y;var wY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EY=function(n){wY(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,s=0;s<t;s++)i.expTable[s]=o,o=o*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new So(i,new Int32Array([0])),i.one=new So(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new $;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new So(this,i)},e.PDF417_GF=new e(Se.NUMBER_OF_CODEWORDS,3),e}(_F),wF=EY;var IY=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CY=function(){function n(){this.field=wF.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,o,s=new So(this.field,e),a=new Int32Array(t),c=!1,u=t;u>0;u--){var l=s.evaluateAt(this.field.exp(u));a[t-u]=l,l!==0&&(c=!0)}if(!c)return 0;var f=this.field.getOne();if(r!=null)try{for(var h=IY(r),p=h.next();!p.done;p=h.next()){var m=p.value,y=this.field.exp(e.length-1-m),_=new So(this.field,new Int32Array([this.field.subtract(0,y),1]));f=f.multiply(_)}}catch(E){i={error:E}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}for(var A=new So(this.field,a),b=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),A,t),R=b[0],O=b[1],V=this.findErrorLocations(R),B=this.findErrorMagnitudes(O,R,V),u=0;u<V.length;u++){var x=e.length-1-this.field.log(V[u]);if(x<0)throw He.getChecksumInstance();e[x]=this.field.subtract(e[x],B[u])}return V.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,s=t,a=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var u=o,l=a;if(o=s,a=c,o.isZero())throw He.getChecksumInstance();s=u;for(var f=this.field.getZero(),h=o.getCoefficient(o.getDegree()),p=this.field.inverse(h);s.getDegree()>=o.getDegree()&&!s.isZero();){var m=s.getDegree()-o.getDegree(),y=this.field.multiply(s.getCoefficient(s.getDegree()),p);f=f.add(this.field.buildMonomial(m,y)),s=s.subtract(o.multiplyByMonomial(m,y))}c=f.multiply(a).subtract(l).negative()}var _=c.getCoefficient(0);if(_===0)throw He.getChecksumInstance();var A=this.field.inverse(_),b=c.multiply(A),R=s.multiply(A);return[b,R]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==t)throw He.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var a=new So(this.field,o),c=r.length,u=new Int32Array(c),s=0;s<c;s++){var l=this.field.inverse(r[s]),f=this.field.subtract(0,e.evaluateAt(l)),h=this.field.inverse(a.evaluateAt(l));u[s]=this.field.multiply(f,h)}return u},n}(),CA=CY;var AY=function(){function n(e,t,r,i,o){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,o)}return n.prototype.constructor_1=function(e,t,r,i,o){var s=t==null||r==null,a=i==null||o==null;if(s&&a)throw new P;s?(t=new q(0,i.getY()),r=new q(0,o.getY())):a&&(i=new q(e.getWidth()-1,t.getY()),o=new q(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var l=new q(c.getX(),u);r?i=l:s=l}if(t>0){var f=r?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+t);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var p=new q(f.getX(),h);r?o=p:a=p}return new n(this.image,i,o,s,a)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),If=AY;var xY=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),EF=xY;var DY=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,a,c,u,l,f){if(s==="%%")return"%";if(t[++r]!==void 0){s=u?parseInt(u.substr(1)):void 0;var h=l?parseInt(l.substr(1)):void 0,p;switch(f){case"s":p=t[r];break;case"c":p=t[r][0];break;case"f":p=parseFloat(t[r]).toFixed(s);break;case"p":p=parseFloat(t[r]).toPrecision(s);break;case"e":p=parseFloat(t[r]).toExponential(s);break;case"x":p=parseInt(t[r]).toString(h||16);break;case"d":p=parseFloat(parseInt(t[r],h||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var m=parseInt(c),y=c&&c[0]+""=="0"?"0":" ";p.length<m;)p=a!==void 0?p+y:y+p;return p}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),Pu=DY;var bY=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SY=function(){function n(e){this.boundingBox=new If(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new Pu,i=0;try{for(var o=bY(this.codewords),s=o.next();!s.done;s=o.next()){var a=s.value;if(a==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),Uv=SY;var TY=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RY=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},MY=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,o=function(f,h){var p={getKey:function(){return f},getValue:function(){return h}};p.getValue()>r?(r=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===r&&i.push(p.getKey())};try{for(var s=TY(this.values.entries()),a=s.next();!a.done;a=s.next()){var c=RY(a.value,2),u=c[0],l=c[1];o(u,l)}}catch(f){e={error:f}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Se.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),La=MY;var NY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),AA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OY=function(n){NY(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=AA(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),u=-1,l=1,f=0,h=a;h<c;h++)if(r[h]!=null){var p=r[h],m=p.getRowNumber()-u;if(m===0)f++;else if(m===1)l=Math.max(l,f),f=1,u=p.getRowNumber();else if(m<0||p.getRowNumber()>=t.getRowCount()||m>h)r[h]=null;else{var y=void 0;l>2?y=(l-2)*m:y=m;for(var _=y>=h,A=1;A<=y&&!_;A++)_=r[h-A]!=null;_?r[h]=null:(u=p.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=AA(this.getCodewords()),a=s.next();!a.done;a=s.next()){var c=a.value;if(c!=null){var u=c.getRowNumber();if(u>=o.length)continue;o[u]++}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.getCodewords(),u=-1,l=1,f=0,h=s;h<a;h++)if(c[h]!=null){var p=c[h];p.setRowNumberAsRowIndicatorColumn();var m=p.getRowNumber()-u;m===0?f++:m===1?(l=Math.max(l,f),f=1,u=p.getRowNumber()):p.getRowNumber()>=t.getRowCount()?c[h]=null:(u=p.getRowNumber(),f=1)}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),o=new La,s=new La,a=new La,c=new La;try{for(var u=AA(i),l=u.next();!l.done;l=u.next()){var f=l.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,p=f.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:s.setValue(h*3+1);break;case 1:c.setValue(h/3),a.setValue(h%3);break;case 2:o.setValue(h+1);break}}}}catch(y){t={error:y}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}if(o.getValue().length===0||s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<Se.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>Se.MAX_ROWS_IN_BARCODE)return null;var m=new EF(o.getValue()[0],s.getValue()[0],a.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,m),m},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var s=o.getValue()%30,a=o.getRowNumber();if(a>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(Uv),xA=OY;var PY=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kY=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Se.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=n.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=n.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[t],a=this.detectionResultColumns[e-1].getCodewords(),c=a;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=a[t],u[3]=c[t],t>0&&(u[0]=r[t-1],u[4]=a[t-1],u[5]=c[t-1]),t>1&&(u[8]=r[t-2],u[10]=a[t-2],u[11]=c[t-2]),t<r.length-1&&(u[1]=r[t+1],u[6]=a[t+1],u[7]=c[t+1]),t<r.length-2&&(u[9]=r[t+2],u[12]=a[t+2],u[13]=c[t+2]);try{for(var l=PY(u),f=l.next();!f.done;f=l.next()){var h=f.value;if(n.adjustRowNumber(s,h))return}}catch(p){i={error:p}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Pu,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},n}(),IF=kY;var FY=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),CF=FY;var LY=function(){function n(){}return n.initialize=function(){for(var e=0;e<Se.SYMBOL_TABLE.length;e++)for(var t=Se.SYMBOL_TABLE[e],r=t&1,i=0;i<Se.BARS_IN_MODULE;i++){for(var o=0;(t&1)===r;)o+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Se.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Se.BARS_IN_MODULE-i-1]=Math.fround(o/Se.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=Ie.sum(e),r=new Int32Array(Se.BARS_IN_MODULE),i=0,o=0,s=0;s<Se.MODULES_IN_CODEWORD;s++){var a=t/(2*Se.MODULES_IN_CODEWORD)+s*t/Se.MODULES_IN_CODEWORD;o+e[i]<=a&&(o+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Se.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=Ie.sum(e),r=new Array(Se.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var o=gf.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var a=0;a<n.RATIOS_TABLE.length;a++){for(var c=0,u=n.RATIOS_TABLE[a],l=0;l<Se.BARS_IN_MODULE;l++){var f=Math.fround(u[l]-r[l]);if(c+=Math.fround(f*f),c>=o)break}c<o&&(o=c,s=Se.SYMBOL_TABLE[a])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Se.SYMBOL_TABLE.length).map(function(e){return e=new Array(Se.BARS_IN_MODULE)}),n}(),AF=LY;var VY=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),DA=VY;var BY=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),bA=BY;var UY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jY=function(n){UY(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(et),xF=jY;var zY=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new xF;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new bu;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),DF=zY;var HY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$Y=function(n){HY(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(et),bF=$Y;var GY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),WY=function(n){GY(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new $("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new bF;i=ie.MAX_VALUE}this.buf=qe.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new bu;this.ensureCapacity(this.count+i),Ee.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return qe.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(DF),SF=WY;var ft=function(n){return n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT",n}(ft||{});function TF(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var jv;function Cs(n){if(typeof jv>"u"&&(jv=TF()),jv===null)throw new Error("BigInt is not supported!");return jv(n)}function qY(){var n=[];n[0]=Cs(1);var e=Cs(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var KY=function(){function n(){}return n.decode=function(e,t){var r=new J(""),i=lt.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],a=new DA;o<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:o=n.textCompaction(e,o,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:o=n.byteCompaction(s,e,i,o,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:o=n.numericCompaction(e,o,r);break;case n.ECI_CHARSET:var c=lt.getCharacterSetECIByValue(e[o++]);break;case n.ECI_GENERAL_PURPOSE:o+=2;break;case n.ECI_USER_DEFINED:o++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=n.decodeMacroBlock(e,o,a);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new z;default:o--,o=n.textCompaction(e,o,r);break}if(o<e.length)s=e[o++];else throw z.getFormatInstance()}if(r.length()===0)throw z.getFormatInstance();var u=new Ao(null,r.toString(),null,t);return u.setOther(a),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw z.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<n.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];r.setSegmentIndex(ie.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new J;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var a=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new J;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new J;t=n.textCompaction(e,t+1,u),r.setSender(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var l=new J;t=n.textCompaction(e,t+1,l),r.setAddressee(l.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new J;t=n.numericCompaction(e,t+1,f),r.setSegmentCount(ie.parseInt(f.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new J;t=n.numericCompaction(e,t+1,h),r.setTimestamp(bA.parseLong(h.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new J;t=n.numericCompaction(e,t+1,p),r.setChecksum(ie.parseInt(p.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new J;t=n.numericCompaction(e,t+1,m),r.setFileSize(bA.parseLong(m.toString()));break;default:throw z.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw z.getFormatInstance()}if(a!==-1){var y=t-a;r.isLastSegment()&&y--,r.setOptionalData(qe.copyOfRange(e,a,a+y))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),s=0,a=!1;t<e[0]&&!a;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],o[s]=c,s++;break}}return n.decodeTextCompaction(i,o,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var o=ft.ALPHA,s=ft.ALPHA,a=0;a<r;){var c=e[a],u="";switch(o){case ft.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case n.LL:o=ft.LOWER;break;case n.ML:o=ft.MIXED;break;case n.PS:s=o,o=ft.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=ft.ALPHA;break}break;case ft.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case n.AS:s=o,o=ft.ALPHA_SHIFT;break;case n.ML:o=ft.MIXED;break;case n.PS:s=o,o=ft.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=ft.ALPHA;break}break;case ft.MIXED:if(c<n.PL)u=n.MIXED_CHARS[c];else switch(c){case n.PL:o=ft.PUNCT;break;case 26:u=" ";break;case n.LL:o=ft.LOWER;break;case n.AL:o=ft.ALPHA;break;case n.PS:s=o,o=ft.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=ft.ALPHA;break}break;case ft.PUNCT:if(c<n.PAL)u=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=ft.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=ft.ALPHA;break}break;case ft.ALPHA_SHIFT:if(o=s,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:o=ft.ALPHA;break}break;case ft.PUNCT_SHIFT:if(o=s,c<n.PAL)u=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=ft.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=ft.ALPHA;break}break}u!==""&&i.append(u),a++}},n.byteCompaction=function(e,t,r,i,o){var s=new SF,a=0,c=0,u=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var l=new Int32Array(6),f=t[i++];i<t[0]&&!u;)switch(l[a++]=f,c=900*c+f,f=t[i++],f){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,u=!0;break;default:if(a%5===0&&a>0){for(var h=0;h<6;++h)s.write(Number(Cs(c)>>Cs(8*(5-h))));c=0,a=0}break}i===t[0]&&f<n.TEXT_COMPACTION_MODE_LATCH&&(l[a++]=f);for(var p=0;p<a;p++)s.write(l[p]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!u;){var m=t[i++];if(m<n.TEXT_COMPACTION_MODE_LATCH)a++,c=900*c+m;else switch(m){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,u=!0;break}if(a%5===0&&a>0){for(var h=0;h<6;++h)s.write(Number(Cs(c)>>Cs(8*(5-h))));c=0,a=0}}break}return o.append(nn.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,o=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var a=e[t++];if(t===e[0]&&(o=!0),a<n.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||a===n.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Cs(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Cs(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new z;return o.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=TF()?qY():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),SA=KY;var Cf=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZY=function(){function n(){}return n.decode=function(e,t,r,i,o,s,a){for(var c=new If(e,t,r,i,o),u=null,l=null,f,h=!0;;h=!1){if(t!=null&&(u=n.getRowIndicatorColumn(e,c,t,!0,s,a)),i!=null&&(l=n.getRowIndicatorColumn(e,c,i,!1,s,a)),f=n.merge(u,l),f==null)throw P.getNotFoundInstance();var p=f.getBoundingBox();if(h&&p!=null&&(p.getMinY()<c.getMinY()||p.getMaxY()>c.getMaxY()))c=p;else break}f.setBoundingBox(c);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,l);for(var y=u!=null,_=1;_<=m;_++){var A=y?_:m-_;if(f.getDetectionResultColumn(A)===void 0){var b=void 0;A===0||A===m?b=new xA(c,A===0):b=new Uv(c),f.setDetectionResultColumn(A,b);for(var R=-1,O=R,V=c.getMinY();V<=c.getMaxY();V++){if(R=n.getStartColumn(f,A,V,y),R<0||R>c.getMaxX()){if(O===-1)continue;R=O}var B=n.detectCodeword(e,c.getMinX(),c.getMaxX(),y,R,V,s,a);B!=null&&(b.setCodeword(V,B),O=R,s=Math.min(s,B.getWidth()),a=Math.max(a,B.getWidth()))}}}return n.createDecoderResult(f)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=If.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new IF(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=n.getMax(i),s=0;try{for(var a=Cf(i),c=a.next();!c.done;c=a.next()){var u=c.value;if(s+=o-u,u>0)break}}catch(p){t={error:p}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}for(var l=e.getCodewords(),f=0;s>0&&l[f]==null;f++)s--;for(var h=0,f=i.length-1;f>=0&&(h+=o-i[f],!(i[f]>0));f--);for(var f=l.length-1;h>0&&l[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(s,h,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var o=Cf(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=Math.max(i,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,o,s){for(var a=new xA(t,i),c=0;c<2;c++)for(var u=c===0?1:-1,l=Math.trunc(Math.trunc(r.getX())),f=Math.trunc(Math.trunc(r.getY()));f<=t.getMaxY()&&f>=t.getMinY();f+=u){var h=n.detectCodeword(e,0,e.getWidth(),i,l,f,o,s);h!=null&&(a.setCodeword(f,h),i?l=h.getStartX():l=h.getEndX())}return a},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>Se.MAX_CODEWORDS_IN_BARCODE)throw P.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=t[a][c+1].getValue(),l=a*e.getBarcodeColumnCount()+c;u.length===0?r.push(l):u.length===1?i[l]=u[0]:(s.push(l),o.push(u))}for(var f=new Array(o.length),h=0;h<f.length;h++)f[h]=o[h];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Se.toIntArray(r),Se.toIntArray(s),f)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,o){for(var s=new Int32Array(i.length),a=100;a-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=o[c][s[c]];try{return n.decodeCodewords(t,e,r)}catch(l){var u=l instanceof He;if(!u)throw l}if(s.length===0)throw He.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<o[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw He.getChecksumInstance()}throw He.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<s.length;a++)for(var c=0;c<s[a].length;c++)s[a][c]=new La;var u=0;try{for(var l=Cf(e.getDetectionResultColumns()),f=l.next();!f.done;f=l.next()){var h=f.value;if(h!=null)try{for(var p=(i=void 0,Cf(h.getCodewords())),m=p.next();!m.done;m=p.next()){var y=m.value;if(y!=null){var _=y.getRowNumber();if(_>=0){if(_>=s.length)continue;s[_][u].setValue(y.getValue())}}}}catch(A){i={error:A}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}u++}}catch(A){t={error:A}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var o,s,a=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-a)&&(c=e.getDetectionResultColumn(t-a).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-a)&&(c=e.getDetectionResultColumn(t-a).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var u=0;n.isValidBarcodeColumn(e,t-a);){t-=a;try{for(var l=(o=void 0,Cf(e.getDetectionResultColumn(t).getCodewords())),f=l.next();!f.done;f=l.next()){var h=f.value;if(h!=null)return(i?h.getEndX():h.getStartX())+a*u*(h.getEndX()-h.getStartX())}}catch(p){o={error:p}}finally{try{f&&!f.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,o,s,a,c){o=n.adjustCodewordStartColumn(e,t,r,i,o,s);var u=n.getModuleBitCount(e,t,r,i,o,s);if(u==null)return null;var l,f=Ie.sum(u);if(i)l=o+f;else{for(var h=0;h<u.length/2;h++){var p=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=p}l=o,o=l-f}if(!n.checkCodewordSkew(f,a,c))return null;var m=AF.getDecodedValue(u),y=Se.getCodeword(m);return y===-1?null:new CF(o,l,n.getCodewordBucketNumber(m),y)},n.getModuleBitCount=function(e,t,r,i,o,s){for(var a=o,c=new Int32Array(8),u=0,l=i?1:-1,f=i;(i?a<r:a>=t)&&u<c.length;)e.get(a,s)===f?(c[u]++,a+=l):(u++,f=!f);return u===c.length||a===(i?r:t)&&u===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,o,s){for(var a=o,c=i?-1:1,u=0;u<2;u++){for(;(i?a>=t:a<r)&&i===e.get(a,s);){if(Math.abs(o-a)>n.CODEWORD_SKEW_SIZE)return o;a+=c}c=-c,i=!i}return a},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw z.getFormatInstance();var i=1<<t+1,o=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=SA.decode(e,""+t);return s.setErrorsCorrected(o),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw He.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw z.getFormatInstance();var r=e[0];if(r>e.length)throw z.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw z.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new Pu,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new CA,n}(),RF=ZY;var XY=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YY=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw P.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof z||r instanceof He?P.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,o,s=new Array,a=yF.detectMultiple(e,t,r);try{for(var c=XY(a.getPoints()),u=c.next();!u.done;u=c.next()){var l=u.value,f=RF.decode(a.getBits(),l[4],l[5],l[6],l[7],n.getMinCodewordWidth(l),n.getMaxCodewordWidth(l)),h=new Ge(f.getText(),f.getRawBytes(),void 0,l,G.PDF_417);h.putMetadata(vt.ERROR_CORRECTION_LEVEL,f.getECLevel());var p=f.getOther();p!=null&&h.putMetadata(vt.PDF417_EXTRA_METADATA,p),s.push(h)}}catch(m){i={error:m}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s.map(function(m){return m})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?ie.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),As=YY;var QY=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),JY=function(n){QY(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(et),zv=JY;var MF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eQ=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(le.TRY_HARDER)!==void 0,r=e==null?null:e.get(le.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===G.UPC_A||s===G.UPC_E||s===G.EAN_13||s===G.EAN_8||s===G.CODABAR||s===G.CODE_39||s===G.CODE_93||s===G.CODE_128||s===G.ITF||s===G.RSS_14||s===G.RSS_EXPANDED});o&&!t&&i.push(new Bi(e)),r.includes(G.QR_CODE)&&i.push(new Is),r.includes(G.DATA_MATRIX)&&i.push(new Es),r.includes(G.AZTEC)&&i.push(new ms),r.includes(G.PDF_417)&&i.push(new As),o&&t&&i.push(new Bi(e))}i.length===0&&(t||i.push(new Bi(e)),i.push(new Is),i.push(new Es),i.push(new ms),i.push(new As),t&&i.push(new Bi(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=MF(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new zv("No readers where selected, nothing can be read.");try{for(var i=MF(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(a){if(a instanceof zv)continue}}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new P("No MultiFormat Readers were able to detect the code.")},n}(),Af=eQ;var tQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Pxe=function(n){tQ(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,o=new Af;return o.setHints(t),i=n.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(Lr);var nQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vxe=function(n){nQ(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new As,t)||this}return e}(Lr);var rQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zxe=function(n){rQ(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Is,t)||this}return e}(Lr);var NF=function(n){return n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40",n}(NF||{}),me=NF;var iQ=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Vr(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var s=r.multiply(new Vr(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new $("No error correction bytes");var r=e.length-t;if(r<=0)throw new $("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(r);Ee.arraycopy(e,0,o,0,r);var s=new Vr(this.field,o);s=s.multiplyByMonomial(t,1);for(var a=s.divide(i)[1],c=a.getCoefficients(),u=t-c.length,l=0;l<u;l++)e[r+l]=0;Ee.arraycopy(c,0,e,r+u,c.length)},n}(),xf=iQ;var oQ=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var a=r[s],c=0;c<i-1;c++){var u=a[c];u===a[c+1]&&u===r[s+1][c]&&u===r[s+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=0;a<i;a++){var c=r[s];a+6<i&&c[a]===1&&c[a+1]===0&&c[a+2]===1&&c[a+3]===1&&c[a+4]===1&&c[a+5]===0&&c[a+6]===1&&(n.isWhiteHorizontal(c,a-4,a)||n.isWhiteHorizontal(c,a+7,a+11))&&t++,s+6<o&&r[s][a]===1&&r[s+1][a]===0&&r[s+2][a]===1&&r[s+3][a]===1&&r[s+4][a]===1&&r[s+5][a]===0&&r[s+6][a]===1&&(n.isWhiteVertical(r,a,s-4,s)||n.isWhiteVertical(r,a,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=r[s],c=0;c<i;c++)a[c]===1&&t++;var u=e.getHeight()*e.getWidth(),l=Math.floor(Math.abs(t*2-u)*10/u);return l*n.N4},n.getDataMaskBit=function(e,t,r){var i,o;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:o=r*t,i=(o&1)+o%3;break;case 6:o=r*t,i=(o&1)+o%3&1;break;case 7:o=r*t,i=o%3+(r+t&1)&1;break;default:throw new $("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<i;a++){for(var c=0,u=-1,l=0;l<o;l++){var f=t?s[a][l]:s[l][a];f===u?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,u=f)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),xs=oQ;var sQ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aQ=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=sQ(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;qe.fill(s,e)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],s=t.bytes[r],a=0,c=this.width;a<c;++a)if(o[a]!==s[a])return!1;return!0},n.prototype.toString=function(){for(var e=new J,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),Df=aQ;var cQ=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new J;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),ku=cQ;var uQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lQ=function(n){uQ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(et),it=lQ;var dQ=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,o){n.clearMatrix(o),n.embedBasicPatterns(r,o),n.embedTypeInfo(t,i,o),n.maybeEmbedVersionInfo(r,o),n.embedDataBits(e,i,o)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new ut;n.makeTypeInfoBits(e,t,i);for(var o=0,s=i.getSize();o<s;++o){var a=i.get(i.getSize()-1-o),c=n.TYPE_INFO_COORDINATES[o],u=c[0],l=c[1];if(r.setBoolean(u,l,a),o<8){var f=r.getWidth()-o-1,h=8;r.setBoolean(f,h,a)}else{var f=8,h=r.getHeight()-7+(o-8);r.setBoolean(f,h,a)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new ut;n.makeVersionInfoBits(e,r);for(var i=6*3-1,o=0;o<6;++o)for(var s=0;s<3;++s){var a=r.get(i);i--,t.setBoolean(o,t.getHeight()-11+s,a),t.setBoolean(t.getHeight()-11+s,o,a)}}},n.embedDataBits=function(e,t,r){for(var i=0,o=-1,s=r.getWidth()-1,a=r.getHeight()-1;s>0;){for(s===6&&(s-=1);a>=0&&a<r.getHeight();){for(var c=0;c<2;++c){var u=s-c;if(n.isEmpty(r.get(u,a))){var l=void 0;i<e.getSize()?(l=e.get(i),++i):l=!1,t!==255&&xs.getDataMaskBit(t,u,a)&&(l=!l),r.setBoolean(u,a,l)}}a+=o}o=-o,a+=o,s-=2}if(i!==e.getSize())throw new it("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-ie.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new $("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!ku.isValidMaskPattern(t))throw new it("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var o=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(o,10);var s=new ut;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new it("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new it("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new it;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new it;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new it;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var o=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var o=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var a=i[o];if(a>=0)for(var c=0;c!==s;c++){var u=i[c];u>=0&&n.isEmpty(t.get(u,a))&&n.embedPositionAdjustmentPattern(u-2,a-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),Hv=dQ;var fQ=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),OF=fQ;var PF=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hQ=function(){function n(){}return n.calculateMaskPenalty=function(e){return xs.applyMaskPenaltyRule1(e)+xs.applyMaskPenaltyRule2(e)+xs.applyMaskPenaltyRule3(e)+xs.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get(me.CHARACTER_SET)!==void 0;o&&(i=r.get(me.CHARACTER_SET).toString());var s=this.chooseMode(e,i),a=new ut;if(s===rt.BYTE&&(o||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=lt.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,a)}this.appendModeInfo(s,a);var u=new ut;this.appendBytes(e,s,u,i);var l;if(r!==null&&r.get(me.QR_VERSION)!==void 0){var f=Number.parseInt(r.get(me.QR_VERSION).toString(),10);l=ui.getVersionForNumber(f);var h=this.calculateBitsNeeded(s,a,u,l);if(!this.willFit(h,l,t))throw new it("Data too big for requested version")}else l=this.recommendVersion(t,s,a,u);var p=new ut;p.appendBitArray(a);var m=s===rt.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,l,s,p),p.appendBitArray(u);var y=l.getECBlocksForLevel(t),_=l.getTotalCodewords()-y.getTotalECCodewords();this.terminateBits(_,p);var A=this.interleaveWithECBytes(p,l.getTotalCodewords(),_,y.getNumBlocks()),b=new ku;b.setECLevel(t),b.setMode(s),b.setVersion(l);var R=l.getDimensionForVersion(),O=new Df(R,R),V=this.chooseMaskPattern(A,t,l,O);return b.setMaskPattern(V),Hv.buildMatrix(A,t,l,V,O),b.setMatrix(O),b},n.recommendVersion=function(e,t,r,i){var o=this.calculateBitsNeeded(t,r,i,ui.getVersionForNumber(1)),s=this.chooseVersion(o,e),a=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(a,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),lt.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return rt.KANJI;for(var r=!1,i=!1,o=0,s=e.length;o<s;++o){var a=e.charAt(o);if(n.isDigit(a))r=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return rt.BYTE}return i?rt.ALPHANUMERIC:r?rt.NUMERIC:rt.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=nn.encode(e,lt.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,a=0;a<ku.NUM_MASK_PATTERNS;a++){Hv.buildMatrix(e,t,r,a,i);var c=this.calculateMaskPenalty(i);c<o&&(o=c,s=a)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=ui.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new it("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),o=t.getECBlocksForLevel(r),s=o.getTotalECCodewords(),a=i-s,c=(e+7)/8;return a>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new it("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var i=o;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new it("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,o,s){if(i>=r)throw new it("Block ID too large");var a=e%r,c=r-a,u=Math.floor(e/r),l=u+1,f=Math.floor(t/r),h=f+1,p=u-f,m=l-h;if(p!==m)throw new it("EC bytes mismatch");if(r!==c+a)throw new it("RS blocks mismatch");if(e!==(f+p)*c+(h+m)*a)throw new it("Total bytes mismatch");i<c?(o[0]=f,s[0]=p):(o[0]=h,s[0]=m)},n.interleaveWithECBytes=function(e,t,r,i){var o,s,a,c;if(e.getSizeInBytes()!==r)throw new it("Number of bits and data bytes does not match");for(var u=0,l=0,f=0,h=new Array,p=0;p<i;++p){var m=new Int32Array(1),y=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,p,m,y);var _=m[0],A=new Uint8Array(_);e.toBytes(8*u,A,0,_);var b=n.generateECBytes(A,y[0]);h.push(new OF(A,b)),l=Math.max(l,_),f=Math.max(f,b.length),u+=m[0]}if(r!==u)throw new it("Data bytes does not match offset");for(var R=new ut,p=0;p<l;++p)try{for(var O=(o=void 0,PF(h)),V=O.next();!V.done;V=O.next()){var B=V.value,A=B.getDataBytes();p<A.length&&R.appendBits(A[p],8)}}catch(T){o={error:T}}finally{try{V&&!V.done&&(s=O.return)&&s.call(O)}finally{if(o)throw o.error}}for(var p=0;p<f;++p)try{for(var x=(a=void 0,PF(h)),E=x.next();!E.done;E=x.next()){var B=E.value,b=B.getErrorCorrectionBytes();p<b.length&&R.appendBits(b[p],8)}}catch(T){a={error:T}}finally{try{E&&!E.done&&(c=x.return)&&c.call(x)}finally{if(a)throw a.error}}if(t!==R.getSizeInBytes())throw new it("Interleaving error: "+t+" and "+R.getSizeInBytes()+" differ.");return R},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),o=0;o<r;o++)i[o]=e[o]&255;new xf(kt.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),o=0;o<t;o++)s[o]=i[r+o];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var o=r.getCharacterCountBits(t);if(e>=1<<o)throw new it(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},n.appendBytes=function(e,t,r,i){switch(t){case rt.NUMERIC:n.appendNumericBytes(e,r);break;case rt.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case rt.BYTE:n.append8BitBytes(e,r,i);break;case rt.KANJI:n.appendKanjiBytes(e,r);break;default:throw new it("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),a=n.getDigit(e.charAt(i+2));t.appendBits(o*100+s*10+a,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(o*10+s,7),i+=2}else t.appendBits(o,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new it;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new it;t.appendBits(o*45+s,11),i+=2}else t.appendBits(o,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=nn.encode(e,r)}catch(c){throw new it(c)}for(var o=0,s=i.length;o!==s;o++){var a=i[o];t.appendBits(a,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=nn.encode(e,lt.SJIS)}catch(f){throw new it(f)}for(var i=r.length,o=0;o<i;o+=2){var s=r[o]&255,a=r[o+1]&255,c=s<<8&4294967295|a,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new it("Invalid byte sequence");var l=(u>>8)*192+(u&255);t.appendBits(l,13)}},n.appendECI=function(e,t){t.appendBits(rt.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=lt.UTF8.getName(),n}(),To=hQ;var NDe=function(){function n(){}return n.prototype.write=function(e,t,r,i){if(i===void 0&&(i=null),e.length===0)throw new $("Found empty contents");if(t<0||r<0)throw new $("Requested dimensions are too small: "+t+"x"+r);var o=Zn.L,s=n.QUIET_ZONE_SIZE;i!==null&&(i.get(me.ERROR_CORRECTION)!==void 0&&(o=Zn.fromString(i.get(me.ERROR_CORRECTION).toString())),i.get(me.MARGIN)!==void 0&&(s=Number.parseInt(i.get(me.MARGIN).toString(),10)));var a=To.encode(e,o,i);return this.renderResult(a,t,r,s)},n.prototype.writeToDom=function(e,t,r,i,o){o===void 0&&(o=null),typeof e=="string"&&(e=document.querySelector(e));var s=this.write(t,r,i,o);e&&e.appendChild(s)},n.prototype.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new zt;for(var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),f=Math.max(r,u),h=Math.min(Math.floor(l/c),Math.floor(f/u)),p=Math.floor((l-s*h)/2),m=Math.floor((f-a*h)/2),y=this.createSVGElement(l,f),_=0,A=m;_<a;_++,A+=h)for(var b=0,R=p;b<s;b++,R+=h)if(o.get(b,_)===1){var O=this.createSvgRectElement(R,A,h,h);y.appendChild(O)}return y},n.prototype.createSVGElement=function(e,t){var r=document.createElementNS(n.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",t.toString()),r},n.prototype.createSvgRectElement=function(e,t,r,i){var o=document.createElementNS(n.SVG_NS,"rect");return o.setAttributeNS(null,"x",e.toString()),o.setAttributeNS(null,"y",t.toString()),o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",i.toString()),o.setAttributeNS(null,"fill","#000000"),o},n.QUIET_ZONE_SIZE=4,n.SVG_NS="http://www.w3.org/2000/svg",n}();var pQ=function(){function n(){}return n.prototype.encode=function(e,t,r,i,o){if(e.length===0)throw new $("Found empty contents");if(t!==G.QR_CODE)throw new $("Can only encode QR_CODE, but got "+t);if(r<0||i<0)throw new $("Requested dimensions are too small: "+r+"x"+i);var s=Zn.L,a=n.QUIET_ZONE_SIZE;o!==null&&(o.get(me.ERROR_CORRECTION)!==void 0&&(s=Zn.fromString(o.get(me.ERROR_CORRECTION).toString())),o.get(me.MARGIN)!==void 0&&(a=Number.parseInt(o.get(me.MARGIN).toString(),10)));var c=To.encode(e,s,o);return n.renderResult(c,r,i,a)},n.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new zt;for(var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),f=Math.max(r,u),h=Math.min(Math.floor(l/c),Math.floor(f/u)),p=Math.floor((l-s*h)/2),m=Math.floor((f-a*h)/2),y=new dt(l,f),_=0,A=m;_<a;_++,A+=h)for(var b=0,R=p;b<s;b++,R+=h)o.get(b,_)===1&&y.setRegion(R,A,h,h);return y},n.QUIET_ZONE_SIZE=4,n}(),TA=pQ;var ibe=function(){function n(){}return n.prototype.encode=function(e,t,r,i,o){var s;switch(t){case G.QR_CODE:s=new TA;break;default:throw new $("No encoder available for format "+t)}return s.encode(e,t,r,i,o)},n}();var gQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lbe=function(n){gQ(e,n);function e(t,r,i,o,s,a,c,u){var l=n.call(this,a,c)||this;if(l.yuvData=t,l.dataWidth=r,l.dataHeight=i,l.left=o,l.top=s,o+a>r||s+c>i)throw new $("Crop rectangle does not fit within image data.");return u&&l.reverseHorizontal(a,c),l}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new $("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return Ee.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ee.arraycopy(this.yuvData,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*t;Ee.arraycopy(this.yuvData,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var c=a*t,u=0;u<t;u++){var l=o[s+u*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+u]=4278190080|l*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var a=s+t/2,c=s,u=s+t-1;c<a;c++,u--){var l=i[c];i[c]=i[u],i[u]=l}},e.prototype.invert=function(){return new Co(this)},e.THUMBNAIL_SCALE_FACTOR=2,e}(ci);var mQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vbe=function(n){mQ(e,n);function e(t,r,i,o,s,a,c){var u=n.call(this,r,i)||this;if(u.dataWidth=o,u.dataHeight=s,u.left=a,u.top=c,t.BYTES_PER_ELEMENT===4){for(var l=r*i,f=new Uint8ClampedArray(l),h=0;h<l;h++){var p=t[h],m=p>>16&255,y=p>>7&510,_=p&255;f[h]=(m+y+_)/4&255}u.luminances=f}else u.luminances=t;if(o===void 0&&(u.dataWidth=r),s===void 0&&(u.dataHeight=i),a===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+r>u.dataWidth||u.top+i>u.dataHeight)throw new $("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new $("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return Ee.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Ee.arraycopy(this.luminances,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*t;Ee.arraycopy(this.luminances,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new Co(this)},e}(ci);var vQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yQ=function(n){vQ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(lt),Va=yQ;var _Q=function(){function n(){}return n.ISO_8859_1=lt.ISO8859_1,n}(),bf=_Q;var wQ=function(){function n(e,t,r){this.codewords=e,this.numcols=t,this.numrows=r,this.bits=new Uint8Array(t*r),qe.fill(this.bits,2)}return n.prototype.getNumrows=function(){return this.numrows},n.prototype.getNumcols=function(){return this.numcols},n.prototype.getBits=function(){return this.bits},n.prototype.getBit=function(e,t){return this.bits[t*this.numcols+e]===1},n.prototype.setBit=function(e,t,r){this.bits[t*this.numcols+e]=r?1:0},n.prototype.noBit=function(e,t){return this.bits[t*this.numcols+e]===2},n.prototype.place=function(){var e=0,t=4,r=0;do{t===this.numrows&&r===0&&this.corner1(e++),t===this.numrows-2&&r===0&&this.numcols%4!==0&&this.corner2(e++),t===this.numrows-2&&r===0&&this.numcols%8===4&&this.corner3(e++),t===this.numrows+4&&r===2&&this.numcols%8===0&&this.corner4(e++);do t<this.numrows&&r>=0&&this.noBit(r,t)&&this.utah(t,r,e++),t-=2,r+=2;while(t>=0&&r<this.numcols);t++,r+=3;do t>=0&&r<this.numcols&&this.noBit(r,t)&&this.utah(t,r,e++),t+=2,r-=2;while(t<this.numrows&&r>=0);t+=3,r++}while(t<this.numrows||r<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},n.prototype.module=function(e,t,r,i){e<0&&(e+=this.numrows,t+=4-(this.numrows+4)%8),t<0&&(t+=this.numcols,e+=4-(this.numcols+4)%8);var o=this.codewords.charCodeAt(r);o&=1<<8-i,this.setBit(t,e,o!==0)},n.prototype.utah=function(e,t,r){this.module(e-2,t-2,r,1),this.module(e-2,t-1,r,2),this.module(e-1,t-2,r,3),this.module(e-1,t-1,r,4),this.module(e-1,t,r,5),this.module(e,t-2,r,6),this.module(e,t-1,r,7),this.module(e,t,r,8)},n.prototype.corner1=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,1,e,2),this.module(this.numrows-1,2,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},n.prototype.corner2=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-4,e,4),this.module(0,this.numcols-3,e,5),this.module(0,this.numcols-2,e,6),this.module(0,this.numcols-1,e,7),this.module(1,this.numcols-1,e,8)},n.prototype.corner3=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},n.prototype.corner4=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,this.numcols-1,e,2),this.module(0,this.numcols-3,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-3,e,6),this.module(1,this.numcols-2,e,7),this.module(1,this.numcols-1,e,8)},n}(),$v=wQ;var RA,MA=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],kF=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],EQ=301,IQ=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=EQ);return{LOG:n,ALOG:e}},Sf=(RA=IQ([],[]),RA.LOG),NA=RA.ALOG;var OA=129,Gv=230,FF=231,LF=235,VF=236,BF=237,UF=238,jF=239,zF=240,Wv=254,HF=254,Fu="[)>05",Lu="[)>06",Vu="",Be=0,Xt=1,dn=2,Ft=3,Ht=4,rn=5;var CQ=function(){function n(){}return n.encodeECC200=function(e,t){if(e.length!==t.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var r=new J;r.append(e);var i=t.getInterleavedBlockCount();if(i===1){var o=this.createECCBlock(e,t.getErrorCodewords());r.append(o)}else{for(var s=[],a=[],c=0;c<i;c++)s[c]=t.getDataLengthForInterleavedBlock(c+1),a[c]=t.getErrorLengthForInterleavedBlock(c+1);for(var u=0;u<i;u++){for(var l=new J,f=u;f<t.getDataCapacity();f+=i)l.append(e.charAt(f));for(var o=this.createECCBlock(l.toString(),a[u]),h=0,p=u;p<a[u]*i;p+=i)r.setCharAt(t.getDataCapacity()+p,o.charAt(h++))}}return r.toString()},n.createECCBlock=function(e,t){for(var r=-1,i=0;i<MA.length;i++)if(MA[i]===t){r=i;break}if(r<0)throw new Error("Illegal number of error correction codewords specified: "+t);for(var o=kF[r],s=[],i=0;i<t;i++)s[i]=0;for(var i=0;i<e.length;i++){for(var a=s[t-1]^e.charAt(i).charCodeAt(0),c=t-1;c>0;c--)a!==0&&o[c]!==0?s[c]=s[c-1]^NA[(Sf[a]+Sf[o[c]])%255]:s[c]=s[c-1];a!==0&&o[0]!==0?s[0]=NA[(Sf[a]+Sf[o[0]])%255]:s[0]=0}for(var u=[],i=0;i<t;i++)u[i]=s[t-i-1];return u.map(function(l){return String.fromCharCode(l)}).join("")},n}(),qv=CQ;var PA=function(){function n(){}return n.prototype.getEncodingMode=function(){return Be},n.prototype.encode=function(e){var t=pe.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=pe.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case rn:e.writeCodeword(FF),e.signalEncoderChange(rn);return;case Xt:e.writeCodeword(Gv),e.signalEncoderChange(Xt);return;case Ft:e.writeCodeword(UF),e.signalEncoderChange(Ft);break;case dn:e.writeCodeword(jF),e.signalEncoderChange(dn);break;case Ht:e.writeCodeword(zF),e.signalEncoderChange(Ht);break;default:throw new Error("Illegal mode: "+i)}else pe.isExtendedASCII(r)?(e.writeCodeword(LF),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(pe.isDigit(e)&&pe.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}();var kA=function(){function n(){}return n.prototype.getEncodingMode=function(){return rn},n.prototype.encode=function(e){var t=new J;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=pe.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Be);break}}var o=t.length()-1,s=1,a=e.getCodewordCount()+o+s;e.updateSymbolInfo(a);var c=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||c)if(o<=249)t.setCharAt(0,de.getCharAt(o));else if(o<=1555)t.setCharAt(0,de.getCharAt(Math.floor(o/250)+249)),t.insert(1,de.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var u=0,r=t.length();u<r;u++)e.writeCodeword(this.randomize255State(t.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}();var Ba=function(){function n(){}return n.prototype.getEncodingMode=function(){return Xt},n.prototype.encodeMaximal=function(e){for(var t=new J,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,o=t.length())}if(o!==t.length()){var a=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,l=Math.floor(t.length()%3);(l===2&&u!==2||l===1&&(r>3||u!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(Gv),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new J;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),o=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var a=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new J;for(t.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var u=t.length();if(u%3===0){var l=pe.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(l!==this.getEncodingMode()){e.signalEncoderChange(Be);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var o=t.length(),s=t.toString().substring(0,o-i);t.setLengthToZero(),t.append(s),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Wv)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Wv),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(Wv)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Be)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,o=new J;return o.append(r),o.append(i),o.toString()},n}();var FA=function(){function n(){}return n.prototype.getEncodingMode=function(){return Ht},n.prototype.encode=function(e){for(var t=new J;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var s=pe.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(Be);break}}}t.append(de.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,a=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),u=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}u?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(a)}finally{e.signalEncoderChange(Be)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(de.getCharAt(e-64)):pe.illegalCharacter(de.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,a=(r<<18)+(i<<12)+(o<<6)+s,c=a>>16&255,u=a>>8&255,l=a&255,f=new J;return f.append(c),t>=2&&f.append(u),t>=3&&f.append(l),f.toString()},n}();var AQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xQ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xe=function(){function n(e,t,r,i,o,s,a,c){a===void 0&&(a=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=a,this.rsBlockError=c}return n.lookup=function(e,t,r,i,o){var s,a;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var c=xQ(bQ),u=c.next();!u.done;u=c.next()){var l=u.value;if(!(t===1&&l.rectangular)&&!(t===2&&!l.rectangular)&&!(r!=null&&(l.getSymbolWidth()<r.getWidth()||l.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(l.getSymbolWidth()>i.getWidth()||l.getSymbolHeight()>i.getHeight()))&&e<=l.dataCapacity)return l}}catch(f){s={error:f}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),Bu=Xe,DQ=function(n){AQ(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(Xe),bQ=[new Xe(!1,3,5,8,8,1),new Xe(!1,5,7,10,10,1),new Xe(!0,5,7,16,6,1),new Xe(!1,8,10,12,12,1),new Xe(!0,10,11,14,6,2),new Xe(!1,12,12,14,14,1),new Xe(!0,16,14,24,10,1),new Xe(!1,18,14,16,16,1),new Xe(!1,22,18,18,18,1),new Xe(!0,22,18,16,10,2),new Xe(!1,30,20,20,20,1),new Xe(!0,32,24,16,14,2),new Xe(!1,36,24,22,22,1),new Xe(!1,44,28,24,24,1),new Xe(!0,49,28,22,14,2),new Xe(!1,62,36,14,14,4),new Xe(!1,86,42,16,16,4),new Xe(!1,114,48,18,18,4),new Xe(!1,144,56,20,20,4),new Xe(!1,174,68,22,22,4),new Xe(!1,204,84,24,24,4,102,42),new Xe(!1,280,112,14,14,16,140,56),new Xe(!1,368,144,16,16,16,92,36),new Xe(!1,456,192,18,18,16,114,48),new Xe(!1,576,224,20,20,16,144,56),new Xe(!1,696,272,22,22,16,174,68),new Xe(!1,816,336,24,24,16,136,56),new Xe(!1,1050,408,18,18,36,175,68),new Xe(!1,1304,496,20,20,36,163,62),new DQ];var LA=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(a){return a.charCodeAt(0)}),r=new J,i=0,o=t.length;i<o;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new J,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Bu.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}();var SQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VA=function(n){SQ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ft},e.prototype.encode=function(t){for(var r=new J;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(t,r);var s=pe.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(Be);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):pe.illegalCharacter(de.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=r.length();t.pos-=o,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(HF),t.getNewEncoding()<0&&t.signalEncoderChange(Be)},e}(Ba);var TQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),BA=function(n){TQ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return dn},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(Ba);var RQ=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=OA+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,o){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new Ba,a=[new PA,s,new BA,new VA,new FA,new kA],c=new LA(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(Fu)&&e.endsWith(Vu)?(c.writeCodeword(VF),c.setSkipAtEnd(2),c.pos+=Fu.length):e.startsWith(Lu)&&e.endsWith(Vu)&&(c.writeCodeword(BF),c.setSkipAtEnd(2),c.pos+=Lu.length);var u=Be;for(o&&(s.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)a[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var l=c.getCodewordCount();c.updateSymbolInfo();var f=c.getSymbolInfo().getDataCapacity();l<f&&u!==Be&&u!==rn&&u!==Ht&&c.writeCodeword("\xFE");var h=c.getCodewords();for(h.length()<f&&h.append(OA);h.length()<f;)h.append(this.randomize253State(h.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===Ft&&i===Ft){for(var o=Math.min(t+3,e.length),s=t;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return Be}else if(r===Ht&&i===Ht){for(var o=Math.min(t+4,e.length),s=t;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return Be}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===Be?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,s=new Uint8Array(6),a=[];;){if(t+o===e.length){qe.fill(s,0),qe.fill(a,0);var c=this.findMinimums(i,a,ie.MAX_VALUE,s),u=this.getMinimumCount(s);if(a[Be]===c)return Be;if(u===1){if(s[rn]>0)return rn;if(s[Ht]>0)return Ht;if(s[dn]>0)return dn;if(s[Ft]>0)return Ft}return Xt}var l=e.charCodeAt(t+o);if(o++,this.isDigit(l)?i[Be]+=.5:this.isExtendedASCII(l)?(i[Be]=Math.ceil(i[Be]),i[Be]+=2):(i[Be]=Math.ceil(i[Be]),i[Be]++),this.isNativeC40(l)?i[Xt]+=2/3:this.isExtendedASCII(l)?i[Xt]+=8/3:i[Xt]+=4/3,this.isNativeText(l)?i[dn]+=2/3:this.isExtendedASCII(l)?i[dn]+=8/3:i[dn]+=4/3,this.isNativeX12(l)?i[Ft]+=2/3:this.isExtendedASCII(l)?i[Ft]+=13/3:i[Ft]+=10/3,this.isNativeEDIFACT(l)?i[Ht]+=3/4:this.isExtendedASCII(l)?i[Ht]+=17/4:i[Ht]+=13/4,this.isSpecialB256(l)?i[rn]+=4:i[rn]++,o>=4){if(qe.fill(s,0),qe.fill(a,0),this.findMinimums(i,a,ie.MAX_VALUE,s),a[Be]<this.min(a[rn],a[Xt],a[dn],a[Ft],a[Ht]))return Be;if(a[rn]<a[Be]||a[rn]+1<this.min(a[Xt],a[dn],a[Ft],a[Ht]))return rn;if(a[Ht]+1<this.min(a[rn],a[Xt],a[dn],a[Ft],a[Be]))return Ht;if(a[dn]+1<this.min(a[rn],a[Xt],a[Ht],a[Ft],a[Be]))return dn;if(a[Ft]+1<this.min(a[rn],a[Xt],a[Ht],a[dn],a[Be]))return Ft;if(a[Xt]+1<this.min(a[Be],a[rn],a[Ht],a[dn])){if(a[Xt]<a[Ft])return Xt;if(a[Xt]===a[Ft]){for(var f=t+o+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return Ft;if(!this.isNativeX12(h))break;f++}return Xt}}}}},n.min=function(e,t,r,i,o){var s=Math.min(e,Math.min(t,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},n.findMinimums=function(e,t,r,i){for(var o=0;o<6;o++){var s=t[o]=Math.ceil(e[o]);r>s&&(r=s,qe.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=ie.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),pe=RQ;var UA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$F=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return nn.encode(e,this.charset)!=null}catch{return!1}},n}(),GF=function(){function n(e,t,r){var i,o,s,a,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(D){return new $F(Va.forName(D))}),this.encoders=[];var l=[];l.push(new $F(bf.ISO_8859_1));for(var f=t!=null&&t.name.startsWith("UTF"),h=0;h<e.length;h++){var p=!1;try{for(var m=(i=void 0,UA(l)),y=m.next();!y.done;y=m.next()){var _=y.value,A=e.charAt(h),b=A.charCodeAt(0);if(b===r||_.canEncode(A)){p=!0;break}}}catch(D){i={error:D}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}if(!p)try{for(var R=(s=void 0,UA(this.ENCODERS)),O=R.next();!O.done;O=R.next()){var _=O.value;if(_.canEncode(e.charAt(h))){l.push(_),p=!0;break}}}catch(D){s={error:D}}finally{try{O&&!O.done&&(a=R.return)&&a.call(R)}finally{if(s)throw s.error}}p||(f=!0)}if(l.length===1&&!f)this.encoders=[l[0]];else{this.encoders=[];var V=0;try{for(var B=UA(l),x=B.next();!x.done;x=B.next()){var _=x.value;this.encoders[V++]=_}}catch(D){c={error:D}}finally{try{x&&!x.done&&(u=B.return)&&u.call(B)}finally{if(c)throw c.error}}}var E=-1;if(t!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&t.name===this.encoders[h].name){E=h;break}}this.priorityEncoderIndex=E}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return nn.encode(de.getCharAt(e),this.encoders[t].name)},n}();var MQ=3,qF=function(){function n(e,t,r){this.fnc1=r;var i=new GF(e,t,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new J,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,o,s){var a=e.charAt(i).charCodeAt(0),c=0,u=t.length();t.getPriorityEncoderIndex()>=0&&(a===s||t.canEncode(a,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),u=c+1);for(var l=c;l<u;l++)(a===s||t.canEncode(a,l))&&this.addEdge(r,i+1,new WF(a,t,l,o,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,o=new WF[i+1][t.length()];this.addEdges(e,t,o,0,null,r);for(var s=1;s<=i;s++){for(var a=0;a<t.length();a++)o[s][a]!=null&&s<i&&this.addEdges(e,t,o,s,o[s][a],r);for(var a=0;a<t.length();a++)o[s-1][a]=null}for(var c=-1,u=ie.MAX_VALUE,a=0;a<t.length();a++)if(o[i][a]!=null){var l=o[i][a];l.cachedTotalSize<u&&(u=l.cachedTotalSize,c=a)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=o[i][c];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var p=t.encode(h.c,h.encoderIndex),s=p.length-1;s>=0;s--)f.unshift(p[s]&255);var m=h.previous===null?0:h.previous.encoderIndex;m!==h.encoderIndex&&f.unshift(256+t.getECIValue(h.encoderIndex)),h=h.previous}for(var y=[],s=0;s<y.length;s++)y[s]=f[s];return y},n}();var WF=function(){function n(e,t,r,i,o){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,a=i===null?0:i.encoderIndex;a!==r&&(s+=MQ),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n}();var NQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tf=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OQ=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},PQ=function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(OQ(arguments[e]));return n},Z=function(n){return n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256",n}(Z||{}),kQ=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Nn=function(){function n(){}return n.isExtendedASCII=function(e,t){return e!==t&&e>=128&&e<=255},n.isInC40Shift1Set=function(e){return e<=31},n.isInC40Shift2Set=function(e,t){var r,i;try{for(var o=Tf(kQ),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.charCodeAt(0)===e)return!0}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return e===t},n.isInTextShift1Set=function(e){return this.isInC40Shift1Set(e)},n.isInTextShift2Set=function(e,t){return this.isInC40Shift2Set(e,t)},n.encodeHighLevel=function(e,t,r,i){t===void 0&&(t=null),r===void 0&&(r=-1),i===void 0&&(i=0);var o=0;return e.startsWith(Fu)&&e.endsWith(Vu)?(o=5,e=e.substring(Fu.length,e.length-2)):e.startsWith(Lu)&&e.endsWith(Vu)&&(o=6,e=e.substring(Lu.length,e.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,PQ(this.encode(e,t,r,i,o)))))},n.encode=function(e,t,r,i,o){return this.encodeMinimally(new LQ(e,t,r,i,o)).getBytes()},n.addEdge=function(e,t){var r=t.fromPosition+t.characterLength;(e[r][t.getEndMode()]===null||e[r][t.getEndMode()].cachedTotalSize>t.cachedTotalSize)&&(e[r][t.getEndMode()]=t)},n.getNumberOfC40Words=function(e,t,r,i){for(var o=0,s=t;s<e.length();s++){if(e.isECI(s))return i[0]=0,0;var a=e.charAt(s);if(r&&pe.isNativeC40(a)||!r&&pe.isNativeText(a))o++;else if(!n.isExtendedASCII(a,e.getFNC1Character()))o+=2;else{var c=a&255;c>=128&&(r&&pe.isNativeC40(c-128)||!r&&pe.isNativeText(c-128))?o+=3:o+=4}if(o%3===0||(o-2)%3===0&&s+1===e.length())return i[0]=s-t+1,Math.ceil(o/3)}return i[0]=0,0},n.addEdges=function(e,t,r,i){var o,s;if(e.isECI(r)){this.addEdge(t,new Ur(e,Z.ASCII,r,1,i));return}var a=e.charAt(r);if(i===null||i.getEndMode()!==Z.EDF){pe.isDigit(a)&&e.haveNCharacters(r,2)&&pe.isDigit(e.charAt(r+1))?this.addEdge(t,new Ur(e,Z.ASCII,r,2,i)):this.addEdge(t,new Ur(e,Z.ASCII,r,1,i));var c=[Z.C40,Z.TEXT];try{for(var u=Tf(c),l=u.next();!l.done;l=u.next()){var f=l.value,h=[];n.getNumberOfC40Words(e,r,f===Z.C40,h)>0&&this.addEdge(t,new Ur(e,f,r,h[0],i))}}catch(y){o={error:y}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}e.haveNCharacters(r,3)&&pe.isNativeX12(e.charAt(r))&&pe.isNativeX12(e.charAt(r+1))&&pe.isNativeX12(e.charAt(r+2))&&this.addEdge(t,new Ur(e,Z.X12,r,3,i)),this.addEdge(t,new Ur(e,Z.B256,r,1,i))}var p;for(p=0;p<3;p++){var m=r+p;if(e.haveNCharacters(m,1)&&pe.isNativeEDIFACT(e.charAt(m)))this.addEdge(t,new Ur(e,Z.EDF,r,p+1,i));else break}p===3&&e.haveNCharacters(r,4)&&pe.isNativeEDIFACT(e.charAt(r+3))&&this.addEdge(t,new Ur(e,Z.EDF,r,4,i))},n.encodeMinimally=function(e){var t=e.length(),r=Array(t+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(e,r,0,null);for(var i=1;i<=t;i++){for(var o=0;o<6;o++)r[i][o]!==null&&i<t&&this.addEdges(e,r,i,r[i][o]);for(var o=0;o<6;o++)r[i-1][o]=null}for(var s=-1,a=ie.MAX_VALUE,o=0;o<6;o++)if(r[t][o]!==null){var c=r[t][o],u=o>=1&&o<=3?c.cachedTotalSize+1:c.cachedTotalSize;u<a&&(a=u,s=o)}if(s<0)throw new Error('Failed to encode "'+e+'"');return new FQ(r[t][s])},n}();var FQ=function(){function n(e){var t=e.input,r=0,i=[],o=[],s=[];(e.mode===Z.C40||e.mode===Z.TEXT||e.mode===Z.X12)&&e.getEndMode()!==Z.ASCII&&(r+=this.prepend(Ur.getBytes(254),i));for(var a=e;a!==null;)r+=this.prepend(a.getDataBytes(),i),(a.previous===null||a.getPreviousStartMode()!==a.getMode())&&(a.getMode()===Z.B256&&(r<=249?(i.unshift(r),r++):(i.unshift(r%250),i.unshift(r/250+249),r+=2),o.push(i.length),s.push(r)),this.prepend(a.getLatchBytes(),i),r=0),a=a.previous;t.getMacroId()===5?r+=this.prepend(Ur.getBytes(236),i):t.getMacroId()===6&&(r+=this.prepend(Ur.getBytes(237),i)),t.getFNC1Character()>0&&(r+=this.prepend(Ur.getBytes(232),i));for(var c=0;c<o.length;c++)this.applyRandomPattern(i,i.length-o[c],s[c]);var u=e.getMinSymbolSize(i.length);for(i.length<u&&i.push(129);i.length<u;)i.push(this.randomize253State(i.length+1));this.bytes=new Uint8Array(i.length);for(var c=0;c<this.bytes.length;c++)this.bytes[c]=i[c]}return n.prototype.prepend=function(e,t){for(var r=e.length-1;r>=0;r--)t.unshift(e[r]);return e.length},n.prototype.randomize253State=function(e){var t=149*e%253+1,r=129+t;return r<=254?r:r-254},n.prototype.applyRandomPattern=function(e,t,r){for(var i=0;i<r;i++){var o=t+i,s=e[o]&255,a=149*(o+1)%255+1,c=s+a;e[o]=c<=255?c:c-256}},n.prototype.getBytes=function(){return this.bytes},n}(),Ur=function(){function n(e,t,r,i,o){if(this.input=e,this.mode=t,this.fromPosition=r,this.characterLength=i,this.previous=o,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(r+i<=e.length()))throw new Error("Invalid edge");var s=o!==null?o.cachedTotalSize:0,a=this.getPreviousMode();switch(t){case Z.ASCII:s++,(e.isECI(r)||Nn.isExtendedASCII(e.charAt(r),e.getFNC1Character()))&&s++,(a===Z.C40||a===Z.TEXT||a===Z.X12)&&s++;break;case Z.B256:s++,(a!==Z.B256||this.getB256Size()===250)&&s++,a===Z.ASCII?s++:(a===Z.C40||a===Z.TEXT||a===Z.X12)&&(s+=2);break;case Z.C40:case Z.TEXT:case Z.X12:if(t===Z.X12)s+=2;else{var c=[];s+=Nn.getNumberOfC40Words(e,r,t===Z.C40,c)*2}a===Z.ASCII||a===Z.B256?s++:a!==t&&(a===Z.C40||a===Z.TEXT||a===Z.X12)&&(s+=2);break;case Z.EDF:s+=3,a===Z.ASCII||a===Z.B256?s++:(a===Z.C40||a===Z.TEXT||a===Z.X12)&&(s+=2);break}this.cachedTotalSize=s}return n.prototype.getB256Size=function(){for(var e=0,t=this;t!==null&&t.mode===Z.B256&&e<=250;)e++,t=t.previous;return e},n.prototype.getPreviousStartMode=function(){return this.previous===null?Z.ASCII:this.previous.mode},n.prototype.getPreviousMode=function(){return this.previous===null?Z.ASCII:this.previous.getEndMode()},n.prototype.getEndMode=function(){if(this.mode===Z.EDF){if(this.characterLength<4)return Z.ASCII;var e=this.getLastASCII();if(e>0&&this.getCodewordsRemaining(this.cachedTotalSize+e)<=2-e)return Z.ASCII}if(this.mode===Z.C40||this.mode===Z.TEXT||this.mode===Z.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&this.getCodewordsRemaining(this.cachedTotalSize)===0)return Z.ASCII;var e=this.getLastASCII();if(e===1&&this.getCodewordsRemaining(this.cachedTotalSize+1)===0)return Z.ASCII}return this.mode},n.prototype.getMode=function(){return this.mode},n.prototype.getLastASCII=function(){var e=this.input.length(),t=this.fromPosition+this.characterLength;return e-t>4||t>=e?0:e-t===1?Nn.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?0:1:e-t===2?Nn.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())||Nn.isExtendedASCII(this.input.charAt(t+1),this.input.getFNC1Character())?0:pe.isDigit(this.input.charAt(t))&&pe.isDigit(this.input.charAt(t+1))?1:2:e-t===3?pe.isDigit(this.input.charAt(t))&&pe.isDigit(this.input.charAt(t+1))&&!Nn.isExtendedASCII(this.input.charAt(t+2),this.input.getFNC1Character())||pe.isDigit(this.input.charAt(t+1))&&pe.isDigit(this.input.charAt(t+2))&&!Nn.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?2:0:pe.isDigit(this.input.charAt(t))&&pe.isDigit(this.input.charAt(t+1))&&pe.isDigit(this.input.charAt(t+2))&&pe.isDigit(this.input.charAt(t+3))?2:0},n.prototype.getMinSymbolSize=function(e){var t,r,i,o,s,a;switch(this.input.getShapeHint()){case 1:try{for(var c=Tf(this.squareCodewordCapacities),u=c.next();!u.done;u=c.next()){var l=u.value;if(l>=e)return l}}catch(y){t={error:y}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}break;case 2:try{for(var f=Tf(this.rectangularCodewordCapacities),h=f.next();!h.done;h=f.next()){var l=h.value;if(l>=e)return l}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}break}try{for(var p=Tf(this.allCodewordCapacities),m=p.next();!m.done;m=p.next()){var l=m.value;if(l>=e)return l}}catch(y){s={error:y}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(s)throw s.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},n.prototype.getCodewordsRemaining=function(e){return this.getMinSymbolSize(e)-e},n.getBytes=function(e,t){var r=new Uint8Array(t?2:1);return r[0]=e,t&&(r[1]=t),r},n.prototype.setC40Word=function(e,t,r,i,o){var s=1600*(r&255)+40*(i&255)+(o&255)+1;e[t]=s/256,e[t+1]=s%256},n.prototype.getX12Value=function(e){return e===13?0:e===42?1:e===62?2:e===32?3:e>=48&&e<=57?e-44:e>=65&&e<=90?e-51:e},n.prototype.getX12Words=function(){if(this.characterLength%3!==0)throw new Error("X12 words must be a multiple of 3");for(var e=new Uint8Array(this.characterLength/3*2),t=0;t<e.length;t+=2)this.setC40Word(e,t,this.getX12Value(this.input.charAt(this.fromPosition+t/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+2)));return e},n.prototype.getShiftValue=function(e,t,r){return t&&Nn.isInC40Shift1Set(e)||!t&&Nn.isInTextShift1Set(e)?0:t&&Nn.isInC40Shift2Set(e,r)||!t&&Nn.isInTextShift2Set(e,r)?1:2},n.prototype.getC40Value=function(e,t,r,i){if(r===i){if(t!==2)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return e?r<=31?r:r===32?3:r<=47?r-33:r<=57?r-44:r<=64?r-43:r<=90?r-51:r<=95?r-69:r<=127?r-96:r:r===0?0:t===0&&r<=3?r-1:t===1&&r<=31?r:r===32?3:r>=33&&r<=47?r-33:r>=48&&r<=57?r-44:r>=58&&r<=64?r-43:r>=65&&r<=90?r-64:r>=91&&r<=95?r-69:r===96?0:r>=97&&r<=122?r-83:r>=123&&r<=127?r-96:r},n.prototype.getC40Words=function(e,t){for(var r=[],i=0;i<this.characterLength;i++){var o=this.input.charAt(this.fromPosition+i);if(e&&pe.isNativeC40(o)||!e&&pe.isNativeText(o))r.push(this.getC40Value(e,0,o,t));else if(Nn.isExtendedASCII(o,t)){var a=(o&255)-128;if(e&&pe.isNativeC40(a)||!e&&pe.isNativeText(a))r.push(1),r.push(30),r.push(this.getC40Value(e,0,a,t));else{r.push(1),r.push(30);var s=this.getShiftValue(a,e,t);r.push(s),r.push(this.getC40Value(e,s,a,t))}}else{var s=this.getShiftValue(o,e,t);r.push(s),r.push(this.getC40Value(e,s,o,t))}}if(r.length%3!==0){if(!((r.length-2)%3===0&&this.fromPosition+this.characterLength===this.input.length()))throw new Error("C40 words must be a multiple of 3");r.push(0)}for(var c=new Uint8Array(r.length/3*2),u=0,i=0;i<r.length;i+=3)this.setC40Word(c,u,r[i]&255,r[i+1]&255,r[i+2]&255),u+=2;return c},n.prototype.getEDFBytes=function(){for(var e=Math.ceil(this.characterLength/4),t=new Uint8Array(e*3),r=this.fromPosition,i=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),o=0;o<e;o+=3){for(var s=[],a=0;a<4;a++)r<=i?s[a]=this.input.charAt(r++)&63:s[a]=r===i+1?31:0;var c=s[0]<<18;c|=s[1]<<12,c|=s[2]<<6,c|=s[3],t[o]=c>>16&255,t[o+1]=c>>8&255,t[o+2]=c&255}return t},n.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case Z.ASCII:case Z.B256:switch(this.mode){case Z.B256:return n.getBytes(231);case Z.C40:return n.getBytes(230);case Z.TEXT:return n.getBytes(239);case Z.X12:return n.getBytes(238);case Z.EDF:return n.getBytes(240)}break;case Z.C40:case Z.TEXT:case Z.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case Z.ASCII:return n.getBytes(254);case Z.B256:return n.getBytes(254,231);case Z.C40:return n.getBytes(254,230);case Z.TEXT:return n.getBytes(254,239);case Z.X12:return n.getBytes(254,238);case Z.EDF:return n.getBytes(254,240)}break;case Z.EDF:if(this.mode!==Z.EDF)throw new Error("Cannot switch from EDF to "+this.mode);break}return new Uint8Array(0)},n.prototype.getDataBytes=function(){switch(this.mode){case Z.ASCII:return this.input.isECI(this.fromPosition)?n.getBytes(241,this.input.getECIValue(this.fromPosition)+1):Nn.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?n.getBytes(235,this.input.charAt(this.fromPosition)-127):this.characterLength===2?n.getBytes(this.input.charAt(this.fromPosition)*10+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?n.getBytes(232):n.getBytes(this.input.charAt(this.fromPosition)+1);case Z.B256:return n.getBytes(this.input.charAt(this.fromPosition));case Z.C40:return this.getC40Words(!0,this.input.getFNC1Character());case Z.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case Z.X12:return this.getX12Words();case Z.EDF:return this.getEDFBytes()}},n}(),LQ=function(n){NQ(e,n);function e(t,r,i,o,s){var a=n.call(this,t,r,i)||this;return a.shape=o,a.macroId=s,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e}(qF);var ZSe=function(){function n(){}return n.prototype.encode=function(e,t,r,i,o){if(o===void 0&&(o=null),e.trim()==="")throw new Error("Found empty contents");if(t!==G.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+t);if(r<0||i<0)throw new Error("Requested dimensions can't be negative: "+r+"x"+i);var s=0,a=null,c=null;if(o!=null){var u=o.get(me.DATA_MATRIX_SHAPE);u!=null&&(s=u);var l=o.get(me.MIN_SIZE);l!=null&&(a=l);var f=o.get(me.MAX_SIZE);f!=null&&(c=f)}var h,p=o!=null&&o.has(me.DATA_MATRIX_COMPACT)&&!!o.get(me.DATA_MATRIX_COMPACT).toString();if(p){var m=o.has(me.GS1_FORMAT)&&!!o.get(me.GS1_FORMAT).toString(),y=null,_=o.has(me.CHARACTER_SET);_&&(y=Va.forName(o.get(me.CHARACTER_SET).toString())),h=Nn.encodeHighLevel(e,y,m?29:-1,s)}else{var A=o!=null&&o.has(me.FORCE_C40)&&!!o.get(me.FORCE_C40).toString();h=pe.encodeHighLevel(e,s,a,c,A)}var b=Bu.lookup(h.length,s,a,c,!0),R=qv.encodeECC200(h,b),O=new $v(R,b.getSymbolDataWidth(),b.getSymbolDataHeight());return O.place(),this.encodeLowLevel(O,b,r,i)},n.prototype.encodeLowLevel=function(e,t,r,i){for(var o=t.getSymbolDataWidth(),s=t.getSymbolDataHeight(),a=new Df(t.getSymbolWidth(),t.getSymbolHeight()),c=0,u=0;u<s;u++){var l=void 0;if(u%t.matrixHeight===0){l=0;for(var f=0;f<t.getSymbolWidth();f++)a.setBoolean(l,c,f%2===0),l++;c++}l=0;for(var f=0;f<o;f++)f%t.matrixWidth===0&&(a.setBoolean(l,c,!0),l++),a.setBoolean(l,c,e.getBit(f,u)),l++,f%t.matrixWidth===t.matrixWidth-1&&(a.setBoolean(l,c,u%2===0),l++);if(c++,u%t.matrixHeight===t.matrixHeight-1){l=0;for(var f=0;f<t.getSymbolWidth();f++)a.setBoolean(l,c,!0),l++;c++}}return this.convertByteMatrixToBitMatrix(a,r,i)},n.prototype.convertByteMatrixToBitMatrix=function(e,t,r){var i=e.getWidth(),o=e.getHeight(),s=Math.max(t,i),a=Math.max(r,o),c=Math.min(s/i,a/o),u=(s-i*c)/2,l=(a-o*c)/2,f;r<o||t<i?(u=0,l=0,f=new dt(i,o)):f=new dt(t,r),f.clear();for(var h=0,p=l;h<o;h++,p+=c)for(var m=0,y=u;m<i;m++,y+=c)e.get(m,h)===1&&f.setRegion(y,p,c,c);return f},n}();var VQ=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),jA=VQ;var BQ=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),zA=BQ;var UQ=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),KF=UQ;var jQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zQ=function(n){jQ(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+ie.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(KF),Uu=zQ;var HQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$Q=function(n){HQ(e,n);function e(t,r,i){var o=n.call(this,t,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Uu),ZF=$Q;function XF(n,e,t){return new ZF(n,e,t)}function ju(n,e,t){return new Uu(n,e,t)}var YF=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],di=0,zu=1,On=2,Kv=3,cr=4,QF=new Uu(null,0,0);var Xv=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];var qQ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function KQ(n){var e,t;try{for(var r=qQ(n),i=r.next();!i.done;i=r.next()){var o=i.value;qe.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[di][cr]=0,n[zu][cr]=0,n[zu][di]=28,n[Kv][cr]=0,n[On][cr]=0,n[On][di]=15,n}var Yv=KQ(qe.createInt32Array(6,6));var ZQ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XQ=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=Xv[this.mode][e];i=ju(i,o&65535,o>>16),r+=o>>16}var s=e===On?4:5;return i=ju(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===On?4:5;return r=ju(r,Yv[this.mode][e],i),r=ju(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===cr||this.mode===On){var o=Xv[r][di];t=ju(t,o&65535,o>>16),i+=o>>16,r=di}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new n(t,r,this.binaryShiftByteCount+1,i+s);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=XF(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Xv[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new ut;try{for(var a=ZQ(i),c=a.next();!c.done;c=a.next()){var u=c.value;u.appendTo(s,e)}}catch(l){t={error:l}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return de.format("%s bits=%d bytes=%d",YF[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(QF,di,0,0),n}(),e3=XQ;function YQ(n){var e=de.getCharCode(" "),t=de.getCharCode("."),r=de.getCharCode(",");n[di][e]=1;for(var i=de.getCharCode("Z"),o=de.getCharCode("A"),s=o;s<=i;s++)n[di][s]=s-o+2;n[zu][e]=1;for(var a=de.getCharCode("z"),c=de.getCharCode("a"),s=c;s<=a;s++)n[zu][s]=s-c+2;n[On][e]=1;for(var u=de.getCharCode("9"),l=de.getCharCode("0"),s=l;s<=u;s++)n[On][s]=s-l+2;n[On][r]=12,n[On][t]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"],h=0;h<f.length;h++)n[Kv][de.getCharCode(f[h])]=h;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<p.length;h++)de.getCharCode(p[h])>0&&(n[cr][de.getCharCode(p[h])]=h);return n}var Qv=YQ(qe.createInt32Array(5,256));var Jv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JQ=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=de.getCharCode(" "),t=de.getCharCode(`
`),r=zA.singletonList(e3.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case de.getCharCode("\r"):o=s===t?2:0;break;case de.getCharCode("."):o=s===e?3:0;break;case de.getCharCode(","):o=s===e?4:0;break;case de.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(r=n.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var a=zA.min(r,function(c,u){return c.getBitCount()-u.getBitCount()});return a.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,o=[];try{for(var s=Jv(e),a=s.next();!a.done;a=s.next()){var c=a.value;this.updateStateForChar(c,t,o)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(o)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,o=Qv[e.getMode()][i]>0,s=null,a=0;a<=cr;a++){var c=Qv[a][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!o||a===e.getMode()||a===On){var u=s.latchAndAppend(a,c);r.push(u)}if(!o&&Yv[e.getMode()][a]>=0){var l=s.shiftAndAppend(a,c);r.push(l)}}}if(e.getBinaryShiftByteCount()>0||Qv[e.getMode()][i]===0){var f=e.addBinaryShiftChar(t);r.push(f)}},n.updateStateListForPair=function(e,t,r){var i,o,s=[];try{for(var a=Jv(e),c=a.next();!c.done;c=a.next()){var u=c.value;this.updateStateForPair(u,t,r,s)}}catch(l){i={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(cr,r)),e.getMode()!==cr&&i.push(o.shiftAndAppend(cr,r)),r===3||r===4){var s=o.latchAndAppend(On,16-r).latchAndAppend(On,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(a)}},n.simplifyStates=function(e){var t,r,i,o,s=[];try{for(var a=Jv(e),c=a.next();!c.done;c=a.next()){var u=c.value,l=!0,f=function(_){if(_.isBetterThanOrEqualTo(u))return l=!1,"break";u.isBetterThanOrEqualTo(_)&&(s=s.filter(function(A){return A!==_}))};try{for(var h=(i=void 0,Jv(s)),p=h.next();!p.done;p=h.next()){var m=p.value,y=f(m);if(y==="break")break}}catch(_){i={error:_}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}l&&s.push(u)}}catch(_){t={error:_}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},n}(),HA=JQ;var eJ=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tJ=function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new HA(e).encode(),o=ie.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+o,a,c,u,l,f;if(r!==n.DEFAULT_AZTEC_LAYERS){if(a=r<0,c=Math.abs(r),c>(a?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new $(de.format("Illegal value %s for layers",r));u=n.totalBitsInLayer(c,a),l=n.WORD_SIZE[c];var h=u-u%l;if(f=n.stuffBits(i,l),f.getSize()+o>h)throw new $("Data to large for user specified layer");if(a&&f.getSize()>l*64)throw new $("Data to large for user specified layer")}else{l=0,f=null;for(var p=0;;p++){if(p>n.MAX_NB_BITS)throw new $("Data too large for an Aztec code");if(a=p<=3,c=a?p+1:p,u=n.totalBitsInLayer(c,a),!(s>u)){(f==null||l!==n.WORD_SIZE[c])&&(l=n.WORD_SIZE[c],f=n.stuffBits(i,l));var h=u-u%l;if(!(a&&f.getSize()>l*64)&&f.getSize()+o<=h)break}}}var m=n.generateCheckWords(f,u,l),y=f.getSize()/l,_=n.generateModeMessage(a,c,y),A=(a?11:14)+c*4,b=new Int32Array(A),R;if(a){R=A;for(var p=0;p<b.length;p++)b[p]=p}else{R=A+1+2*ie.truncDivision(ie.truncDivision(A,2)-1,15);for(var O=ie.truncDivision(A,2),V=ie.truncDivision(R,2),p=0;p<O;p++){var B=p+ie.truncDivision(p,15);b[O-p-1]=V-B-1,b[O+p]=V+B+1}}for(var x=new dt(R),p=0,E=0;p<c;p++){for(var D=(c-p)*4+(a?9:12),T=0;T<D;T++)for(var M=T*2,N=0;N<2;N++)m.get(E+M+N)&&x.set(b[p*2+N],b[p*2+T]),m.get(E+D*2+M+N)&&x.set(b[p*2+T],b[A-1-p*2-N]),m.get(E+D*4+M+N)&&x.set(b[A-1-p*2-N],b[A-1-p*2-T]),m.get(E+D*6+M+N)&&x.set(b[A-1-p*2-T],b[p*2+N]);E+=D*8}if(n.drawModeMessage(x,a,R,_),a)n.drawBullsEye(x,ie.truncDivision(R,2),5);else{n.drawBullsEye(x,ie.truncDivision(R,2),7);for(var p=0,T=0;p<ie.truncDivision(A,2)-1;p+=15,T+=16)for(var N=ie.truncDivision(R,2)&1;N<R;N+=2)x.set(ie.truncDivision(R,2)-T,N),x.set(ie.truncDivision(R,2)+T,N),x.set(N,ie.truncDivision(R,2)-T),x.set(N,ie.truncDivision(R,2)+T)}var S=new jA;return S.setCompact(a),S.setSize(R),S.setLayers(c),S.setCodeWords(y),S.setMatrix(x),S},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new ut;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var o=ie.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var a=o-3+s;i.get(s)&&e.set(a,o-5),i.get(s+7)&&e.set(o+5,a),i.get(20-s)&&e.set(a,o+5),i.get(27-s)&&e.set(o-5,a)}else for(var s=0;s<10;s++){var a=o-5+s+ie.truncDivision(s,5);i.get(s)&&e.set(a,o-7),i.get(s+10)&&e.set(o+7,a),i.get(29-s)&&e.set(a,o+7),i.get(39-s)&&e.set(o-7,a)}},n.generateCheckWords=function(e,t,r){var i,o,s=e.getSize()/r,a=new xf(n.getGF(r)),c=ie.truncDivision(t,r),u=n.bitsToWords(e,r,c);a.encode(u,c-s);var l=t%r,f=new ut;f.appendBits(0,l);try{for(var h=eJ(Array.from(u)),p=h.next();!p.done;p=h.next()){var m=p.value;f.appendBits(m,r)}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}return f},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),o,s;for(o=0,s=e.getSize()/t;o<s;o++){for(var a=0,c=0;c<t;c++)a|=e.get(o*t+c)?1<<t-c-1:0;i[o]=a}return i},n.getGF=function(e){switch(e){case 4:return kt.AZTEC_PARAM;case 6:return kt.AZTEC_DATA_6;case 8:return kt.AZTEC_DATA_8;case 10:return kt.AZTEC_DATA_10;case 12:return kt.AZTEC_DATA_12;default:throw new $("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new ut,i=e.getSize(),o=(1<<t)-2,s=0;s<i;s+=t){for(var a=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(a|=1<<t-1-c);(a&o)===o?(r.appendBits(a&o,t),s--):(a&o)===0?(r.appendBits(a|1,t),s--):r.appendBits(a,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n}(),Rf=tJ;var VTe=function(){function n(){}return n.prototype.encode=function(e,t,r,i){return this.encodeWithHints(e,t,r,i,null)},n.prototype.encodeWithHints=function(e,t,r,i,o){var s=bf.ISO_8859_1,a=Rf.DEFAULT_EC_PERCENT,c=Rf.DEFAULT_AZTEC_LAYERS;return o!=null&&(o.has(me.CHARACTER_SET)&&(s=Va.forName(o.get(me.CHARACTER_SET).toString())),o.has(me.ERROR_CORRECTION)&&(a=ie.parseInt(o.get(me.ERROR_CORRECTION).toString())),o.has(me.AZTEC_LAYERS)&&(c=ie.parseInt(o.get(me.AZTEC_LAYERS).toString()))),n.encodeLayers(e,t,r,i,s,a,c)},n.encodeLayers=function(e,t,r,i,o,s,a){if(t!==G.AZTEC)throw new $("Can only encode AZTEC, but got "+t);var c=Rf.encode(de.getBytes(e,o),s,a);return n.renderResult(c,r,i)},n.renderResult=function(e,t,r){var i=e.getMatrix();if(i==null)throw new zt;for(var o=i.getWidth(),s=i.getHeight(),a=Math.max(t,o),c=Math.max(r,s),u=Math.min(a/o,c/s),l=(a-o*u)/2,f=(c-s*u)/2,h=new dt(a,c),p=0,m=f;p<s;p++,m+=u)for(var y=0,_=l;y<o;y++,_+=u)i.get(y,p)&&h.setRegion(_,m,u,u);return h},n}();var nJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),t3=function(n){nJ(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var o=new Uint8ClampedArray(r*i),s=0,a=0,c=t.length;s<c;s+=4,a++){var u=void 0,l=t[s+3];if(l===0)u=255;else{var f=t[s],h=t[s+1],p=t[s+2];u=306*f+601*h+117*p+512>>10}o[a]=u}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new $("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new Co(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*s),c=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*s);r.width=a,r.height=c;var u=r.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(a/2,c/2),u.rotate(i),u.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(ci);function $A(){return typeof navigator<"u"}function rJ(){return $A()&&!!navigator.mediaDevices}function n3(){return!!(rJ()&&navigator.mediaDevices.enumerateDevices)}var Hu=function(){return Hu=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Hu.apply(this,arguments)},St=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})},Tt=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(l){u=[6,l],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},GA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iJ={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},fn=function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=Hu(Hu({},iJ),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(le.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return St(this,void 0,void 0,function(){return Tt(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var o=GA(i),s=o.next();!s.done;s=o.next()){var a=s.value;if(n.mediaStreamIsTorchCompatibleTrack(a))return!0}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new wt("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new wt("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new t3(e),r=new hf(t);return new ff(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new wt("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,o=r.height;return t.style.width=i+"px",t.style.height=o+"px",t.width=i,t.height=o,t},n.tryPlayVideo=function(e){return St(this,void 0,void 0,function(){var t;return Tt(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return St(this,void 0,void 0,function(){var e,t,r,i,o,s,a,c,u,l,f,h;return Tt(this,function(p){switch(p.label){case 0:if(!$A())throw new Error("Can't enumerate devices, navigator is not present.");if(!n3())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),t=[];try{for(r=GA(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device ".concat(t.length+1),u=o.groupId,l={deviceId:a,label:c,kind:s,groupId:u},t.push(l))}catch(m){f={error:m}}finally{try{i&&!i.done&&(h=r.return)&&h.call(r)}finally{if(f)throw f.error}}return[2,t]}})})},n.findDeviceById=function(e){return St(this,void 0,void 0,function(){var t;return Tt(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return St(this,void 0,void 0,function(){var r;return Tt(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(o,s){var a=setTimeout(function(){n.isVideoPlaying(e)||(s(!1),e.removeEventListener("canplay",c))},t),c=function(){n.tryPlayVideo(e).then(function(u){clearTimeout(a),e.removeEventListener("canplay",c),o(u)})};e.addEventListener("canplay",c)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),St(this,void 0,void 0,function(){var i;return Tt(this,function(o){switch(o.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return o.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,o=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",s),r())},i),s=function(){clearTimeout(o),e.removeEventListener("load",s),t()};e.addEventListener("load",s)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new wt("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return St(this,void 0,void 0,function(){var t;return Tt(this,function(r){switch(r.label){case 0:if(!e)throw new wt("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return St(this,void 0,void 0,function(){var t;return Tt(this,function(r){switch(r.label){case 0:if(!e)throw new wt("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return St(this,void 0,void 0,function(){var i,o;return Tt(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,s.sent()];case 4:throw o=s.sent(),n.disposeMediaStream(i),o;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return St(this,void 0,void 0,function(){var i,o,s,a,c,u,l,f,h,p=this;return Tt(this,function(m){switch(m.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return o=m.sent(),s=function(){n.disposeMediaStream(e),n.cleanVideoSource(o)},a=this.scan(o,r,s),c=e.getVideoTracks(),u=Hu(Hu({},a),{stop:function(){a.stop()},streamVideoConstraintsApply:function(y,_){return St(this,void 0,void 0,function(){var A,b,R,O,V,B,x;return Tt(this,function(E){switch(E.label){case 0:A=_?c.filter(_):c,E.label=1;case 1:E.trys.push([1,6,7,8]),b=GA(A),R=b.next(),E.label=2;case 2:return R.done?[3,5]:(O=R.value,[4,O.applyConstraints(y)]);case 3:E.sent(),E.label=4;case 4:return R=b.next(),[3,2];case 5:return[3,8];case 6:return V=E.sent(),B={error:V},[3,8];case 7:try{R&&!R.done&&(x=b.return)&&x.call(b)}finally{if(B)throw B.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(y){return c.find(y).getConstraints()},streamVideoSettingsGet:function(y){return c.find(y).getSettings()},streamVideoCapabilitiesGet:function(y){return c.find(y).getCapabilities()}}),l=n.mediaStreamIsTorchCompatible(e),l&&(f=c?.find(function(y){return n.mediaStreamIsTorchCompatibleTrack(y)}),h=function(y){return St(p,void 0,void 0,function(){return Tt(this,function(_){switch(_.label){case 0:return[4,n.mediaStreamSetTorch(f,y)];case 1:return _.sent(),[2]}})})},u.switchTorch=h,u.stop=function(){return St(p,void 0,void 0,function(){return Tt(this,function(y){switch(y.label){case 0:return a.stop(),[4,h(!1)];case 1:return y.sent(),[2]}})})}),[2,u]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return St(this,void 0,void 0,function(){var i,o;return Tt(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return St(this,void 0,void 0,function(){var r,i;return Tt(this,function(o){switch(o.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new wt("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return o.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return St(this,void 0,void 0,function(){var r,i,o,s;return Tt(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new wt("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},o=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,o)];case 1:return a.sent(),s=this.scan(r,t,i),[2,s]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return St(this,void 0,void 0,function(){var r;return Tt(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return St(this,void 0,void 0,function(){var r,i,o;return Tt(this,function(s){switch(s.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return o=s.sent(),[2,o];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return St(this,void 0,void 0,function(){var r,i;return Tt(this,function(o){switch(o.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return St(this,void 0,void 0,function(){var t,r;return Tt(this,function(i){switch(i.label){case 0:if(!e)throw new wt("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return St(this,void 0,void 0,function(){var t,r;return Tt(this,function(i){switch(i.label){case 0:if(!e)throw new wt("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var o=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(s,a){o.scan(e,function(c,u,l){if(c){s(c),l.stop();return}if(u){if(u instanceof P&&t||u instanceof He&&r||u instanceof z&&i)return;l.stop(),a(u)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var o=n.createCaptureCanvas(e),s;try{s=o.getContext("2d",{willReadFrequently:!0})}catch{s=o.getContext("2d")}if(!s)throw new Error("Couldn't create canvas for visual element scan.");var a=function(){s=void 0,o=void 0},c=!1,u,l=function(){c=!0,clearTimeout(u),a(),r&&r()},f={stop:l},h=function(){if(!c)try{n.drawImageOnCanvas(s,e);var p=i.decodeFromCanvas(o);t(p,void 0,f),u=setTimeout(h,i.options.delayBetweenScanSuccess)}catch(A){t(void 0,A,f);var m=A instanceof He,y=A instanceof z,_=A instanceof P;if(m||y||_){u=setTimeout(h,i.options.delayBetweenScanAttempts);return}a(),r&&r(A)}};return h(),f},n.prototype._decodeOnLoadImage=function(e){return St(this,void 0,void 0,function(){var t;return Tt(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return St(this,void 0,void 0,function(){var t;return Tt(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n}();var oJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qRe=function(n){oJ(e,n);function e(t,r){return n.call(this,new ms,t,r)||this}return e}(fn);var sJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),YRe=function(n){sJ(e,n);function e(t,r){return n.call(this,new Bi(t),t,r)||this}return e}(fn);var aJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tMe=function(n){aJ(e,n);function e(t,r){return n.call(this,new Es,t,r)||this}return e}(fn);var cJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),r3=function(n){cJ(e,n);function e(t,r){var i=this,o=new Af;return o.setHints(t),i=n.call(this,o,t,r)||this,i.reader=o,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(le.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e}(fn);var uJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cMe=function(n){uJ(e,n);function e(t,r){return n.call(this,new As,t,r)||this}return e}(fn);var lJ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fMe=function(n){lJ(e,n);function e(t,r){return n.call(this,new Is,t,r)||this}return e}(fn);var Ro="http://www.w3.org/2000/svg",gMe=function(){function n(e){if(typeof e=="string"){var t=document.getElementById(e);if(!t)throw new Error("Could not find a Container element with '".concat(e,"'."));this.containerElement=t}else this.containerElement=e}return n.prototype.write=function(e,t,r,i){if(e.length===0)throw new $("Found empty contents");if(t<0||r<0)throw new $("Requested dimensions are too small: "+t+"x"+r);var o=i&&i.get(me.MARGIN)!==void 0?Number.parseInt(i.get(me.MARGIN).toString(),10):n.QUIET_ZONE_SIZE,s=this.encode(i,e);return this.renderResult(s,t,r,o)},n.prototype.createSVGElement=function(e,t){var r=document.createElementNS(n.SVG_NS,"svg");return r.setAttributeNS(Ro,"width",t.toString()),r.setAttributeNS(Ro,"height",e.toString()),r},n.prototype.createSvgPathPlaceholderElement=function(e,t){var r=document.createElementNS(n.SVG_NS,"path");return r.setAttributeNS(Ro,"d","M0 0h".concat(e,"v").concat(t,"H0z")),r.setAttributeNS(Ro,"fill","none"),r},n.prototype.createSvgRectElement=function(e,t,r,i){var o=document.createElementNS(n.SVG_NS,"rect");return o.setAttributeNS(Ro,"x",e.toString()),o.setAttributeNS(Ro,"y",t.toString()),o.setAttributeNS(Ro,"height",r.toString()),o.setAttributeNS(Ro,"width",i.toString()),o.setAttributeNS(Ro,"fill","#000000"),o},n.prototype.encode=function(e,t){var r=Zn.L;if(e&&e.get(me.ERROR_CORRECTION)!==void 0){var i=e.get(me.ERROR_CORRECTION).toString();r=Zn.fromString(i)}var o=To.encode(t,r,e);return o},n.prototype.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new zt;var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),f=Math.max(r,u),h=Math.min(Math.floor(l/c),Math.floor(f/u)),p=Math.floor((l-s*h)/2),m=Math.floor((f-a*h)/2),y=this.createSVGElement(l,f),_=this.createSvgPathPlaceholderElement(t,r);y.appendChild(_),this.containerElement.appendChild(y);for(var A=0,b=m;A<a;A++,b+=h)for(var R=0,O=p;R<s;R++,O+=h)if(o.get(R,A)===1){var V=this.createSvgRectElement(O,b,h,h);y.appendChild(V)}return y},n.QUIET_ZONE_SIZE=4,n.SVG_NS="http://www.w3.org/2000/svg",n}();var i3="http://www.w3.org/2000/svg",yMe=function(){function n(){}return n.prototype.write=function(e,t,r,i){if(e.length===0)throw new $("Found empty contents");if(t<0||r<0)throw new $("Requested dimensions are too small: "+t+"x"+r);var o=Zn.L,s=n.QUIET_ZONE_SIZE;if(i){if(i.get(me.ERROR_CORRECTION)!==void 0){var a=i.get(me.ERROR_CORRECTION).toString();o=Zn.fromString(a)}i.get(me.MARGIN)!==void 0&&(s=Number.parseInt(i.get(me.MARGIN).toString(),10))}var c=To.encode(e,o,i);return this.renderResult(c,t,r,s)},n.prototype.writeToDom=function(e,t,r,i,o){if(typeof e=="string"){var s=document.querySelector(e);if(!s)throw new Error("Could no find the target HTML element.");e=s}var a=this.write(t,r,i,o);e instanceof HTMLElement&&e.appendChild(a)},n.prototype.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new zt;for(var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),f=Math.max(r,u),h=Math.min(Math.floor(l/c),Math.floor(f/u)),p=Math.floor((l-s*h)/2),m=Math.floor((f-a*h)/2),y=this.createSVGElement(l,f),_=0,A=m;_<a;_++,A+=h)for(var b=0,R=p;b<s;b++,R+=h)if(o.get(b,_)===1){var O=this.createSvgRectElement(R,A,h,h);y.appendChild(O)}return y},n.prototype.createSVGElement=function(e,t){var r=document.createElementNS(i3,"svg"),i=e.toString(),o=t.toString();return r.setAttribute("height",o),r.setAttribute("width",i),r.setAttribute("viewBox","0 0 "+i+" "+o),r},n.prototype.createSvgRectElement=function(e,t,r,i){var o=document.createElementNS(i3,"rect");return o.setAttribute("x",e.toString()),o.setAttribute("y",t.toString()),o.setAttribute("height",r.toString()),o.setAttribute("width",i.toString()),o.setAttribute("fill","#000000"),o},n.QUIET_ZONE_SIZE=4,n}();var dJ=["preview"],Mf=class extends r3{getScannerControls(){if(!this.scannerControls)throw new Error("No scanning is running at the time.");return this.scannerControls}scanFromDeviceObservable(e,t){return I(this,null,function*(){let r=new Lt({}),i;try{i=yield this.decodeFromVideoDevice(e,t,(o,s)=>{if(!s){r.next({result:o});return}let a=s.name;if(a===P.name||a===He.name||a===z.name||s.message.includes("No MultiFormat Readers were able to detect the code.")){r.next({error:s});return}r.error(s),this.scannerControls.stop(),this.scannerControls=void 0}),this.scannerControls=ae(W({},i),{stop(){i.stop(),r.complete()}})}catch(o){r.error(o),this.scannerControls?.stop(),this.scannerControls=void 0}return r.asObservable()})}},o3=(()=>{class n{get codeReader(){return this._codeReader}set device(t){if(!this._ready){this._devicePreStart=t;return}if(this.isAutostarting){console.warn("Avoid setting a device during auto-start.");return}if(this.isCurrentDevice(t)){console.warn("Setting the same device is not allowed.");return}if(!this.hasPermission){console.warn("Permissions not set yet, waiting for them to be set to apply device change.");return}this.setDevice(t)}get device(){return this._device}get formats(){return this.hints.get(le.POSSIBLE_FORMATS)}set formats(t){if(typeof t=="string")throw new Error("Invalid formats, make sure the [formats] input is a binding.");let r=t.map(o=>this.getBarcodeFormatOrFail(o)),i=this.hints;i.set(le.POSSIBLE_FORMATS,r),this.hints=i}get hints(){return this._hints}set hints(t){this._hints=t,this.codeReader?.setHints(this._hints)}set videoConstraints(t){let r=this.codeReader?.getScannerControls();r&&r?.streamVideoConstraintsApply(t)}set isAutostarting(t){this._isAutostarting=t,this.autostarting.next(t)}get isAutostarting(){return this._isAutostarting}set torch(t){try{this.getCodeReader().getScannerControls().switchTorch(t)}catch{}}set enable(t){this._enabled!==!!t&&(this._enabled=!!t,this._enabled?this.device?this.scanFromDevice(this.device.deviceId):this.init():(this.reset(),Mf.releaseAllStreams()))}get enabled(){return this._enabled}get tryHarder(){return this.hints.get(le.TRY_HARDER)}set tryHarder(t){let r=this.hints;t?r.set(le.TRY_HARDER,!0):r.delete(le.TRY_HARDER),this.hints=r}constructor(){this.timeBetweenScans=500,this.delayBetweenScanSuccess=500,this.previewFitMode="cover",this.poster="",this._ready=!1,this.autostarted=new Ce,this.autostarting=new Ce,this.torchCompatible=new Ce(!1),this.scanSuccess=new Ce,this.scanFailure=new Ce,this.scanError=new Ce,this.scanComplete=new Ce,this.camerasFound=new Ce,this.camerasNotFound=new Ce,this.permissionResponse=new Ce(!0),this.hasDevices=new Ce,this.deviceChange=new Ce,this._enabled=!0,this._hints=new Map,this.autofocusEnabled=!0,this.autostart=!0,this.formats=[G.QR_CODE],this.hasNavigator=typeof navigator<"u",this.isMediaDevicesSupported=this.hasNavigator&&!!navigator.mediaDevices}askForPermission(){return I(this,null,function*(){if(!this.hasNavigator)return console.error("@zxing/ngx-scanner","Can't ask permission, navigator is not present."),this.setPermission(null),this.hasPermission;if(!this.isMediaDevicesSupported)return console.error("@zxing/ngx-scanner","Can't get user media, this is not supported."),this.setPermission(null),this.hasPermission;let t,r;try{t=yield this.getAnyVideoDevice(),r=!!t}catch(i){return this.handlePermissionException(i)}finally{this.terminateStream(t)}return this.setPermission(r),r})}getAnyVideoDevice(){return navigator.mediaDevices.getUserMedia({video:!0})}terminateStream(t){t&&t.getTracks().forEach(r=>r.stop()),t=void 0}init(){return I(this,null,function*(){if(!this.autostart){console.warn("Feature 'autostart' disabled. Permissions and devices recovery has to be run manually."),this.initAutostartOff(),this._ready=!0;return}yield this.initAutostartOn(),this._ready=!0})}initAutostartOff(){this.isAutostarting=!1,this.updateVideoInputDevices(),this._device&&this._devicePreStart&&this.setDevice(this._devicePreStart)}initAutostartOn(){return I(this,null,function*(){this.isAutostarting=!0;let t;try{t=yield this.askForPermission()}catch(r){console.error("Exception occurred while asking for permission:",r);return}if(t){let r=yield this.updateVideoInputDevices();yield this.autostartScanner([...r])}this.isAutostarting=!1,this.autostarted.next()})}isCurrentDevice(t){return t?.deviceId===this._device?.deviceId}ngOnDestroy(){this.reset(),fn.cleanVideoSource(this.previewElemRef.nativeElement),Mf.releaseAllStreams()}ngOnInit(){this.init()}scanStop(){this._scanSubscription&&(this.codeReader?.getScannerControls().stop(),this._scanSubscription?.unsubscribe(),this._scanSubscription=void 0)}scanStart(){if(this._scanSubscription)throw new Error("There is already a scan process running.");if(!this._device)throw new Error("No device defined, cannot start scan, please define a device.");this.scanFromDevice(this._device.deviceId)}restart(){this._codeReader=void 0;let t=this._reset();t&&(this.device=t)}updateVideoInputDevices(){return I(this,null,function*(){let t=(yield fn.listVideoInputDevices())||[],r=t&&t.length>0;return this.hasDevices.next(r),this.camerasFound.next([...t]),r||this.camerasNotFound.next(null),t})}autostartScanner(t){return I(this,null,function*(){let r=({label:o})=>/back|trs|rear|traseira|environment|ambiente/gi.test(o),i=t.find(r)||t.pop();if(!i)throw new Error("Impossible to autostart, no input devices available.");yield this.setDevice(i),this.deviceChange.next(i)})}dispatchScanSuccess(t){this.scanSuccess.next(t.getText())}dispatchScanFailure(t){this.scanFailure.next(t)}dispatchScanError(t){this.scanError.observed||(console.error(`zxing scanner component: ${t.name}`,t),console.warn("Use the `(scanError)` property to handle errors like this!")),this.scanError.next(t)}dispatchScanComplete(t){this.scanComplete.next(t)}handlePermissionException(t){console.error("@zxing/ngx-scanner","Error when asking for permission.",t);let r;switch(t.name){case"NotSupportedError":console.warn("@zxing/ngx-scanner",t.message),r=null,this.hasDevices.next(null);break;case"NotAllowedError":console.warn("@zxing/ngx-scanner",t.message),r=!1,this.hasDevices.next(!0);break;case"NotFoundError":console.warn("@zxing/ngx-scanner",t.message),r=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;case"NotReadableError":console.warn("@zxing/ngx-scanner","Couldn't read the device(s)'s stream, it's probably in use by another app."),r=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;case"AbortError":console.warn("@zxing/ngx-scanner","It seems that the required permissions have been granted, but something else failed",t),r=!0,this.hasDevices.next(null),this.camerasNotFound.next(t);break;default:console.warn("@zxing/ngx-scanner","I was not able to define if I have permissions for camera or not.",t),r=null;break}return this.setPermission(r),this.permissionResponse.error(t),r}getBarcodeFormatOrFail(t){return typeof t=="string"?G[t.trim().toUpperCase()]:t}getCodeReader(){if(!this._codeReader){let t={delayBetweenScanAttempts:this.timeBetweenScans,delayBetweenScanSuccess:this.delayBetweenScanSuccess};this._codeReader=new Mf(this.hints,t)}return this._codeReader}scanFromDevice(t){return I(this,null,function*(){let r=this.previewElemRef.nativeElement,i=this.getCodeReader(),o=yield i.scanFromDeviceObservable(t,r);if(!o)throw new Error("Undefined decoding stream, aborting.");let s=f=>this._onDecodeResult(f.result,f.error),a=f=>this._onDecodeError(f),c=()=>{};if(this._scanSubscription=o.subscribe(s,a,c),this._scanSubscription.closed)return;let l=typeof i.getScannerControls().switchTorch<"u";this.torchCompatible.next(l)})}_onDecodeError(t){this.dispatchScanError(t)}_onDecodeResult(t,r){t?this.dispatchScanSuccess(t):this.dispatchScanFailure(r),this.dispatchScanComplete(t)}_reset(){if(!this._codeReader)return;this.scanStop();try{let r=this.previewElemRef.nativeElement;fn.cleanVideoSource(r)}catch{}try{fn.releaseAllStreams()}catch{}this._codeReader=void 0;let t=this._device;return this.device=void 0,t}reset(){this._reset(),this.deviceChange.emit(null)}setDevice(t){return I(this,null,function*(){this.scanStop(),this._device=t||void 0,this._device||fn.cleanVideoSource(this.previewElemRef.nativeElement),this._enabled&&t&&(yield this.scanFromDevice(t.deviceId))})}setPermission(t){this.hasPermission=t,this.permissionResponse.next(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Et({type:n,selectors:[["zxing-scanner"]],viewQuery:function(r,i){if(r&1&&t2(dJ,7),r&2){let o;Lp(o=Vp())&&(i.previewElemRef=o.first)}},inputs:{autofocusEnabled:"autofocusEnabled",timeBetweenScans:"timeBetweenScans",delayBetweenScanSuccess:"delayBetweenScanSuccess",autostart:"autostart",previewFitMode:"previewFitMode",poster:"poster",device:"device",formats:"formats",videoConstraints:"videoConstraints",torch:"torch",enable:"enable",tryHarder:"tryHarder"},outputs:{autostarted:"autostarted",autostarting:"autostarting",torchCompatible:"torchCompatible",scanSuccess:"scanSuccess",scanFailure:"scanFailure",scanError:"scanError",scanComplete:"scanComplete",camerasFound:"camerasFound",camerasNotFound:"camerasNotFound",permissionResponse:"permissionResponse",hasDevices:"hasDevices",deviceChange:"deviceChange"},standalone:!1,decls:6,vars:3,consts:[["preview",""],[3,"poster"]],template:function(r,i){r&1&&(te(0,"video",1,0)(2,"p"),xe(3," Your browser does not support this feature, please try to upgrade it. "),ne(),te(4,"p"),xe(5," Seu navegador n\xE3o suporta este recurso, por favor tente atualiz\xE1-lo. "),ne()()),r&2&&(__("object-fit",i.previewFitMode),at("poster",i.poster,Q1))},styles:["[_nghost-%COMP%]{display:block}video[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:contain}"],changeDetection:0})}}return n})(),e0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=hr({type:n})}static{this.\u0275inj=fr({imports:[sr,Mi]})}}return n})();function hJ(n,e){if(n&1){let t=to();te(0,"div",2)(1,"button",9),je("click",function(){Wr(t);let i=on();return qr(i.startScanning())}),xe(2," Scan "),ne()()}}function pJ(n,e){if(n&1){let t=to();te(0,"div",10)(1,"zxing-scanner",11),je("scanSuccess",function(i){Wr(t);let o=on();return qr(o.onCodeResult(i))}),ne(),te(2,"button",12),je("click",function(){Wr(t);let i=on();return qr(i.stopScanning())}),xe(3," Cancel "),ne()()}if(n&2){let t=on();be(),at("formats",t.allowedFormats)("torch",!0)}}var $u=class n{enableScanner=!1;productAdded=new Ce;allowedFormats=[G.EAN_13];isScanning=!1;newItemName="";newItemQty=1;startScanning(){this.isScanning=!0}stopScanning(){this.isScanning=!1}onCodeResult(e){return I(this,null,function*(){this.isScanning=!1;let t=yield this.fetchProductNameFromBarcode(e);t?this.newItemName=t:alert("Product not found for this barcode.")})}fetchProductNameFromBarcode(e){return I(this,null,function*(){try{let r=yield(yield fetch(`https://world.openfoodfacts.org/api/v0/product/${e}.json`)).json();return r.status===1&&r.product.product_name||null}catch(t){return console.error("Barcode fetch error:",t),null}})}addItem(){!this.newItemName||!this.newItemQty||(this.productAdded.emit({name:this.newItemName,quantity:this.newItemQty}),this.newItemName="",this.newItemQty=1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-add-product"]],inputs:{enableScanner:"enableScanner"},outputs:{productAdded:"productAdded"},decls:11,vars:4,consts:[[1,"mb-3"],[1,"row","g-2","align-items-end"],[1,"col-auto"],["placeholder","Item Name","name","itemName",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-1"],["type","number","min","1","name","itemQty",1,"form-control",3,"ngModelChange","ngModel"],["class","col-auto",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],["class","mt-3",4,"ngIf"],["type","button",1,"btn","btn-outline-info",3,"click"],[1,"mt-3"],[1,"w-100","border","rounded",2,"height","300px",3,"scanSuccess","formats","torch"],["type","button",1,"btn","btn-danger","mt-2","w-100",3,"click"]],template:function(t,r){t&1&&(te(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),Ii("ngModelChange",function(o){return no(r.newItemName,o)||(r.newItemName=o),o}),ne()(),te(4,"div",4)(5,"input",5),Ii("ngModelChange",function(o){return no(r.newItemQty,o)||(r.newItemQty=o),o}),ne()(),gn(6,hJ,3,0,"div",6),te(7,"div",2)(8,"button",7),je("click",function(){return r.addItem()}),xe(9," Add "),ne()()(),gn(10,pJ,4,2,"div",8),ne()),t&2&&(be(3),Ei("ngModel",r.newItemName),be(2),Ei("ngModel",r.newItemQty),be(),at("ngIf",r.enableScanner),be(4),at("ngIf",r.isScanning))},dependencies:[sr,Yr,Mi,ls,PE,tu,kE,va,e0,o3],encapsulation:2})};var _n=[];for(let n=0;n<256;++n)_n.push((n+256).toString(16).slice(1));function s3(n,e=0){return(_n[n[e+0]]+_n[n[e+1]]+_n[n[e+2]]+_n[n[e+3]]+"-"+_n[n[e+4]]+_n[n[e+5]]+"-"+_n[n[e+6]]+_n[n[e+7]]+"-"+_n[n[e+8]]+_n[n[e+9]]+"-"+_n[n[e+10]]+_n[n[e+11]]+_n[n[e+12]]+_n[n[e+13]]+_n[n[e+14]]+_n[n[e+15]]).toLowerCase()}var WA,gJ=new Uint8Array(16);function qA(){if(!WA){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");WA=crypto.getRandomValues.bind(crypto)}return WA(gJ)}var mJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),KA={randomUUID:mJ};function vJ(n,e,t){if(KA.randomUUID&&!e&&!n)return KA.randomUUID();n=n||{};let r=n.random??n.rng?.()??qA();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[t+i]=r[i];return e}return s3(r)}var Nf=vJ;function yJ(n,e){if(n&1&&(te(0,"li",14),xe(1),ne()),n&2){let t=e.$implicit;be(),Js(" ",t.name," (x",t.quantity,") ")}}function _J(n,e){if(n&1&&(te(0,"div",10)(1,"h5",11),xe(2,"Added Products:"),ne(),te(3,"ul",12),gn(4,yJ,2,2,"li",13),ne()()),n&2){let t=on();be(4),at("ngForOf",t.items)}}var t0=class n{firestore=U($n);auth=U(tn);allowedFormats=[G.EAN_13];isScanning=!1;close=new Ce;listName="";plannedDate="";selectedShop=null;user=null;newItemName="";newItemQty=1;items=[];constructor(){cs(this.auth,e=>this.user=e)}selectedLocation=null;onLocationSelected(e){this.selectedLocation=e}startScanning(){this.isScanning=!0}stopScanning(){this.isScanning=!1}createList(){return I(this,null,function*(){if(!this.user||!this.selectedLocation||!this.listName||!this.plannedDate)return;let e=Io(this.firestore,"shoppingLists",this.user.uid,"lists"),t=yield Ck(e,{name:this.listName,plannedDate:this.plannedDate,coordinates:this.selectedLocation}),r=Io(this.firestore,"products");for(let i of this.items){let o=Nf();yield gs(Fr(r,o),ae(W({},i),{listId:t.id,userId:this.user.uid}))}this.close.emit()})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-add-shopping-list"]],outputs:{close:"close"},decls:14,vars:5,consts:[[1,"p-3","border","rounded","shadow-sm","bg-light","mb-3",3,"ngSubmit"],[1,"mb-3"],["name","listName","required","","placeholder","List Name",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","plannedDate","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"border","rounded",2,"height","300px"],[3,"locationSelected"],[1,"mb-4","pb-3"],[3,"productAdded","enableScanner"],["class","mt-3",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[1,"mt-3"],[1,"mb-2"],[1,"list-group","mb-4"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"]],template:function(t,r){t&1&&(te(0,"form",0),je("ngSubmit",function(){return r.createList()}),te(1,"div",1)(2,"input",2),Ii("ngModelChange",function(o){return no(r.listName,o)||(r.listName=o),o}),ne()(),te(3,"div",1)(4,"input",3),Ii("ngModelChange",function(o){return no(r.plannedDate,o)||(r.plannedDate=o),o}),ne()(),te(5,"div",1)(6,"div",4)(7,"app-shop-map",5),je("locationSelected",function(o){return r.onLocationSelected(o)}),ne()()(),te(8,"span",6),xe(9,"Add your products"),ne(),te(10,"app-add-product",7),je("productAdded",function(o){return r.items.push(o)}),ne(),gn(11,_J,5,1,"div",8),te(12,"button",9),xe(13," Create "),ne()()),t&2&&(be(2),Ei("ngModel",r.listName),be(2),Ei("ngModel",r.plannedDate),be(6),at("enableScanner",!0),be(),at("ngIf",r.items.length>0),be(),at("disabled",!r.listName||!r.plannedDate||!r.selectedLocation||r.items.length===0))},dependencies:[sr,Zo,Yr,Mi,vm,ls,tu,gm,Ld,va,Fd,Dv,e0,$u],encapsulation:2})};var Gu=class n{constructor(e){this.location=e}goBack(){this.location.back()}static \u0275fac=function(t){return new(t||n)(Ne(Ko))};static \u0275cmp=Et({type:n,selectors:[["app-back-button"]],decls:2,vars:0,consts:[[1,"btn","btn-outline-secondary","mb-3",3,"click"]],template:function(t,r){t&1&&(te(0,"button",0),je("click",function(){return r.goBack()}),xe(1," \u2190 Back "),ne())},encapsulation:2})};function wJ(n,e){if(n&1){let t=to();te(0,"app-add-shopping-list",6),je("close",function(){Wr(t);let i=on();return qr(i.closeAddListModal())}),ne()}}function EJ(n,e){if(n&1){let t=to();te(0,"div",8)(1,"div",9)(2,"h5",10),xe(3),ne(),te(4,"h6",11),xe(5),Fl(6,"date"),ne(),te(7,"p",12),xe(8),ne(),te(9,"div",13)(10,"button",14),je("click",function(){let i=Wr(t).$implicit,o=on(3);return qr(o.goToList(i.id))}),xe(11," View "),ne(),te(12,"button",15),je("click",function(){let i=Wr(t).$implicit,o=on(3);return qr(o.deleteList(i.id))}),xe(13," Delete "),ne()()()()}if(n&2){let t=e.$implicit;be(3),Qs(t.name),be(2),Js(" ",t.shopName," \u2014 ",Ll(6,4,t.plannedDate)," "),be(3),wi("Products: ",t.itemCount,"")}}function IJ(n,e){if(n&1&&(kp(0),gn(1,EJ,14,6,"div",7),Fp()),n&2){let t=on().ngIf;be(),at("ngForOf",t)}}function CJ(n,e){if(n&1&&(kp(0),gn(1,IJ,2,1,"ng-container",5),Fp()),n&2){let t=e.ngIf;on();let r=w_(10);be(),at("ngIf",t.length>0)("ngIfElse",r)}}function AJ(n,e){n&1&&(te(0,"p"),xe(1,"No shopping lists yet."),ne())}var n0=class n{firestore=U($n);auth=U(tn);router=U(mr);shoppingLists$=he([]);user=null;showAddModal=!1;ngOnInit(){cs(this.auth,e=>{e&&(console.log("User is logged in:",e.uid),this.user=e,this.loadShoppingLists(e))})}loadShoppingLists(e){let t=Io(this.firestore,"shoppingLists",e.uid,"lists");this.shoppingLists$=yv(t,{idField:"id"}).pipe(Gt(r=>{let i=r.map(o=>this.getItemCount(o.id).pipe(se(s=>ae(W({},o),{itemCount:s}))));return vl(i)}))}getItemCount(e){if(!this.user)return he(0);let t=Io(this.firestore,"products"),r=wv(t,Ev("listId","==",e));return _t(xk(r)).pipe(se(i=>i.size),fi(i=>(console.error("Error fetching products:",i),he(0))))}goToList(e){this.router.navigate(["/list",e])}deleteList(e){return I(this,null,function*(){if(!this.user||!confirm("Are you sure you want to delete this shopping list?"))return;let r=Fr(this.firestore,"shoppingLists",this.user.uid,"lists",e);yield _v(r),this.reloadLists()})}openAddListModal(){this.showAddModal=!0}closeAddListModal(){this.showAddModal=!1}reloadLists(){this.user&&this.loadShoppingLists(this.user)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-shopping-lists"]],decls:11,vars:5,consts:[["noLists",""],[1,"container","py-3"],[1,"mb-3"],[1,"btn","btn-primary","mb-3",3,"click"],[3,"close",4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"close"],["class","card mb-3 shadow-sm",4,"ngFor","ngForOf"],[1,"card","mb-3","shadow-sm"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],[1,"d-flex","gap-2","mt-3"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"btn","btn-outline-danger","btn-sm",3,"click"]],template:function(t,r){if(t&1){let i=to();te(0,"div",1),ir(1,"app-back-button"),te(2,"h1",2),xe(3,"Your Shopping Lists"),ne(),te(4,"button",3),je("click",function(){return Wr(i),qr(r.openAddListModal())}),xe(5," Add New List "),ne(),gn(6,wJ,1,0,"app-add-shopping-list",4)(7,CJ,2,2,"ng-container",5),Fl(8,"async"),gn(9,AJ,2,0,"ng-template",null,0,i2),ne()}if(t&2){let i=w_(10);be(6),at("ngIf",r.showAddModal),be(),at("ngIf",Ll(8,3,r.shoppingLists$))("ngIfElse",i)}},dependencies:[sr,Zo,Yr,$l,R_,t0,Gu],encapsulation:2})};function xJ(n,e){if(n&1){let t=to();te(0,"li",7),xe(1),te(2,"button",8),je("click",function(){let i=Wr(t).$implicit,o=on();return qr(o.removeItem(i.id))}),xe(3," Delete "),ne()()}if(n&2){let t=e.$implicit;be(),Js(" ",t.name," (x",t.quantity,") ")}}function DJ(n,e){if(n&1&&(te(0,"div",9)(1,"google-map",10),ir(2,"map-marker",11),ne()()),n&2){let t=on();be(),at("center",t.coordinates)("zoom",15),be(),at("position",t.coordinates)("label","Shop")}}var r0=class n{route=U(Jr);firestore=U($n);auth=U(tn);user=null;listId;listName="";plannedDate="";coordinates=null;newItemName="";newItemQty=1;items$;ngOnInit(){this.listId=this.route.snapshot.paramMap.get("id"),cs(this.auth,e=>{this.user=e,e&&this.loadListDetails()})}loadListDetails(){return I(this,null,function*(){let e=Fr(this.firestore,"shoppingLists",this.user.uid,"lists",this.listId),r=(yield Ak(e)).data();this.listName=r.name,this.plannedDate=r.plannedDate,this.coordinates=r.coordinates||null;let i=Io(this.firestore,"products"),o=wv(i,Ev("listId","==",this.listId));this.items$=yv(o,{idField:"id"})})}addItemFromChild(e){if(!this.user)return;let t=Nf(),r=ae(W({},e),{listId:this.listId,userId:this.user.uid}),i=Io(this.firestore,"products");gs(Fr(i,t),r)}removeItem(e){return I(this,null,function*(){if(!this.user)return;let t=Fr(this.firestore,"products",e);yield _v(t)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-shopping-list-details"]],decls:11,vars:7,consts:[[1,"container","p-3"],[1,"mb-3"],[1,"text-muted","mb-4"],[3,"productAdded","enableScanner"],[1,"list-group","mb-4"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],["class","mb-3","style","height: 300px",4,"ngIf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"mb-3",2,"height","300px"],["height","100%","width","100%",3,"center","zoom"],[3,"position","label"]],template:function(t,r){t&1&&(te(0,"div",0),ir(1,"app-back-button"),te(2,"h2",1),xe(3),ne(),te(4,"p",2),xe(5),ne(),te(6,"app-add-product",3),je("productAdded",function(o){return r.addItemFromChild(o)}),ne(),te(7,"ul",4),gn(8,xJ,4,2,"li",5),Fl(9,"async"),ne(),gn(10,DJ,3,4,"div",6),ne()),t&2&&(be(3),Qs(r.listName),be(2),wi("Planned Date: ",r.plannedDate,""),be(),at("enableScanner",!0),be(2),at("ngForOf",Ll(9,5,r.items$)),be(2),at("ngIf",r.coordinates))},dependencies:[sr,Zo,Yr,$l,Mi,xv,df,Av,$u,Gu],encapsulation:2})};var i0=()=>{let n=U(tn),e=U(mr);return Nh(r=>cs(n,r),(r,i)=>i()).pipe(Vt(1),se(r=>r?!0:(e.navigate(["/login"]),!1)))};var a3=[{path:"",canActivate:[i0],component:sm},{path:"login",component:Iv},{path:"list",canActivate:[i0],component:n0},{path:"list/:id",canActivate:[i0],component:r0}];var Of="Service workers are disabled or not supported by this browser",Wu=class{serviceWorker;worker;registration;events;constructor(e,t){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=new fe(r=>r.error(new Error(Of)));else{let r=null,i=new ht;this.worker=new fe(u=>(r!==null&&u.next(r),i.subscribe(l=>u.next(l))));let o=()=>{let{controller:u}=e;u!==null&&(r=u,i.next(r))};e.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Gt(()=>e.getRegistration()));let s=new ht;this.events=s.asObservable();let a=u=>{let{data:l}=u;l?.type&&s.next(l)};e.addEventListener("message",a),t?.get(yi,null,{optional:!0})?.onDestroy(()=>{e.removeEventListener("controllerchange",o),e.removeEventListener("message",a)})}}postMessage(e,t){return new Promise(r=>{this.worker.pipe(Vt(1)).subscribe(i=>{i.postMessage(W({action:e},t)),r()})})}postMessageWithOperation(e,t,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(e,t);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=r=>r.type===e:t=r=>e.includes(r.type),this.events.pipe(Ln(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Vt(1))}waitForOperationCompleted(e){return new Promise((t,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Ln(i=>i.nonce===e),Vt(1),se(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:t,error:r})})}get isEnabled(){return!!this.serviceWorker}},bJ=(()=>{class n{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new ht;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=ks,this.notificationClicks=ks,this.subscription=ks;return}this.messages=this.sw.eventsOfType("PUSH").pipe(se(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(se(i=>i.data)),this.pushManager=this.sw.registration.pipe(se(i=>i.pushManager));let r=this.pushManager.pipe(Gt(i=>i.getSubscription()));this.subscription=new fe(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Of));let r={userVisibleOnly:!0},i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(Gt(c=>c.subscribe(r)),Vt(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),s(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Of));let t=r=>{if(r===null)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(Vt(1),Gt(t)).subscribe({next:r,error:i})})}decodeBase64(t){return atob(t)}static \u0275fac=function(r){return new(r||n)(_e(Wu))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),SJ=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=ks,this.unrecoverable=ks;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Of));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Of));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(r){return new(r||n)(_e(Wu))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var u3=new X("");function TJ(){let n=U(Pf);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let e=U(u3),t=U(Me),r=U(yi);t.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),t.runOutsideAngular(()=>{let i,{registrationStrategy:o}=n;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=c3(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),c3(+a[0])]);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}i.then(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(s=>console.error("Service worker registration failed with:",s)))})}function c3(n){return new Promise(e=>setTimeout(e,n))}function RJ(n,e){return new Wu(n.enabled!==!1?navigator.serviceWorker:void 0,e)}var Pf=class{enabled;scope;registrationStrategy};function l3(n,e={}){return xn([bJ,SJ,{provide:u3,useValue:n},{provide:Pf,useValue:e},{provide:Wu,useFactory:RJ,deps:[Pf,At]},v_(TJ)])}var h3="functions";var ZA=class{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,mn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i?.get().then(o=>this.appCheck=o,()=>{})}getAuthToken(){return I(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return I(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return I(this,null,function*(){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return I(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var XA="us-central1";var YA=class{constructor(e,t,r,i,o=XA,s=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new ZA(e,t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=XA}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function MJ(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}var d3="@firebase/functions",f3="0.12.3";var NJ="auth-internal",OJ="app-check-internal",PJ="messaging-internal";function kJ(n){let e=(t,{instanceIdentifier:r})=>{let i=t.getProvider("app").getImmediate(),o=t.getProvider(NJ),s=t.getProvider(PJ),a=t.getProvider(OJ);return new YA(i,o,s,a,r)};en(new xt(h3,e,"PUBLIC").setMultipleInstances(!0)),Ve(d3,f3,n),Ve(d3,f3,"esm2017")}function p3(n=Rr(),e=XA){let r=vr(mt(n),h3).getImmediate({identifier:e}),i=Rg("functions");return i&&g3(r,...i),r}function g3(n,e,t){MJ(mt(n),e,t)}kJ();var kf=class{constructor(e){return e}},m3="functions",QA=class{constructor(){return Ti(m3)}};var JA=new X("angularfire2.functions-instances");function FJ(n,e){let t=ao(m3,n,e);return t&&new kf(t)}function LJ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new kf(r)}}var VJ={provide:QA,deps:[[new Ut,JA]]},BJ={provide:kf,useFactory:FJ,deps:[[new Ut,JA],yr]};function v3(n,...e){return Ve("angularfire",Mr.full,"fn"),xn([BJ,VJ,{provide:JA,useFactory:LJ(n),multi:!0,deps:[Me,At,Nr,ti,[new Ut,ma],[new Ut,ns],...e]}])}var y3=ct(p3,!0);var E3="@firebase/installations",rx="0.6.13";var I3=1e4,C3=`w:${rx}`,A3="FIS_v2",UJ="https://firebaseinstallations.googleapis.com/v1",jJ=60*60*1e3,zJ="installations",HJ="Installations";var $J={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ja=new zn(zJ,HJ,$J);function x3(n){return n instanceof Sn&&n.code.includes("request-failed")}function D3({projectId:n}){return`${UJ}/projects/${n}/installations`}function b3(n){return{token:n.token,requestStatus:2,expiresIn:WJ(n.expiresIn),creationTime:Date.now()}}function S3(n,e){return I(this,null,function*(){let r=(yield e.json()).error;return ja.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function T3({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function GJ(n,{refreshToken:e}){let t=T3(n);return t.append("Authorization",qJ(e)),t}function R3(n){return I(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function WJ(n){return Number(n.replace("s","000"))}function qJ(n){return`${A3} ${n}`}function KJ(r,i){return I(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let o=D3(n),s=T3(n),a=e.getImmediate({optional:!0});if(a){let f=yield a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}let c={fid:t,authVersion:A3,appId:n.appId,sdkVersion:C3},u={method:"POST",headers:s,body:JSON.stringify(c)},l=yield R3(()=>fetch(o,u));if(l.ok){let f=yield l.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:b3(f.authToken)}}else throw yield S3("Create Installation",l)})}function M3(n){return new Promise(e=>{setTimeout(e,n)})}function ZJ(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var XJ=/^[cdef][\w-]{21}$/,nx="";function YJ(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=QJ(n);return XJ.test(t)?t:nx}catch{return nx}}function QJ(n){return ZJ(n).substr(0,22)}function s0(n){return`${n.appName}!${n.appId}`}var N3=new Map;function O3(n,e){let t=s0(n);P3(t,e),JJ(t,e)}function P3(n,e){let t=N3.get(n);if(t)for(let r of t)r(e)}function JJ(n,e){let t=eee();t&&t.postMessage({key:n,fid:e}),tee()}var Ua=null;function eee(){return!Ua&&"BroadcastChannel"in self&&(Ua=new BroadcastChannel("[Firebase] FID Change"),Ua.onmessage=n=>{P3(n.data.key,n.data.fid)}),Ua}function tee(){N3.size===0&&Ua&&(Ua.close(),Ua=null)}var nee="firebase-installations-database",ree=1,za="firebase-installations-store",ex=null;function ix(){return ex||(ex=fa(nee,ree,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(za)}}})),ex}function o0(n,e){return I(this,null,function*(){let t=s0(n),i=(yield ix()).transaction(za,"readwrite"),o=i.objectStore(za),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&O3(n,e.fid),e})}function k3(n){return I(this,null,function*(){let e=s0(n),r=(yield ix()).transaction(za,"readwrite");yield r.objectStore(za).delete(e),yield r.done})}function a0(n,e){return I(this,null,function*(){let t=s0(n),i=(yield ix()).transaction(za,"readwrite"),o=i.objectStore(za),s=yield o.get(t),a=e(s);return a===void 0?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&O3(n,a.fid),a})}function ox(n){return I(this,null,function*(){let e,t=yield a0(n.appConfig,r=>{let i=iee(r),o=oee(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===nx?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function iee(n){let e=n||{fid:YJ(),registrationStatus:0};return F3(e)}function oee(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(ja.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=see(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:aee(n)}:{installationEntry:e}}function see(n,e){return I(this,null,function*(){try{let t=yield KJ(n,e);return o0(n.appConfig,t)}catch(t){throw x3(t)&&t.customData.serverCode===409?yield k3(n.appConfig):yield o0(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function aee(n){return I(this,null,function*(){let e=yield _3(n.appConfig);for(;e.registrationStatus===1;)yield M3(100),e=yield _3(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield ox(n);return r||t}return e})}function _3(n){return a0(n,e=>{if(!e)throw ja.create("installation-not-found");return F3(e)})}function F3(n){return cee(n)?{fid:n.fid,registrationStatus:0}:n}function cee(n){return n.registrationStatus===1&&n.registrationTime+I3<Date.now()}function uee(r,i){return I(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let o=lee(n,t),s=GJ(n,t),a=e.getImmediate({optional:!0});if(a){let f=yield a.getHeartbeatsHeader();f&&s.append("x-firebase-client",f)}let c={installation:{sdkVersion:C3,appId:n.appId}},u={method:"POST",headers:s,body:JSON.stringify(c)},l=yield R3(()=>fetch(o,u));if(l.ok){let f=yield l.json();return b3(f)}else throw yield S3("Generate Auth Token",l)})}function lee(n,{fid:e}){return`${D3(n)}/${e}/authTokens:generate`}function sx(n,e=!1){return I(this,null,function*(){let t,r=yield a0(n.appConfig,o=>{if(!L3(o))throw ja.create("not-registered");let s=o.authToken;if(!e&&hee(s))return o;if(s.requestStatus===1)return t=dee(n,e),o;{if(!navigator.onLine)throw ja.create("app-offline");let a=gee(o);return t=fee(n,a),a}});return t?yield t:r.authToken})}function dee(n,e){return I(this,null,function*(){let t=yield w3(n.appConfig);for(;t.authToken.requestStatus===1;)yield M3(100),t=yield w3(n.appConfig);let r=t.authToken;return r.requestStatus===0?sx(n,e):r})}function w3(n){return a0(n,e=>{if(!L3(e))throw ja.create("not-registered");let t=e.authToken;return mee(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function fee(n,e){return I(this,null,function*(){try{let t=yield uee(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield o0(n.appConfig,r),t}catch(t){if(x3(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield k3(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield o0(n.appConfig,r)}throw t}})}function L3(n){return n!==void 0&&n.registrationStatus===2}function hee(n){return n.requestStatus===2&&!pee(n)}function pee(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+jJ}function gee(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function mee(n){return n.requestStatus===1&&n.requestTime+I3<Date.now()}function vee(n){return I(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield ox(e);return r?r.catch(console.error):sx(e).catch(console.error),t.fid})}function yee(n,e=!1){return I(this,null,function*(){let t=n;return yield _ee(t),(yield sx(t,e)).token})}function _ee(n){return I(this,null,function*(){let{registrationPromise:e}=yield ox(n);e&&(yield e)})}function wee(n){if(!n||!n.options)throw tx("App Configuration");if(!n.name)throw tx("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw tx(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function tx(n){return ja.create("missing-app-config-values",{valueName:n})}var V3="installations",Eee="installations-internal",Iee=n=>{let e=n.getProvider("app").getImmediate(),t=wee(e),r=vr(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Cee=n=>{let e=n.getProvider("app").getImmediate(),t=vr(e,V3).getImmediate();return{getId:()=>vee(t),getToken:i=>yee(t,i)}};function Aee(){en(new xt(V3,Iee,"PUBLIC")),en(new xt(Eee,Cee,"PRIVATE"))}Aee();Ve(E3,rx);Ve(E3,rx,"esm2017");var xee="/firebase-messaging-sw.js",Dee="/firebase-cloud-messaging-push-scope",G3="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bee="https://fcmregistrations.googleapis.com/v1",W3="google.c.a.c_id",See="google.c.a.c_l",Tee="google.c.a.ts",Ree="google.c.a.e",B3=1e4;var c0=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(c0||{});function Mo(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mee(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}var ax="fcm_token_details_db",Nee=5,U3="fcm_token_object_Store";function Oee(n){return I(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(ax))return null;let e=null;return(yield fa(ax,Nee,{upgrade:(r,i,o,s)=>I(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(U3))return;let c=s.objectStore(U3),u=yield c.index("fcmSenderId").get(n);if(yield c.clear(),!!u){if(i===2){let l=u;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:(a=l.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:Mo(l.vapidKey)}}}else if(i===3){let l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Mo(l.auth),p256dh:Mo(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Mo(l.vapidKey)}}}else if(i===4){let l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Mo(l.auth),p256dh:Mo(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Mo(l.vapidKey)}}}}})})).close(),yield Pg(ax),yield Pg("fcm_vapid_details_db"),yield Pg("undefined"),Pee(e)?e:null})}function Pee(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var kee="firebase-messaging-database",Fee=1,Ff="firebase-messaging-store",cx=null;function q3(){return cx||(cx=fa(kee,Fee,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ff)}}})),cx}function Lee(n){return I(this,null,function*(){let e=K3(n),r=yield(yield q3()).transaction(Ff).objectStore(Ff).get(e);if(r)return r;{let i=yield Oee(n.appConfig.senderId);if(i)return yield dx(n,i),i}})}function dx(n,e){return I(this,null,function*(){let t=K3(n),i=(yield q3()).transaction(Ff,"readwrite");return yield i.objectStore(Ff).put(e,t),yield i.done,e})}function K3({appConfig:n}){return n.appId}var Vee={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Pn=new zn("messaging","Messaging",Vee);function Bee(n,e){return I(this,null,function*(){let t=yield hx(n),r=Z3(e),i={method:"POST",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(fx(n.appConfig),i)).json()}catch(s){throw Pn.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw Pn.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw Pn.create("token-subscribe-no-token");return o.token})}function Uee(n,e){return I(this,null,function*(){let t=yield hx(n),r=Z3(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(`${fx(n.appConfig)}/${e.token}`,i)).json()}catch(s){throw Pn.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw Pn.create("token-update-failed",{errorInfo:s})}if(!o.token)throw Pn.create("token-update-no-token");return o.token})}function jee(n,e){return I(this,null,function*(){let r={method:"DELETE",headers:yield hx(n)};try{let o=yield(yield fetch(`${fx(n.appConfig)}/${e}`,r)).json();if(o.error){let s=o.error.message;throw Pn.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw Pn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function fx({projectId:n}){return`${bee}/projects/${n}/registrations`}function hx(t){return I(this,arguments,function*({appConfig:n,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function Z3({p256dh:n,auth:e,endpoint:t,vapidKey:r}){let i={web:{endpoint:t,auth:e,p256dh:n}};return r!==G3&&(i.web.applicationPubKey=r),i}var zee=7*24*60*60*1e3;function Hee(n){return I(this,null,function*(){let e=yield Gee(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Mo(e.getKey("auth")),p256dh:Mo(e.getKey("p256dh"))},r=yield Lee(n.firebaseDependencies);if(r){if(Wee(r.subscriptionOptions,t))return Date.now()>=r.createTime+zee?$ee(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield jee(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return j3(n.firebaseDependencies,t)}else return j3(n.firebaseDependencies,t)})}function $ee(n,e){return I(this,null,function*(){try{let t=yield Uee(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield dx(n.firebaseDependencies,r),t}catch(t){throw t}})}function j3(n,e){return I(this,null,function*(){let r={token:yield Bee(n,e),createTime:Date.now(),subscriptionOptions:e};return yield dx(n,r),r.token})}function Gee(n,e){return I(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Mee(e)})})}function Wee(n,e){let t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,o=e.p256dh===n.p256dh;return t&&r&&i&&o}function z3(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return qee(e,n),Kee(e,n),Zee(e,n),e}function qee(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let r=e.notification.body;r&&(n.notification.body=r);let i=e.notification.image;i&&(n.notification.image=i);let o=e.notification.icon;o&&(n.notification.icon=o)}function Kee(n,e){e.data&&(n.data=e.data)}function Zee(n,e){var t,r,i,o,s;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(n.fcmOptions.link=a);let c=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}function Xee(n){return typeof n=="object"&&!!n&&W3 in n}Yee("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Yee(n,e){let t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function Qee(n){if(!n||!n.options)throw ux("App Configuration Object");if(!n.name)throw ux("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let r of e)if(!t[r])throw ux(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function ux(n){return Pn.create("missing-app-config-values",{valueName:n})}var lx=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=Qee(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};function Jee(n){return I(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(xee,{scope:Dee}),n.swRegistration.update().catch(()=>{}),yield ete(n.swRegistration)}catch(e){throw Pn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function ete(n){return I(this,null,function*(){return new Promise((e,t)=>{let r=setTimeout(()=>t(new Error(`Service worker not registered after ${B3} ms`)),B3),i=n.installing||n.waiting;n.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var s;((s=o.target)===null||s===void 0?void 0:s.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})})}function tte(n,e){return I(this,null,function*(){if(!e&&!n.swRegistration&&(yield Jee(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Pn.create("invalid-sw-registration");n.swRegistration=e}})}function nte(n,e){return I(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=G3)})}function X3(n,e){return I(this,null,function*(){if(!navigator)throw Pn.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Pn.create("permission-blocked");return yield nte(n,e?.vapidKey),yield tte(n,e?.serviceWorkerRegistration),Hee(n)})}function rte(n,e,t){return I(this,null,function*(){let r=ite(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[W3],message_name:t[See],message_time:t[Tee],message_device_time:Math.floor(Date.now()/1e3)})})}function ite(n){switch(n){case c0.NOTIFICATION_CLICKED:return"notification_open";case c0.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ote(n,e){return I(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===c0.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(z3(t)):n.onMessageHandler.next(z3(t)));let r=t.data;Xee(r)&&r[Ree]==="1"&&(yield rte(n,t.messageType,r))})}var H3="@firebase/messaging",$3="0.12.17";var ste=n=>{let e=new lx(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>ote(e,t)),e},ate=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:r=>X3(e,r)}};function cte(){en(new xt("messaging",ste,"PUBLIC")),en(new xt("messaging-internal",ate,"PRIVATE")),Ve(H3,$3),Ve(H3,$3,"esm2017")}function Y3(){return I(this,null,function*(){try{yield Mg()}catch{return!1}return typeof window<"u"&&la()&&GR()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function ute(n,e){if(!navigator)throw Pn.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}function Q3(n=Rr()){return Y3().then(e=>{if(!e)throw Pn.create("unsupported-browser")},e=>{throw Pn.create("indexed-db-unsupported")}),vr(mt(n),"messaging").getImmediate()}function J3(n,e){return I(this,null,function*(){return n=mt(n),X3(n,e)})}function eL(n,e){return n=mt(n),ute(n,e)}cte();var Ha=class{constructor(e){return e}},tL="messaging",px=class{constructor(){return Ti(tL)}};var gx=new X("angularfire2.messaging-instances");function lte(n,e,t){if(na(t))return null;let r=ao(tL,n,e);return r&&new Ha(r)}function dte(n){return(e,t,r)=>{if(na(r))return null;let i=e.runOutsideAngular(()=>n(t));return new Ha(i)}}var fte={provide:px,deps:[[new Ut,gx]]},hte={provide:Ha,useFactory:lte,deps:[[new Ut,gx],yr,xr]};function nL(n,...e){return Ve("angularfire",Mr.full,"fcm"),xn([hte,fte,{provide:gx,useFactory:dte(n),multi:!0,deps:[Me,At,xr,Nr,ti,...e]}])}var rL=ct(Q3,!0),iL=ct(J3,!0);var oL=ct(eL,!1);var u0={production:!1,firebase:{apiKey:"AIzaSyBlsdfUuJ-vwS_JCyAydhqcDmWO-93Ejok",authDomain:"listazakupow-6e0e6.firebaseapp.com",projectId:"listazakupow-6e0e6",storageBucket:"listazakupow-6e0e6.firebasestorage.app",messagingSenderId:"679036476559",appId:"1:679036476559:web:aca26ebb5eca67a09064fa",measurementId:"G-KZRJP60WJ2",vapidKey:"BDBGuCwoj-_FKCWsLVoMDt9cEAgMV6VHdJJ7D5sAM4NvokCLWBV0YCqb3gvImPmOWw_VjLSTnneaF45xRgWvHkI"},googleMapsApiKey:"AIzaSyAr7csnUMAZMJ7a563Df7wBF03PylWijZY"};var sL={providers:[a2({eventCoalescing:!0}),lw(a3),l3("ngsw-worker.js",{enabled:!Vl(),registrationStrategy:"registerWhenStable:30000"}),uM(()=>lM(u0.firebase)),pN(()=>mN()),v3(()=>y3()),Ik(()=>Dk()),nL(()=>rL())]};var Lf=class n{messaging=U(Ha);firestore=U($n);auth=U(tn);requestPermissionAndSaveToken(){iL(this.messaging,{vapidKey:u0.firebase.vapidKey}).then(e=>I(this,null,function*(){let t=this.auth.currentUser;if(t&&e){let r=Fr(this.firestore,`users/${t.uid}`);yield gs(r,{fcmToken:e},{merge:!0})}})).catch(e=>{console.error("Unable to get notification permission:",e)})}listenForMessages(){oL(this.messaging,e=>{console.log("FCM Message received:",e)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var l0=class n{title="AngularShoppingList";messagingService=U(Lf);ngOnInit(){this.messagingService.requestPermissionAndSaveToken(),this.messagingService.listenForMessages()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Et({type:n,selectors:[["app-root"]],features:[Zr([Lf])],decls:1,vars:0,template:function(t,r){t&1&&ir(0,"router-outlet")},dependencies:[fd],encapsulation:2})};U_(l0,sL).catch(n=>console.error(n));
